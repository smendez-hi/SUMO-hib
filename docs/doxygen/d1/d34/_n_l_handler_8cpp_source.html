<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SUMO - Simulation of Urban MObility: NLHandler.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="../../dir_75b82e7e4a5feb05200b9ad7adf06257.html">home</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_46b8f36974b309f038ffc35aa047a32b.html">boni</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_52e5be8ca53cec2b5437a8ba83e8e4f0.html">Desktop</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_7de3ce0f65e0314f747915173f89e60e.html">DanielTouched</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_a0096e276045b3ff0719c75e0b3c59bf.html">sumo-0.14.0</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_e9b8d709919855cd07b0394009af2578.html">src</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_0c71c31a0498147308ad27670a33c681.html">netload</a>
  </div>
</div>
<div class="contents">
<h1>NLHandler.cpp</h1><a href="../../d1/d34/_n_l_handler_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************/</span>
<a name="l00012"></a>00012 <span class="comment">// The XML-Handler for network loading</span>
<a name="l00013"></a>00013 <span class="comment">/****************************************************************************/</span>
<a name="l00014"></a>00014 <span class="comment">// SUMO, Simulation of Urban MObility; see http://sumo.sourceforge.net/</span>
<a name="l00015"></a>00015 <span class="comment">// Copyright (C) 2001-2012 DLR (http://www.dlr.de/) and contributors</span>
<a name="l00016"></a>00016 <span class="comment">/****************************************************************************/</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="comment">//   This file is part of SUMO.</span>
<a name="l00019"></a>00019 <span class="comment">//   SUMO is free software: you can redistribute it and/or modify</span>
<a name="l00020"></a>00020 <span class="comment">//   it under the terms of the GNU General Public License as published by</span>
<a name="l00021"></a>00021 <span class="comment">//   the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00022"></a>00022 <span class="comment">//   (at your option) any later version.</span>
<a name="l00023"></a>00023 <span class="comment">//</span>
<a name="l00024"></a>00024 <span class="comment">/****************************************************************************/</span>
<a name="l00025"></a>00025 <span class="comment">// ===========================================================================</span>
<a name="l00026"></a>00026 <span class="comment">// included modules</span>
<a name="l00027"></a>00027 <span class="comment">// ===========================================================================</span>
<a name="l00028"></a>00028 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="../../d3/d99/windows__config_8h.html">windows_config.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#else</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="../../db/d16/config_8h.html">config.h</a>&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#endif</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/d33/_n_l_handler_8h.html">NLHandler.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/de6/_n_l_edge_control_builder_8h.html">NLEdgeControlBuilder.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc5/_n_l_junction_control_builder_8h.html">NLJunctionControlBuilder.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dfa/_n_l_detector_builder_8h.html">NLDetectorBuilder.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/d00/_n_l_trigger_builder_8h.html">NLTriggerBuilder.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html">utils/xml/SUMOXMLDefinitions.h</a>&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="../../d2/d70/_s_u_m_o_s_a_x_handler_8h.html">utils/xml/SUMOSAXHandler.h</a>&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;<a class="code" href="../../d4/df7/_msg_handler_8h.html">utils/common/MsgHandler.h</a>&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;<a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html">utils/common/SUMOTime.h</a>&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;<a class="code" href="../../de/d4a/_tpl_convert_8h.html">utils/common/TplConvert.h</a>&gt;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;<a class="code" href="../../d8/d6c/_tpl_convert_sec_8h.html">utils/common/TplConvertSec.h</a>&gt;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &lt;<a class="code" href="../../da/d8e/_string_tokenizer_8h.html">utils/common/StringTokenizer.h</a>&gt;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;<a class="code" href="../../d8/d99/_r_g_b_color_8h.html">utils/common/RGBColor.h</a>&gt;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &lt;<a class="code" href="../../db/dec/_geom_conv_helper_8h.html">utils/geom/GeomConvHelper.h</a>&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &lt;<a class="code" href="../../d6/dbe/_m_s_globals_8h.html">microsim/MSGlobals.h</a>&gt;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &lt;<a class="code" href="../../d3/d38/_m_s_lane_8h.html">microsim/MSLane.h</a>&gt;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;<a class="code" href="../../df/de9/_m_s_internal_lane_8h.html">microsim/MSInternalLane.h</a>&gt;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &lt;<a class="code" href="../../d0/d0b/_m_s_bit_set_logic_8h.html">microsim/MSBitSetLogic.h</a>&gt;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &lt;<a class="code" href="../../df/dc8/_m_s_junction_logic_8h.html">microsim/MSJunctionLogic.h</a>&gt;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &lt;<a class="code" href="../../de/d43/_m_s_traffic_light_logic_8h.html">microsim/traffic_lights/MSTrafficLightLogic.h</a>&gt;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &lt;<a class="code" href="../../d8/d51/_m_s_agentbased_traffic_light_logic_8h.html">microsim/traffic_lights/MSAgentbasedTrafficLightLogic.h</a>&gt;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &lt;<a class="code" href="../../d1/d3f/_output_device_8h.html">utils/iodevices/OutputDevice.h</a>&gt;</span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &lt;<a class="code" href="../../d7/db4/_util_exceptions_8h.html">utils/common/UtilExceptions.h</a>&gt;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &lt;<a class="code" href="../../d3/d6d/_geo_conv_helper_8h.html">utils/geom/GeoConvHelper.h</a>&gt;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &lt;<a class="code" href="../../d3/df9/_shape_container_8h.html">utils/shapes/ShapeContainer.h</a>&gt;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &lt;<a class="code" href="../../d2/d0d/_g_u_i_gl_object_8h.html">utils/gui/globjects/GUIGlObject.h</a>&gt;</span>
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="preprocessor">#ifdef CHECK_MEMORY_LEAKS</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="../../d7/d8d/debug__new_8h.html">foreign/nvwa/debug_new.h</a>&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#endif // CHECK_MEMORY_LEAKS</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a>00066 <span class="comment">// ===========================================================================</span>
<a name="l00067"></a>00067 <span class="comment">// method definitions</span>
<a name="l00068"></a>00068 <span class="comment">// ===========================================================================</span>
<a name="l00069"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a9b586882e13e5c4667e43fc79d2843c5">00069</a> <a class="code" href="../../da/d57/class_n_l_handler.html#a9b586882e13e5c4667e43fc79d2843c5" title="Constructor.">NLHandler::NLHandler</a>(<span class="keyword">const</span> std::string&amp; file, <a class="code" href="../../dc/d5d/class_m_s_net.html" title="The simulated network and simulation perfomer.">MSNet</a>&amp; net,
<a name="l00070"></a>00070         <a class="code" href="../../dc/d12/class_n_l_detector_builder.html" title="Builds detectors for microsim.">NLDetectorBuilder</a>&amp; detBuilder, <a class="code" href="../../da/d2f/class_n_l_trigger_builder.html" title="Builds trigger objects for microsim.">NLTriggerBuilder</a>&amp; triggerBuilder,
<a name="l00071"></a>00071         <a class="code" href="../../d9/d96/class_n_l_edge_control_builder.html" title="Interface for building edges.">NLEdgeControlBuilder</a>&amp; edgeBuilder,
<a name="l00072"></a>00072         <a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html" title="Builder of microsim-junctions and tls.">NLJunctionControlBuilder</a>&amp; junctionBuilder) :
<a name="l00073"></a>00073         <a class="code" href="../../d7/df0/class_m_s_route_handler.html" title="Parser and container for routes during their loading.">MSRouteHandler</a>(file, true), myNet(net), myActionBuilder(net), myCurrentIsInternalToSkip(
<a name="l00074"></a>00074                 false), myDetectorBuilder(detBuilder), myTriggerBuilder(
<a name="l00075"></a>00075                 triggerBuilder), myEdgeControlBuilder(edgeBuilder), myJunctionControlBuilder(
<a name="l00076"></a>00076                 junctionBuilder), mySucceedingLaneBuilder(junctionBuilder), myAmInTLLogicMode(
<a name="l00077"></a>00077                 false), myCurrentIsBroken(false), myHaveWarnedAboutDeprecatedE1(
<a name="l00078"></a>00078                 false), myHaveWarnedAboutDeprecatedE2(false), myHaveWarnedAboutDeprecatedE3(
<a name="l00079"></a>00079                 false), myHaveWarnedAboutDeprecatedDetEntry(false), myHaveWarnedAboutDeprecatedDetExit(
<a name="l00080"></a>00080                 false), myHaveWarnedAboutDeprecatedRowLogic(false), myHaveWarnedAboutDeprecatedTLLogic(
<a name="l00081"></a>00081                 false), myHaveWarnedAboutDeprecatedTimedEvent(false), myHaveWarnedAboutDeprecatedTLSTiming(
<a name="l00082"></a>00082                 false), myHaveWarnedAboutDeprecatedTimeThreshold(false), myHaveWarnedAboutDeprecatedSpeedThreshold(
<a name="l00083"></a>00083                 false), myHaveWarnedAboutDeprecatedJamDistThreshold(false), myHaveWarnedAboutDeprecatedVTypeProbe(
<a name="l00084"></a>00084                 false), myHaveWarnedAboutDeprecatedRouteProbe(false), myHaveWarnedAboutDeprecatedEdgeMean(
<a name="l00085"></a>00085                 false), myHaveWarnedAboutDeprecatedLaneMean(false), myHaveWarnedAboutDeprecatedVTypes(
<a name="l00086"></a>00086                 false), myHaveWarnedAboutDeprecatedLanes(false), myHaveWarnedAboutDeprecatedDistrict(
<a name="l00087"></a>00087                 false), myHaveWarnedAboutDeprecatedDSource(false), myHaveWarnedAboutDeprecatedDSink(
<a name="l00088"></a>00088                 false) {
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 
<a name="l00091"></a><a class="code" href="../../da/d57/class_n_l_handler.html#acee81a30f2fb49bce30570103c7f3d0a">00091</a> <a class="code" href="../../da/d57/class_n_l_handler.html#acee81a30f2fb49bce30570103c7f3d0a" title="Destructor.">NLHandler::~NLHandler</a>() {
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a><a class="code" href="../../da/d57/class_n_l_handler.html#aaa55d70cbc8eebbc43c5fb084b30b42c">00094</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#aaa55d70cbc8eebbc43c5fb084b30b42c" title="Called on the opening of a tag;.">NLHandler::myStartElement</a>(<span class="keywordtype">int</span> element, <span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00095"></a>00095     <span class="keywordflow">try</span> {
<a name="l00096"></a>00096         <span class="keywordflow">switch</span> (element) {
<a name="l00097"></a>00097         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bafe94cd84d202759ab3c8e54e20d56915">SUMO_TAG_EDGE</a>:
<a name="l00098"></a>00098             <a class="code" href="../../da/d57/class_n_l_handler.html#a2d7b1eb1923d72e9ed4cf09f3a393df3" title="begins the processing of an edge">beginEdgeParsing</a>(attrs);
<a name="l00099"></a>00099             <span class="keywordflow">break</span>;
<a name="l00100"></a>00100         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baa8ecef693db3636662cdb053cda533c2">SUMO_TAG_LANE</a>:
<a name="l00101"></a>00101             <a class="code" href="../../da/d57/class_n_l_handler.html#a5cef85f7e689bf57dea51fb11deb2b2a" title="adds a lane to the previously opened edge">addLane</a>(attrs);
<a name="l00102"></a>00102             <span class="keywordflow">break</span>;
<a name="l00103"></a>00103         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba98ca63dfcff56240826eb3a4e2e6023e">SUMO_TAG_POLY</a>:
<a name="l00104"></a>00104             <a class="code" href="../../da/d57/class_n_l_handler.html#a8071df406188fdd66b87aeb95f092639" title="adds a polygon">addPoly</a>(attrs);
<a name="l00105"></a>00105             <span class="keywordflow">break</span>;
<a name="l00106"></a>00106         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba4672ea23ab0f4677beaddcec29b97d3e">SUMO_TAG_POI</a>:
<a name="l00107"></a>00107             <a class="code" href="../../da/d57/class_n_l_handler.html#ac403d0dc45ad9ca4c31c0d8a5e2ee82d" title="adds a polygon">addPOI</a>(attrs);
<a name="l00108"></a>00108             <span class="keywordflow">break</span>;
<a name="l00109"></a>00109         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba8d82324e4d926b912192507fb6f1fa08">SUMO_TAG_JUNCTION</a>:
<a name="l00110"></a>00110             <a class="code" href="../../da/d57/class_n_l_handler.html#a7fbf053174f7ba26e9c6bdc01c7c4971" title="opens a junction for processing">openJunction</a>(attrs);
<a name="l00111"></a>00111             <a class="code" href="../../da/d57/class_n_l_handler.html#a5d9e8633c01fc932256bae35212dcf51" title="begins the reading of a junction row logic">initJunctionLogic</a>(attrs);
<a name="l00112"></a>00112             <span class="keywordflow">break</span>;
<a name="l00113"></a>00113         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba01c296a31fa6b3b2685c5acd5b85e527">SUMO_TAG_PHASE</a>:
<a name="l00114"></a>00114             <a class="code" href="../../da/d57/class_n_l_handler.html#a40e24ab9a201181118459111ef1c2541" title="adds a phase to the traffic lights logic currently build">addPhase</a>(attrs);
<a name="l00115"></a>00115             <span class="keywordflow">break</span>;
<a name="l00116"></a>00116         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba2b183191810bce038f3ae06c08949627">SUMO_TAG_SUCC</a>:
<a name="l00117"></a>00117             <a class="code" href="../../da/d57/class_n_l_handler.html#a9e555153c4573186a23ee00388b70af2" title="opens the container of succeeding lanes for processing (deprecated, see addConnection))...">openSucc</a>(attrs);
<a name="l00118"></a>00118             <span class="keywordflow">break</span>;
<a name="l00119"></a>00119         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baa67b436f503b71f52d5aeeb3f6ad2c9d">SUMO_TAG_SUCCLANE</a>:
<a name="l00120"></a>00120             <a class="code" href="../../da/d57/class_n_l_handler.html#ae600ce9af72d281890bb8210d66befc6" title="adds a succeeding lane (deprecated, see addConnection)">addSuccLane</a>(attrs);
<a name="l00121"></a>00121             <span class="keywordflow">break</span>;
<a name="l00122"></a>00122         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba7313e25ec6237101c30558af74cb8666">SUMO_TAG_CONNECTION</a>:
<a name="l00123"></a>00123             <a class="code" href="../../da/d57/class_n_l_handler.html#afb303581761c6bebdb10048728e232e5" title="adds a connection">addConnection</a>(attrs);
<a name="l00124"></a>00124             <span class="keywordflow">break</span>;
<a name="l00125"></a>00125         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba15959509cef1b89b1543c989e1bd7af9">SUMO_TAG_ROWLOGIC__DEPRECATED</a>:
<a name="l00126"></a>00126             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a272e7317297d96e4f0ae37da641a6e4a">myHaveWarnedAboutDeprecatedRowLogic</a>) {
<a name="l00127"></a>00127                 <a class="code" href="../../da/d57/class_n_l_handler.html#a272e7317297d96e4f0ae37da641a6e4a">myHaveWarnedAboutDeprecatedRowLogic</a> = <span class="keyword">true</span>;
<a name="l00128"></a>00128                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00129"></a>00129                         <span class="stringliteral">&quot;Your network uses deprecated tags; please rebuild.&quot;</span>);
<a name="l00130"></a>00130             }
<a name="l00131"></a>00131             <a class="code" href="../../da/d57/class_n_l_handler.html#a5d9e8633c01fc932256bae35212dcf51" title="begins the reading of a junction row logic">initJunctionLogic</a>(attrs);
<a name="l00132"></a>00132             <span class="keywordflow">break</span>;
<a name="l00133"></a>00133         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9c509d75711695e276352bf360d2f310">SUMO_TAG_TLLOGIC__DEPRECATED</a>:
<a name="l00134"></a>00134             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#adaf81f7d87947b910420973261198766">myHaveWarnedAboutDeprecatedTLLogic</a>) {
<a name="l00135"></a>00135                 <a class="code" href="../../da/d57/class_n_l_handler.html#adaf81f7d87947b910420973261198766">myHaveWarnedAboutDeprecatedTLLogic</a> = <span class="keyword">true</span>;
<a name="l00136"></a>00136                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(<span class="stringliteral">&quot;Deprecated tl-logic name; please rebuild.&quot;</span>);
<a name="l00137"></a>00137             }
<a name="l00138"></a>00138         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba845d18614457c4a4c6ba775f787879f6">SUMO_TAG_TLLOGIC</a>:
<a name="l00139"></a>00139             <a class="code" href="../../da/d57/class_n_l_handler.html#a9284c6cce1bfdb7f168cca864af30cca" title="begins the reading of a traffic lights logic">initTrafficLightLogic</a>(attrs);
<a name="l00140"></a>00140             <span class="keywordflow">break</span>;
<a name="l00141"></a>00141         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba5a408f97c2c7efd2060204d211cf101f">SUMO_TAG_LOGICITEM</a>: <span class="comment">// deprecated</span>
<a name="l00142"></a>00142             <a class="code" href="../../da/d57/class_n_l_handler.html#a65e4562c53771eeb6166ab9889a619fa" title="(deprecated) adds a logic item to the current logic">addLogicItem</a>(attrs);
<a name="l00143"></a>00143             <span class="keywordflow">break</span>;
<a name="l00144"></a>00144         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba1dd7aaccc58647807a7bd74081084e6f">SUMO_TAG_REQUEST</a>:
<a name="l00145"></a>00145             <a class="code" href="../../da/d57/class_n_l_handler.html#a05837f5223a8b4d724f1d47ce1b55ca5" title="adds a request item to the current junction logic">addRequest</a>(attrs);
<a name="l00146"></a>00146             <span class="keywordflow">break</span>;
<a name="l00147"></a>00147         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bacab7f1bdb5b6a05e64df2fcd7428e995">SUMO_TAG_WAUT</a>:
<a name="l00148"></a>00148             <a class="code" href="../../da/d57/class_n_l_handler.html#ab4fa02d085e032148a70aecb7a2693e1">openWAUT</a>(attrs);
<a name="l00149"></a>00149             <span class="keywordflow">break</span>;
<a name="l00150"></a>00150         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba1e913bc75a23589be89d136c158bdc3e">SUMO_TAG_WAUT_SWITCH</a>:
<a name="l00151"></a>00151             <a class="code" href="../../da/d57/class_n_l_handler.html#a2429db6194a45f8b6ad08a0618296c7d">addWAUTSwitch</a>(attrs);
<a name="l00152"></a>00152             <span class="keywordflow">break</span>;
<a name="l00153"></a>00153         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba1d9b96c4c4a10067e8adb50789e0dce1">SUMO_TAG_WAUT_JUNCTION</a>:
<a name="l00154"></a>00154             <a class="code" href="../../da/d57/class_n_l_handler.html#af02587243ab00fc801107745681cbbd0">addWAUTJunction</a>(attrs);
<a name="l00155"></a>00155             <span class="keywordflow">break</span>;
<a name="l00156"></a>00156 <span class="preprocessor">#ifdef _MESSAGES</span>
<a name="l00157"></a>00157 <span class="preprocessor"></span>            <span class="keywordflow">case</span> SUMO_TAG_MSG_EMITTER:
<a name="l00158"></a>00158             addMsgEmitter(attrs);
<a name="l00159"></a>00159             <span class="keywordflow">break</span>;
<a name="l00160"></a>00160 <span class="preprocessor">#endif</span>
<a name="l00161"></a>00161 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baf11a690071aa5b15f8740a8ed3480a12">SUMO_TAG_E1DETECTOR__DEPRECATED</a>:
<a name="l00162"></a>00162             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#ad5501cf01c22d2f4913a1574e49d7258">myHaveWarnedAboutDeprecatedE1</a>) {
<a name="l00163"></a>00163                 <a class="code" href="../../da/d57/class_n_l_handler.html#ad5501cf01c22d2f4913a1574e49d7258">myHaveWarnedAboutDeprecatedE1</a> = <span class="keyword">true</span>;
<a name="l00164"></a>00164                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00165"></a>00165                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baf11a690071aa5b15f8740a8ed3480a12">SUMO_TAG_E1DETECTOR__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bab7906ee0d00916119008af4584f1b537">SUMO_TAG_E1DETECTOR</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00166"></a>00166             }
<a name="l00167"></a>00167         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bab7906ee0d00916119008af4584f1b537">SUMO_TAG_E1DETECTOR</a>:
<a name="l00168"></a>00168         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bae7ad4a2b32a7ea7a48dcaf1cce21b585">SUMO_TAG_INDUCTION_LOOP</a>:
<a name="l00169"></a>00169             <a class="code" href="../../da/d57/class_n_l_handler.html#ac74675fae99fea4b2d68346110ef2532" title="Builds an e1 detector using the given specification.">addE1Detector</a>(attrs);
<a name="l00170"></a>00170             <span class="keywordflow">break</span>;
<a name="l00171"></a>00171         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba6c943f41c5e9410585f396718bd9e76b">SUMO_TAG_E2DETECTOR__DEPRECATED</a>:
<a name="l00172"></a>00172             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a844fc1378102c0d69a16006db038927e">myHaveWarnedAboutDeprecatedE2</a>) {
<a name="l00173"></a>00173                 <a class="code" href="../../da/d57/class_n_l_handler.html#a844fc1378102c0d69a16006db038927e">myHaveWarnedAboutDeprecatedE2</a> = <span class="keyword">true</span>;
<a name="l00174"></a>00174                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00175"></a>00175                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba6c943f41c5e9410585f396718bd9e76b">SUMO_TAG_E2DETECTOR__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba299502676dee4767ab515f98d10ede05">SUMO_TAG_E2DETECTOR</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00176"></a>00176             }
<a name="l00177"></a>00177         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba299502676dee4767ab515f98d10ede05">SUMO_TAG_E2DETECTOR</a>:
<a name="l00178"></a>00178         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bac70e82716f26fd807633a13b7d21e237">SUMO_TAG_LANE_AREA_DETECTOR</a>:
<a name="l00179"></a>00179             <a class="code" href="../../da/d57/class_n_l_handler.html#a1963f7161920d4d6bdd6984fb7df358f" title="Builds an e2 detector using the given specification.">addE2Detector</a>(attrs);
<a name="l00180"></a>00180             <span class="keywordflow">break</span>;
<a name="l00181"></a>00181         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba6a26950f02e521668eccbe89c1979bee">SUMO_TAG_E3DETECTOR__DEPRECATED</a>:
<a name="l00182"></a>00182             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a56390b50a69320fe3be1bd8c19a34cfc">myHaveWarnedAboutDeprecatedE3</a>) {
<a name="l00183"></a>00183                 <a class="code" href="../../da/d57/class_n_l_handler.html#a56390b50a69320fe3be1bd8c19a34cfc">myHaveWarnedAboutDeprecatedE3</a> = <span class="keyword">true</span>;
<a name="l00184"></a>00184                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00185"></a>00185                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba6a26950f02e521668eccbe89c1979bee">SUMO_TAG_E3DETECTOR__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baf4d6a8c0ce4b3c7758b8651865ae5f57">SUMO_TAG_E3DETECTOR</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00186"></a>00186             }
<a name="l00187"></a>00187         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baf4d6a8c0ce4b3c7758b8651865ae5f57">SUMO_TAG_E3DETECTOR</a>:
<a name="l00188"></a>00188         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baf282e5150ef9e33d94aa5add8fc2c9f8">SUMO_TAG_ENTRY_EXIT_DETECTOR</a>:
<a name="l00189"></a>00189             <a class="code" href="../../da/d57/class_n_l_handler.html#ad5cc7f3345a10f29d9184934cbeb5128" title="Starts building of an e3 detector using the given specification.">beginE3Detector</a>(attrs);
<a name="l00190"></a>00190             <span class="keywordflow">break</span>;
<a name="l00191"></a>00191         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bad425f04ffef1c7a53e991685b950db60">SUMO_TAG_DET_ENTRY__DEPRECATED</a>:
<a name="l00192"></a>00192             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a77d963c670ce023608e43d32ced8adf3">myHaveWarnedAboutDeprecatedDetEntry</a>) {
<a name="l00193"></a>00193                 <a class="code" href="../../da/d57/class_n_l_handler.html#a77d963c670ce023608e43d32ced8adf3">myHaveWarnedAboutDeprecatedDetEntry</a> = <span class="keyword">true</span>;
<a name="l00194"></a>00194                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00195"></a>00195                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bad425f04ffef1c7a53e991685b950db60">SUMO_TAG_DET_ENTRY__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba8016e73fd698889d126798fdf2da5fb0">SUMO_TAG_DET_ENTRY</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00196"></a>00196             }
<a name="l00197"></a>00197         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba8016e73fd698889d126798fdf2da5fb0">SUMO_TAG_DET_ENTRY</a>:
<a name="l00198"></a>00198             <a class="code" href="../../da/d57/class_n_l_handler.html#a2aeabca6e73d3e23b0987d5653b4b001" title="Adds an entry to the currently processed e3 detector.">addE3Entry</a>(attrs);
<a name="l00199"></a>00199             <span class="keywordflow">break</span>;
<a name="l00200"></a>00200         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bac1e939ef12fca0a61fa47b566144b1cb">SUMO_TAG_DET_EXIT__DEPRECATED</a>:
<a name="l00201"></a>00201             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a284899464d2fe17cc23019f495145046">myHaveWarnedAboutDeprecatedDetExit</a>) {
<a name="l00202"></a>00202                 <a class="code" href="../../da/d57/class_n_l_handler.html#a284899464d2fe17cc23019f495145046">myHaveWarnedAboutDeprecatedDetExit</a> = <span class="keyword">true</span>;
<a name="l00203"></a>00203                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00204"></a>00204                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bac1e939ef12fca0a61fa47b566144b1cb">SUMO_TAG_DET_EXIT__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bac123c3bd60e453a6a9c47ff1632f3bb7">SUMO_TAG_DET_EXIT</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00205"></a>00205             }
<a name="l00206"></a>00206         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bac123c3bd60e453a6a9c47ff1632f3bb7">SUMO_TAG_DET_EXIT</a>:
<a name="l00207"></a>00207             <a class="code" href="../../da/d57/class_n_l_handler.html#ad2b499413c7d71025b32f9ad553c0e74" title="Adds an exit to the currently processed e3 detector.">addE3Exit</a>(attrs);
<a name="l00208"></a>00208             <span class="keywordflow">break</span>;
<a name="l00209"></a>00209         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baaa28426a492ae795bb0f5fe7d7f65d6d" title="An instantenous induction loop.">SUMO_TAG_INSTANT_INDUCTION_LOOP</a>:
<a name="l00210"></a>00210             <a class="code" href="../../da/d57/class_n_l_handler.html#a787be0445ddd7518478db12194fb943f" title="Builds an e1 detector using the given specification.">addInstantE1Detector</a>(attrs);
<a name="l00211"></a>00211             <span class="keywordflow">break</span>;
<a name="l00212"></a>00212         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baf5f961c6dbce17232078712e526d352a" title="A variable speed sign.">SUMO_TAG_VSS</a>:
<a name="l00213"></a>00213             <a class="code" href="../../da/d57/class_n_l_handler.html#a7557f074c7d6212ba887a42af3344148" title="The trigger builder to use.">myTriggerBuilder</a>.<a class="code" href="../../da/d2f/class_n_l_trigger_builder.html#a5a9126e2c537d43d1506db88ad3e12a1" title="Parses his values and builds a lane speed trigger.">parseAndBuildLaneSpeedTrigger</a>(<a class="code" href="../../da/d57/class_n_l_handler.html#ae4ae1bedba27b61260a425609c71177d" title="The net to fill (preinitialised).">myNet</a>, attrs,
<a name="l00214"></a>00214                     <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>());
<a name="l00215"></a>00215             <span class="keywordflow">break</span>;
<a name="l00216"></a>00216 <span class="preprocessor">#ifdef HAVE_MESOSIM</span>
<a name="l00217"></a>00217 <span class="preprocessor"></span>            <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baf0c574fdc8713b0ba7e259d20ec44c17" title="A calibrator.">SUMO_TAG_CALIBRATOR</a>:
<a name="l00218"></a>00218             <a class="code" href="../../da/d57/class_n_l_handler.html#a7557f074c7d6212ba887a42af3344148" title="The trigger builder to use.">myTriggerBuilder</a>.parseAndBuildCalibrator(<a class="code" href="../../da/d57/class_n_l_handler.html#ae4ae1bedba27b61260a425609c71177d" title="The net to fill (preinitialised).">myNet</a>, attrs, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>());
<a name="l00219"></a>00219             <span class="keywordflow">break</span>;
<a name="l00220"></a>00220 <span class="preprocessor">#endif</span>
<a name="l00221"></a>00221 <span class="preprocessor"></span>        <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba175d2cfe1d774a6a89893cd0474bb382" title="A rerouter.">SUMO_TAG_REROUTER</a>:
<a name="l00222"></a>00222             <a class="code" href="../../da/d57/class_n_l_handler.html#a7557f074c7d6212ba887a42af3344148" title="The trigger builder to use.">myTriggerBuilder</a>.<a class="code" href="../../da/d2f/class_n_l_trigger_builder.html#abb2ec9afaf3679333b271b03a23d30d3" title="Parses his values and builds a rerouter.">parseAndBuildRerouter</a>(<a class="code" href="../../da/d57/class_n_l_handler.html#ae4ae1bedba27b61260a425609c71177d" title="The net to fill (preinitialised).">myNet</a>, attrs, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>());
<a name="l00223"></a>00223             <span class="keywordflow">break</span>;
<a name="l00224"></a>00224         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba4610734d0d23d07f8996ff7d887bc130" title="A bus stop.">SUMO_TAG_BUS_STOP</a>:
<a name="l00225"></a>00225             <a class="code" href="../../da/d57/class_n_l_handler.html#a7557f074c7d6212ba887a42af3344148" title="The trigger builder to use.">myTriggerBuilder</a>.<a class="code" href="../../da/d2f/class_n_l_trigger_builder.html#a719e12a2cfb14ad2de647178d1a2030e" title="Parses his values and builds a bus stop.">parseAndBuildBusStop</a>(<a class="code" href="../../da/d57/class_n_l_handler.html#ae4ae1bedba27b61260a425609c71177d" title="The net to fill (preinitialised).">myNet</a>, attrs);
<a name="l00226"></a>00226             <span class="keywordflow">break</span>;
<a name="l00227"></a>00227         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bad878fbe3ed4ca44e5916037e4ab3e8e2">SUMO_TAG_VTYPEPROBE__DEPRECATED</a>:
<a name="l00228"></a>00228             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a6f28f006b380dd1dfb68ef920139132d">myHaveWarnedAboutDeprecatedVTypeProbe</a>) {
<a name="l00229"></a>00229                 <a class="code" href="../../da/d57/class_n_l_handler.html#a6f28f006b380dd1dfb68ef920139132d">myHaveWarnedAboutDeprecatedVTypeProbe</a> = <span class="keyword">true</span>;
<a name="l00230"></a>00230                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00231"></a>00231                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bad878fbe3ed4ca44e5916037e4ab3e8e2">SUMO_TAG_VTYPEPROBE__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9d0dcf8bea14820251504de208a5bd8d">SUMO_TAG_VTYPEPROBE</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00232"></a>00232             }
<a name="l00233"></a>00233         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9d0dcf8bea14820251504de208a5bd8d">SUMO_TAG_VTYPEPROBE</a>:
<a name="l00234"></a>00234             <a class="code" href="../../da/d57/class_n_l_handler.html#a4f4426c1381ef11f45bdf54a5e5d130a" title="Builds a vtype-detector using the given specification.">addVTypeProbeDetector</a>(attrs);
<a name="l00235"></a>00235             <span class="keywordflow">break</span>;
<a name="l00236"></a>00236         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba3f008fd0916190b1db8fa385b5d5d466">SUMO_TAG_ROUTEPROBE__DEPRECATED</a>:
<a name="l00237"></a>00237             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a746c0f4e6a4cd444cbaf8468ca3b2873">myHaveWarnedAboutDeprecatedRouteProbe</a>) {
<a name="l00238"></a>00238                 <a class="code" href="../../da/d57/class_n_l_handler.html#a746c0f4e6a4cd444cbaf8468ca3b2873">myHaveWarnedAboutDeprecatedRouteProbe</a> = <span class="keyword">true</span>;
<a name="l00239"></a>00239                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00240"></a>00240                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba3f008fd0916190b1db8fa385b5d5d466">SUMO_TAG_ROUTEPROBE__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba20031848d3ac8cac44b4c021f1463072">SUMO_TAG_ROUTEPROBE</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00241"></a>00241             }
<a name="l00242"></a>00242         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba20031848d3ac8cac44b4c021f1463072">SUMO_TAG_ROUTEPROBE</a>:
<a name="l00243"></a>00243             <a class="code" href="../../da/d57/class_n_l_handler.html#af1ab26b10d9bd21779ac2fbd9ef7a8f8" title="Builds a routeprobe-detector using the given specification.">addRouteProbeDetector</a>(attrs);
<a name="l00244"></a>00244             <span class="keywordflow">break</span>;
<a name="l00245"></a>00245         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba84d15781e779ca2b10a88792b4271815">SUMO_TAG_MEANDATA_EDGE__DEPRECATED</a>:
<a name="l00246"></a>00246             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a43f31645828ae9cf619460fe584a9937">myHaveWarnedAboutDeprecatedEdgeMean</a>) {
<a name="l00247"></a>00247                 <a class="code" href="../../da/d57/class_n_l_handler.html#a43f31645828ae9cf619460fe584a9937">myHaveWarnedAboutDeprecatedEdgeMean</a> = <span class="keyword">true</span>;
<a name="l00248"></a>00248                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00249"></a>00249                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba84d15781e779ca2b10a88792b4271815">SUMO_TAG_MEANDATA_EDGE__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba97b6bc8379e1e056326ccc1fef990704">SUMO_TAG_MEANDATA_EDGE</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00250"></a>00250             }
<a name="l00251"></a>00251         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba97b6bc8379e1e056326ccc1fef990704">SUMO_TAG_MEANDATA_EDGE</a>:
<a name="l00252"></a>00252             <a class="code" href="../../da/d57/class_n_l_handler.html#af270a2c5b22fe8a3e02e65305e7e30ef" title="Builds edge or lane base mean data collector using the given specification.">addEdgeLaneMeanData</a>(attrs, <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba97b6bc8379e1e056326ccc1fef990704">SUMO_TAG_MEANDATA_EDGE</a>);
<a name="l00253"></a>00253             <span class="keywordflow">break</span>;
<a name="l00254"></a>00254         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bad810875cf2a8dfe4c1fc3117d35eb50b">SUMO_TAG_MEANDATA_LANE__DEPRECATED</a>:
<a name="l00255"></a>00255             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a21468b0bb12197aa018900d3984951c2">myHaveWarnedAboutDeprecatedLaneMean</a>) {
<a name="l00256"></a>00256                 <a class="code" href="../../da/d57/class_n_l_handler.html#a21468b0bb12197aa018900d3984951c2">myHaveWarnedAboutDeprecatedLaneMean</a> = <span class="keyword">true</span>;
<a name="l00257"></a>00257                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00258"></a>00258                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bad810875cf2a8dfe4c1fc3117d35eb50b">SUMO_TAG_MEANDATA_LANE__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba503a1d667a41f182031d73936767bd7e">SUMO_TAG_MEANDATA_LANE</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00259"></a>00259             }
<a name="l00260"></a>00260         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba503a1d667a41f182031d73936767bd7e">SUMO_TAG_MEANDATA_LANE</a>:
<a name="l00261"></a>00261             <a class="code" href="../../da/d57/class_n_l_handler.html#af270a2c5b22fe8a3e02e65305e7e30ef" title="Builds edge or lane base mean data collector using the given specification.">addEdgeLaneMeanData</a>(attrs, <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba503a1d667a41f182031d73936767bd7e">SUMO_TAG_MEANDATA_LANE</a>);
<a name="l00262"></a>00262             <span class="keywordflow">break</span>;
<a name="l00263"></a>00263         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba2e749771b20368aad0445aeb583cb323" title="The definition of a periodic event.">SUMO_TAG_TIMEDEVENT__DEPRECATED</a>:
<a name="l00264"></a>00264             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#aebea91606ebcb4756f5e1bf5bf345c1a">myHaveWarnedAboutDeprecatedTimedEvent</a>) {
<a name="l00265"></a>00265                 <a class="code" href="../../da/d57/class_n_l_handler.html#aebea91606ebcb4756f5e1bf5bf345c1a">myHaveWarnedAboutDeprecatedTimedEvent</a> = <span class="keyword">true</span>;
<a name="l00266"></a>00266                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00267"></a>00267                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba2e749771b20368aad0445aeb583cb323" title="The definition of a periodic event.">SUMO_TAG_TIMEDEVENT__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba27cbaa8c88f88a31a930c859ef721d3f">SUMO_TAG_TIMEDEVENT</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00268"></a>00268             }
<a name="l00269"></a>00269         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba27cbaa8c88f88a31a930c859ef721d3f">SUMO_TAG_TIMEDEVENT</a>:
<a name="l00270"></a>00270             <a class="code" href="../../da/d57/class_n_l_handler.html#ac193eea082c221bc34d60b29ab3ca91a" title="A builder for object actions.">myActionBuilder</a>.<a class="code" href="../../d4/d6c/class_n_l_discrete_event_builder.html#a380a557f96593a5a8100c6aa6c758fcb" title="Builds an action and saves it for further use.">addAction</a>(attrs, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>());
<a name="l00271"></a>00271             <span class="keywordflow">break</span>;
<a name="l00272"></a>00272         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bac6400737319beebd8fd19b55fb14d688">SUMO_TAG_VAPORIZER</a>:
<a name="l00273"></a>00273             <a class="code" href="../../da/d57/class_n_l_handler.html#a7557f074c7d6212ba887a42af3344148" title="The trigger builder to use.">myTriggerBuilder</a>.<a class="code" href="../../da/d2f/class_n_l_trigger_builder.html#a801f22e978509169a4849a441b33db48" title="Builds a vaporization.">buildVaporizer</a>(attrs);
<a name="l00274"></a>00274             <span class="keywordflow">break</span>;
<a name="l00275"></a>00275         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba573241ba154db03f28d49f994f7056b5">SUMO_TAG_LOCATION</a>:
<a name="l00276"></a>00276             <a class="code" href="../../da/d57/class_n_l_handler.html#aa97f474706eaebc6e04191a75aa33659" title="Parses network location description.">setLocation</a>(attrs);
<a name="l00277"></a>00277             <span class="keywordflow">break</span>;
<a name="l00278"></a>00278         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403babd6ef7eb38492b8b1e2a88ae34ef2a2a">SUMO_TAG_DISTRICT__DEPRECATED</a>:
<a name="l00279"></a>00279             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a785ecbab165fe4a1dd720c72c20d1877">myHaveWarnedAboutDeprecatedDistrict</a>) {
<a name="l00280"></a>00280                 <a class="code" href="../../da/d57/class_n_l_handler.html#a785ecbab165fe4a1dd720c72c20d1877">myHaveWarnedAboutDeprecatedDistrict</a> = <span class="keyword">true</span>;
<a name="l00281"></a>00281                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00282"></a>00282                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403babd6ef7eb38492b8b1e2a88ae34ef2a2a">SUMO_TAG_DISTRICT__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated, please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba25b716a801d3e4e25a3e72a0e5d445cf">SUMO_TAG_TAZ</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00283"></a>00283             }
<a name="l00284"></a>00284         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba25b716a801d3e4e25a3e72a0e5d445cf">SUMO_TAG_TAZ</a>:
<a name="l00285"></a>00285             <a class="code" href="../../da/d57/class_n_l_handler.html#a852b068b4a61ed78a2c239a1d016a0de">addDistrict</a>(attrs);
<a name="l00286"></a>00286             <span class="keywordflow">break</span>;
<a name="l00287"></a>00287         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baffe231726a0dee92d52ea275fabea985">SUMO_TAG_DSOURCE__DEPRECATED</a>:
<a name="l00288"></a>00288             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a02681f76a4d836f8a5c37b950177a16f">myHaveWarnedAboutDeprecatedDSource</a>) {
<a name="l00289"></a>00289                 <a class="code" href="../../da/d57/class_n_l_handler.html#a02681f76a4d836f8a5c37b950177a16f">myHaveWarnedAboutDeprecatedDSource</a> = <span class="keyword">true</span>;
<a name="l00290"></a>00290                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00291"></a>00291                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baffe231726a0dee92d52ea275fabea985">SUMO_TAG_DSOURCE__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated, please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bada59903faeac80b1d1e55777a8ae8261">SUMO_TAG_TAZSOURCE</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00292"></a>00292             }
<a name="l00293"></a>00293         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bada59903faeac80b1d1e55777a8ae8261">SUMO_TAG_TAZSOURCE</a>:
<a name="l00294"></a>00294             <a class="code" href="../../da/d57/class_n_l_handler.html#a5121da0fb3ee8769156558ea54c90551">addDistrictEdge</a>(attrs, <span class="keyword">true</span>);
<a name="l00295"></a>00295             <span class="keywordflow">break</span>;
<a name="l00296"></a>00296         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bacb3d310f21a5d4ab8015f15101c2ea70">SUMO_TAG_DSINK__DEPRECATED</a>:
<a name="l00297"></a>00297             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#aae3129187066c0c6268caad6254b1a41">myHaveWarnedAboutDeprecatedDSink</a>) {
<a name="l00298"></a>00298                 <a class="code" href="../../da/d57/class_n_l_handler.html#aae3129187066c0c6268caad6254b1a41">myHaveWarnedAboutDeprecatedDSink</a> = <span class="keyword">true</span>;
<a name="l00299"></a>00299                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00300"></a>00300                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bacb3d310f21a5d4ab8015f15101c2ea70">SUMO_TAG_DSINK__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated, please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba40887dbe198b73723987a0d110b609fd">SUMO_TAG_TAZSINK</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00301"></a>00301             }
<a name="l00302"></a>00302         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba40887dbe198b73723987a0d110b609fd">SUMO_TAG_TAZSINK</a>:
<a name="l00303"></a>00303             <a class="code" href="../../da/d57/class_n_l_handler.html#a5121da0fb3ee8769156558ea54c90551">addDistrictEdge</a>(attrs, <span class="keyword">false</span>);
<a name="l00304"></a>00304             <span class="keywordflow">break</span>;
<a name="l00305"></a>00305         <span class="keywordflow">default</span>:
<a name="l00306"></a>00306             <span class="keywordflow">break</span>;
<a name="l00307"></a>00307         }
<a name="l00308"></a>00308     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00309"></a>00309         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00310"></a>00310     }
<a name="l00311"></a>00311     <a class="code" href="../../da/d57/class_n_l_handler.html#aaa55d70cbc8eebbc43c5fb084b30b42c" title="Called on the opening of a tag;.">MSRouteHandler::myStartElement</a>(element, attrs);
<a name="l00312"></a>00312     <span class="keywordflow">if</span> (element == <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bab74a79037d1692130baa1d3e00093f12">SUMO_TAG_PARAM</a>) {
<a name="l00313"></a>00313         <a class="code" href="../../da/d57/class_n_l_handler.html#af899bb912b67511484921aea9577d78c">addParam</a>(attrs);
<a name="l00314"></a>00314     }
<a name="l00315"></a>00315 }
<a name="l00316"></a>00316 
<a name="l00317"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a6f800f46e981572ec39e97b158a44aa8">00317</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a6f800f46e981572ec39e97b158a44aa8" title="Called when a closing tag occurs.">NLHandler::myEndElement</a>(<span class="keywordtype">int</span> element) {
<a name="l00318"></a>00318     <span class="keywordflow">switch</span> (element) {
<a name="l00319"></a>00319     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bafe94cd84d202759ab3c8e54e20d56915">SUMO_TAG_EDGE</a>:
<a name="l00320"></a>00320         <a class="code" href="../../da/d57/class_n_l_handler.html#ad691051e858c66d28e5b2d0c2018d123" title="Closes the process of building an edge.">closeEdge</a>();
<a name="l00321"></a>00321         <span class="keywordflow">break</span>;
<a name="l00322"></a>00322     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba8d82324e4d926b912192507fb6f1fa08">SUMO_TAG_JUNCTION</a>:
<a name="l00323"></a>00323         <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l00324"></a>00324             <span class="keywordflow">try</span> {
<a name="l00325"></a>00325                 <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a0f80cdaef6e1ec3fc69bd8c8e2cb0835" title="Ends the building of a junction logic (row-logic).">closeJunctionLogic</a>();
<a name="l00326"></a>00326                 <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#abdd5b4714245ce43933bdeee930005e6" title="Closes (ends) the processing of the current junction.">closeJunction</a>();
<a name="l00327"></a>00327             } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00328"></a>00328                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00329"></a>00329             }
<a name="l00330"></a>00330         }
<a name="l00331"></a>00331         <span class="keywordflow">break</span>;
<a name="l00332"></a>00332     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba2b183191810bce038f3ae06c08949627">SUMO_TAG_SUCC</a>:
<a name="l00333"></a>00333         <a class="code" href="../../da/d57/class_n_l_handler.html#a361692f405ebba2b07968ba7223fa5ba" title="closes the processing of a lane">closeSuccLane</a>();
<a name="l00334"></a>00334         <span class="keywordflow">break</span>;
<a name="l00335"></a>00335     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba15959509cef1b89b1543c989e1bd7af9">SUMO_TAG_ROWLOGIC__DEPRECATED</a>:
<a name="l00336"></a>00336         <span class="keywordflow">try</span> {
<a name="l00337"></a>00337             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a0f80cdaef6e1ec3fc69bd8c8e2cb0835" title="Ends the building of a junction logic (row-logic).">closeJunctionLogic</a>();
<a name="l00338"></a>00338         } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00339"></a>00339             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341         <span class="keywordflow">break</span>;
<a name="l00342"></a>00342     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9c509d75711695e276352bf360d2f310">SUMO_TAG_TLLOGIC__DEPRECATED</a>:
<a name="l00343"></a>00343     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba845d18614457c4a4c6ba775f787879f6">SUMO_TAG_TLLOGIC</a>:
<a name="l00344"></a>00344         <span class="keywordflow">try</span> {
<a name="l00345"></a>00345             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a6804c07e56b2ff2eae22f792fd6826ac" title="Ends the building of a traffic lights logic.">closeTrafficLightLogic</a>();
<a name="l00346"></a>00346         } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00347"></a>00347             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00348"></a>00348         }
<a name="l00349"></a>00349         <a class="code" href="../../da/d57/class_n_l_handler.html#ac35ce18de8d666141c1456f918e1d67d" title="internal information whether a tls-logic is currently read">myAmInTLLogicMode</a> = <span class="keyword">false</span>;
<a name="l00350"></a>00350         <span class="keywordflow">break</span>;
<a name="l00351"></a>00351     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403bacab7f1bdb5b6a05e64df2fcd7428e995">SUMO_TAG_WAUT</a>:
<a name="l00352"></a>00352         <a class="code" href="../../da/d57/class_n_l_handler.html#a94edca1ff9bbaabb76a981de905d9560">closeWAUT</a>();
<a name="l00353"></a>00353         <span class="keywordflow">break</span>;
<a name="l00354"></a>00354     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba6a26950f02e521668eccbe89c1979bee">SUMO_TAG_E3DETECTOR__DEPRECATED</a>:
<a name="l00355"></a>00355     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baf4d6a8c0ce4b3c7758b8651865ae5f57">SUMO_TAG_E3DETECTOR</a>:
<a name="l00356"></a>00356     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baf282e5150ef9e33d94aa5add8fc2c9f8">SUMO_TAG_ENTRY_EXIT_DETECTOR</a>:
<a name="l00357"></a>00357         <a class="code" href="../../da/d57/class_n_l_handler.html#a80036b73e5a32a5f1c85fdbdfa354fea" title="Builds of an e3 detector using collected values.">endE3Detector</a>();
<a name="l00358"></a>00358         <span class="keywordflow">break</span>;
<a name="l00359"></a>00359     <span class="keywordflow">default</span>:
<a name="l00360"></a>00360         <span class="keywordflow">break</span>;
<a name="l00361"></a>00361     }
<a name="l00362"></a>00362     <a class="code" href="../../da/d57/class_n_l_handler.html#a6f800f46e981572ec39e97b158a44aa8" title="Called when a closing tag occurs.">MSRouteHandler::myEndElement</a>(element);
<a name="l00363"></a>00363 }
<a name="l00364"></a>00364 
<a name="l00365"></a>00365 <span class="comment">// ---- the root/edge - element</span>
<a name="l00366"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a2d7b1eb1923d72e9ed4cf09f3a393df3">00366</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a2d7b1eb1923d72e9ed4cf09f3a393df3" title="begins the processing of an edge">NLHandler::beginEdgeParsing</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00367"></a>00367     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00368"></a>00368     <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">false</span>;
<a name="l00369"></a>00369     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l00370"></a>00370     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00371"></a>00371     <span class="keywordflow">if</span> (!ok) {
<a name="l00372"></a>00372         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00373"></a>00373         <span class="keywordflow">return</span>;
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375     <span class="comment">// omit internal edges if not wished</span>
<a name="l00376"></a>00376     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de7/class_m_s_globals.html#afab897d0ff315c0853f3dfad1b617d8a" title="Information whether the simulation regards internal lanes.">MSGlobals::gUsingInternalLanes</a> &amp;&amp; <span class="keywordtype">id</span>[0] == <span class="charliteral">&#39;:&#39;</span>) {
<a name="l00377"></a>00377         <a class="code" href="../../da/d57/class_n_l_handler.html#a860058d06347bed9cbcd5acb6c9eb6bd" title="Information whether the currently parsed edge is internal and not wished, here.">myCurrentIsInternalToSkip</a> = <span class="keyword">true</span>;
<a name="l00378"></a>00378         <span class="keywordflow">return</span>;
<a name="l00379"></a>00379     }
<a name="l00380"></a>00380     <a class="code" href="../../da/d57/class_n_l_handler.html#a860058d06347bed9cbcd5acb6c9eb6bd" title="Information whether the currently parsed edge is internal and not wished, here.">myCurrentIsInternalToSkip</a> = <span class="keyword">false</span>;
<a name="l00381"></a>00381     <span class="comment">// parse the function</span>
<a name="l00382"></a>00382     <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#aa6d3190d5e29fd0c18605ddea3e6ffa9" title="Numbers representing special SUMO-XML-attribute values for representing edge functions...">SumoXMLEdgeFunc</a> func = <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#aa6d3190d5e29fd0c18605ddea3e6ffa9ab4c055d573b9ee3fa983e3bd04941de2">EDGEFUNC_NORMAL</a>;
<a name="l00383"></a>00383     std::string funcString = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ad81674222fb5a2b7482600a35ba5490f">SUMO_ATTR_FUNCTION</a>,
<a name="l00384"></a>00384             <span class="keywordtype">id</span>.c_str(), ok, <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(func));
<a name="l00385"></a>00385     <span class="keywordflow">if</span> (!ok) {
<a name="l00386"></a>00386         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00387"></a>00387         <span class="keywordflow">return</span>;
<a name="l00388"></a>00388     }
<a name="l00389"></a>00389     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d5a/class_s_u_m_o_x_m_l_definitions.html#a83abf1426b76a4cc65ed73d8a87ff139">SUMOXMLDefinitions::EdgeFunctions</a>.hasString(funcString)) {
<a name="l00390"></a>00390         func = <a class="code" href="../../d1/d5a/class_s_u_m_o_x_m_l_definitions.html#a83abf1426b76a4cc65ed73d8a87ff139">SUMOXMLDefinitions::EdgeFunctions</a>.<a class="code" href="../../d5/d41/class_string_bijection.html#a04ecd30500893639fd2c05722c09f7a4">get</a>(funcString);
<a name="l00391"></a>00391     } <span class="keywordflow">else</span> {
<a name="l00392"></a>00392         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l00393"></a>00393                 <span class="stringliteral">&quot;Edge &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; has an invalid type (&#39;&quot;</span> + funcString + <span class="stringliteral">&quot;&#39;).&quot;</span>);
<a name="l00394"></a>00394         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00395"></a>00395         <span class="keywordflow">return</span>;
<a name="l00396"></a>00396     }
<a name="l00397"></a>00397     <span class="comment">// interpret the function</span>
<a name="l00398"></a>00398     <a class="code" href="../../d7/d27/class_m_s_edge.html#a075fc93ccf4dc6ad26f654b7a2b30f5e" title="Defines possible edge types.">MSEdge::EdgeBasicFunction</a> funcEnum = <a class="code" href="../../d7/d27/class_m_s_edge.html#a075fc93ccf4dc6ad26f654b7a2b30f5eae53ec2640a15ea31e7b274e8c5ff14ed" title="The purpose of the edge is not known.">MSEdge::EDGEFUNCTION_UNKNOWN</a>;
<a name="l00399"></a>00399     <span class="keywordflow">switch</span> (func) {
<a name="l00400"></a>00400     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#aa6d3190d5e29fd0c18605ddea3e6ffa9ab4c055d573b9ee3fa983e3bd04941de2">EDGEFUNC_NORMAL</a>:
<a name="l00401"></a>00401         funcEnum = <a class="code" href="../../d7/d27/class_m_s_edge.html#a075fc93ccf4dc6ad26f654b7a2b30f5ea035927d2b301b3d673ae0fe4bc943824" title="The edge is a normal street.">MSEdge::EDGEFUNCTION_NORMAL</a>;
<a name="l00402"></a>00402         <span class="keywordflow">break</span>;
<a name="l00403"></a>00403     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#aa6d3190d5e29fd0c18605ddea3e6ffa9a0b929093bfafb5a615a6d683843ab770">EDGEFUNC_CONNECTOR</a>:
<a name="l00404"></a>00404     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#aa6d3190d5e29fd0c18605ddea3e6ffa9a4bfc353adbe2fddc9fc8965f95859843">EDGEFUNC_SINK</a>:
<a name="l00405"></a>00405     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#aa6d3190d5e29fd0c18605ddea3e6ffa9aac09fa93e22142fb122e366f809acee1">EDGEFUNC_SOURCE</a>:
<a name="l00406"></a>00406         funcEnum = <a class="code" href="../../d7/d27/class_m_s_edge.html#a075fc93ccf4dc6ad26f654b7a2b30f5ea31e8b7b3e452df63475804eb2c62a605" title="The edge is a macroscopic connector (source/sink).">MSEdge::EDGEFUNCTION_CONNECTOR</a>;
<a name="l00407"></a>00407         <span class="keywordflow">break</span>;
<a name="l00408"></a>00408     <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#aa6d3190d5e29fd0c18605ddea3e6ffa9a8e79141cb00ce59c76b6aa3f28d4a5c0">EDGEFUNC_INTERNAL</a>:
<a name="l00409"></a>00409         funcEnum = <a class="code" href="../../d7/d27/class_m_s_edge.html#a075fc93ccf4dc6ad26f654b7a2b30f5eaa38b0cfd4643a86e2a34c92e2e182120" title="The edge is an internal edge.">MSEdge::EDGEFUNCTION_INTERNAL</a>;
<a name="l00410"></a>00410         <span class="keywordflow">break</span>;
<a name="l00411"></a>00411     }
<a name="l00412"></a>00412     <span class="comment">// get the street name</span>
<a name="l00413"></a>00413     std::string streetName = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a8ee1ebbb12e7d7ea7cc3df1807f09ff3">SUMO_ATTR_NAME</a>,
<a name="l00414"></a>00414             <span class="keywordtype">id</span>.c_str(), ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00415"></a>00415     <span class="keywordflow">if</span> (!ok) {
<a name="l00416"></a>00416         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00417"></a>00417         <span class="keywordflow">return</span>;
<a name="l00418"></a>00418     }
<a name="l00419"></a>00419     <span class="comment">//</span>
<a name="l00420"></a>00420     <span class="keywordflow">try</span> {
<a name="l00421"></a>00421         <a class="code" href="../../da/d57/class_n_l_handler.html#a8b5f649705380ec22f0fcd0f3b7c0ad1" title="The edge builder to use.">myEdgeControlBuilder</a>.<a class="code" href="../../d9/d96/class_n_l_edge_control_builder.html#ae781917028acbda14d6f1f83f1c50164" title="Begins building of an MSEdge.">beginEdgeParsing</a>(<span class="keywordtype">id</span>, funcEnum, streetName);
<a name="l00422"></a>00422     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00423"></a>00423         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00424"></a>00424         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00425"></a>00425     }
<a name="l00426"></a>00426 }
<a name="l00427"></a>00427 
<a name="l00428"></a><a class="code" href="../../da/d57/class_n_l_handler.html#ad691051e858c66d28e5b2d0c2018d123">00428</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#ad691051e858c66d28e5b2d0c2018d123" title="Closes the process of building an edge.">NLHandler::closeEdge</a>() {
<a name="l00429"></a>00429     <span class="comment">// omit internal edges if not wished and broken edges</span>
<a name="l00430"></a>00430     <span class="keywordflow">if</span> (<a class="code" href="../../da/d57/class_n_l_handler.html#a860058d06347bed9cbcd5acb6c9eb6bd" title="Information whether the currently parsed edge is internal and not wished, here.">myCurrentIsInternalToSkip</a> || <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l00431"></a>00431         <span class="keywordflow">return</span>;
<a name="l00432"></a>00432     }
<a name="l00433"></a>00433     <span class="keywordflow">try</span> {
<a name="l00434"></a>00434         <a class="code" href="../../d7/d27/class_m_s_edge.html" title="A road/street connecting two junctions.">MSEdge</a>* e = <a class="code" href="../../da/d57/class_n_l_handler.html#a8b5f649705380ec22f0fcd0f3b7c0ad1" title="The edge builder to use.">myEdgeControlBuilder</a>.<a class="code" href="../../d9/d96/class_n_l_edge_control_builder.html#a17e17a44bad13d98ae4ce6669985ff11" title="Closes the building of an edge; The edge is completely described by now and may not...">closeEdge</a>();
<a name="l00435"></a>00435         <a class="code" href="../../d7/d27/class_m_s_edge.html#ab193f7a67f12ca616305c36964e5aa00" title="Inserts edge into the static dictionary Returns true if the key id isn&amp;#39;t already...">MSEdge::dictionary</a>(e-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#a715096baba12f1f89b7bc1bedd6df1b5" title="Returns the id of the edge.">getID</a>(), e);
<a name="l00436"></a>00436     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00437"></a>00437         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00438"></a>00438     }
<a name="l00439"></a>00439 }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441 <span class="comment">//             ---- the root/edge/lanes/lane - element</span>
<a name="l00442"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a5cef85f7e689bf57dea51fb11deb2b2a">00442</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a5cef85f7e689bf57dea51fb11deb2b2a" title="adds a lane to the previously opened edge">NLHandler::addLane</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00443"></a>00443     <span class="comment">// omit internal edges if not wished and broken edges</span>
<a name="l00444"></a>00444     <span class="keywordflow">if</span> (<a class="code" href="../../da/d57/class_n_l_handler.html#a860058d06347bed9cbcd5acb6c9eb6bd" title="Information whether the currently parsed edge is internal and not wished, here.">myCurrentIsInternalToSkip</a> || <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l00445"></a>00445         <span class="keywordflow">return</span>;
<a name="l00446"></a>00446     }
<a name="l00447"></a>00447     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00448"></a>00448     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l00449"></a>00449     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00450"></a>00450     <span class="keywordflow">if</span> (!ok) {
<a name="l00451"></a>00451         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00452"></a>00452         <span class="keywordflow">return</span>;
<a name="l00453"></a>00453     }
<a name="l00454"></a>00454     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> maxSpeed =
<a name="l00455"></a>00455             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a20de2d6f5f5f179b071b7b63ed027e8e">SUMO_ATTR_SPEED</a>) ?
<a name="l00456"></a>00456                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a20de2d6f5f5f179b071b7b63ed027e8e">SUMO_ATTR_SPEED</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00457"></a>00457                             ok) :
<a name="l00458"></a>00458                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a5db1c0f676db4bfde097c257d899f5bd">SUMO_ATTR_MAXSPEED__DEPRECATED</a>,
<a name="l00459"></a>00459                             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00460"></a>00460     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> length = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac5b13bfcb8d3ef18e937978f66d14933">SUMO_ATTR_LENGTH</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00461"></a>00461             ok);
<a name="l00462"></a>00462     <span class="keywordtype">double</span> slope = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a96d66218ecdcddaf846c2ff2638cf179">SUMO_ATTR_SLOPE</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l00463"></a>00463             <span class="keyword">false</span>);
<a name="l00464"></a>00464     <span class="keywordflow">if</span> (!ok) {
<a name="l00465"></a>00465         slope = 0;
<a name="l00466"></a>00466         ok = <span class="keyword">true</span>;
<a name="l00467"></a>00467     }
<a name="l00468"></a>00468     std::string allow = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a09655bb7427db1171ae7839f07b832f9">SUMO_ATTR_ALLOW</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00469"></a>00469             ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00470"></a>00470     std::string disallow = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a073ba77ca7f2ab55d2f1ce9c93f5b775">SUMO_ATTR_DISALLOW</a>,
<a name="l00471"></a>00471             <span class="keywordtype">id</span>.c_str(), ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00472"></a>00472     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> width = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae0e969484e91c22b1967d21c3d83972d">SUMO_ATTR_WIDTH</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00473"></a>00473             ok, <a class="code" href="../../da/dbd/_std_defs_8h.html#ad3dc471ca699b165609aa4be50eeb7dc">SUMO_const_laneWidth</a>);
<a name="l00474"></a>00474     <span class="keywordtype">int</span> index = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a7f8c959ba7d79f8495a97326101895c2" title="Tries to read given attribute assuming it is an int.">getOptIntReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a8d59481c710b2f316a4c6a0cc2b8bc5b">SUMO_ATTR_INDEX</a>, <span class="keywordtype">id</span>.c_str(), ok, -1);
<a name="l00475"></a>00475     <a class="code" href="../../da/d56/class_position_vector.html" title="A list of 2D-positions.">PositionVector</a> shape = <a class="code" href="../../d9/df8/class_geom_conv_helper.html#afff274e69ad451886e889048a1e1f2d5" title="Builds a PositionVector from a string representation, reporting occured errors.">GeomConvHelper::parseShapeReporting</a>(
<a name="l00476"></a>00476             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a76bcfe39a3dd7eec7ced0bd2e40a6270">SUMO_ATTR_SHAPE</a>, <span class="keywordtype">id</span>.c_str(), ok), <span class="stringliteral">&quot;lane&quot;</span>,
<a name="l00477"></a>00477             <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">false</span>);
<a name="l00478"></a>00478     <span class="keywordflow">if</span> (shape.<a class="code" href="../../da/d56/class_position_vector.html#a4f728d62950004e143aa921c5f64de2f" title="returns the number of points making up the line vector">size</a>() &lt; 2) {
<a name="l00479"></a>00479         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l00480"></a>00480                 <span class="stringliteral">&quot;Shape of lane &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; is broken.\n Can not build according edge.&quot;</span>);
<a name="l00481"></a>00481         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00482"></a>00482         <span class="keywordflow">return</span>;
<a name="l00483"></a>00483     }
<a name="l00484"></a>00484     <a class="code" href="../../d2/d6d/_s_u_m_o_vehicle_class_8h.html#aeeb92a4c5c00b838d8f8b481b17eccce">SUMOVehicleClasses</a> allowedClasses;
<a name="l00485"></a>00485     <a class="code" href="../../d2/d6d/_s_u_m_o_vehicle_class_8h.html#aeeb92a4c5c00b838d8f8b481b17eccce">SUMOVehicleClasses</a> disallowedClasses;
<a name="l00486"></a>00486     <a class="code" href="../../d6/da7/_s_u_m_o_vehicle_class_8cpp.html#a0d87e9e1e67e592fb50695d33a3adcec" title="Parses the given definition of allowed/disallowed vehicle classes into the given...">parseVehicleClasses</a>(allow, disallow, allowedClasses, disallowedClasses);
<a name="l00487"></a>00487     <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> |= !ok;
<a name="l00488"></a>00488     <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l00489"></a>00489         <span class="keywordflow">try</span> {
<a name="l00490"></a>00490 
<a name="l00491"></a>00491             <a class="code" href="../../d9/d16/class_m_s_lane.html" title="Representation of a lane in the micro simulation.">MSLane</a>* lane;
<a name="l00492"></a>00492             lane = <a class="code" href="../../da/d57/class_n_l_handler.html#a8b5f649705380ec22f0fcd0f3b7c0ad1" title="The edge builder to use.">myEdgeControlBuilder</a>.<a class="code" href="../../d9/d96/class_n_l_edge_control_builder.html#a1c80bed50a49c4f593d88238b06ea094" title="Adds a lane to the current edge;.">addLane</a>(<span class="keywordtype">id</span>, maxSpeed, length, shape,
<a name="l00493"></a>00493                     width, allowedClasses, disallowedClasses);
<a name="l00494"></a>00494             lane-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#adf7f863553fe92bce7621638567ba64c">setMySlope</a>(slope);
<a name="l00495"></a>00495             <span class="comment">// insert the lane into the lane-dictionary, checking</span>
<a name="l00496"></a>00496             <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d16/class_m_s_lane.html#a965f4a235ad88d59aa404c1054dafe75" title="Inserts a MSLane into the static dictionary Returns true if the key id isn&amp;#39;t...">MSLane::dictionary</a>(<span class="keywordtype">id</span>, lane)) {
<a name="l00497"></a>00497                 <span class="keyword">delete</span> lane;
<a name="l00498"></a>00498                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;Another lane with the id &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; exists.&quot;</span>);
<a name="l00499"></a>00499                 <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00500"></a>00500             }
<a name="l00501"></a>00501         } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00502"></a>00502             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00503"></a>00503         }
<a name="l00504"></a>00504     }
<a name="l00505"></a>00505 }
<a name="l00506"></a>00506 
<a name="l00507"></a>00507 <span class="comment">// ---- the root/junction - element</span>
<a name="l00508"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a7fbf053174f7ba26e9c6bdc01c7c4971">00508</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a7fbf053174f7ba26e9c6bdc01c7c4971" title="opens a junction for processing">NLHandler::openJunction</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00509"></a>00509     <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">false</span>;
<a name="l00510"></a>00510     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00511"></a>00511     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l00512"></a>00512     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00513"></a>00513     <span class="keywordflow">if</span> (!ok) {
<a name="l00514"></a>00514         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00515"></a>00515         <span class="keywordflow">return</span>;
<a name="l00516"></a>00516     }
<a name="l00517"></a>00517     <a class="code" href="../../da/d56/class_position_vector.html" title="A list of 2D-positions.">PositionVector</a> shape;
<a name="l00518"></a>00518     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a76bcfe39a3dd7eec7ced0bd2e40a6270">SUMO_ATTR_SHAPE</a>)) {
<a name="l00519"></a>00519         <span class="comment">// inner junctions have no shape</span>
<a name="l00520"></a>00520         shape = <a class="code" href="../../d9/df8/class_geom_conv_helper.html#afff274e69ad451886e889048a1e1f2d5" title="Builds a PositionVector from a string representation, reporting occured errors.">GeomConvHelper::parseShapeReporting</a>(
<a name="l00521"></a>00521                 attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a7d81012d38b65b66075c1235b7a8fab3" title="Returns the string-value of the named (by its enum-value) attribute.">getStringSecure</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a76bcfe39a3dd7eec7ced0bd2e40a6270">SUMO_ATTR_SHAPE</a>, <span class="stringliteral">&quot;&quot;</span>),
<a name="l00522"></a>00522                 attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a71c6518bb947798becfe584408002142" title="return the objecttype to which these attributes belong">getObjectType</a>(), <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">true</span>);
<a name="l00523"></a>00523     }
<a name="l00524"></a>00524     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> x = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a4925775281a000afbddcee2e173674ad">SUMO_ATTR_X</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00525"></a>00525     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> y = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a360ac21f3e5ff5b0838d4bea2101da0f">SUMO_ATTR_Y</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00526"></a>00526     std::string type = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac2d51057ec185c633d66ac68e3ddbb7c">SUMO_ATTR_TYPE</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00527"></a>00527     std::string key = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aec433aa930560c3327bafe3d3473b5cd">SUMO_ATTR_KEY</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l00528"></a>00528             <span class="stringliteral">&quot;&quot;</span>);
<a name="l00529"></a>00529     <span class="comment">// incoming lanes</span>
<a name="l00530"></a>00530     std::vector&lt;MSLane*&gt; incomingLanes;
<a name="l00531"></a>00531     <a class="code" href="../../da/d57/class_n_l_handler.html#a533e747ae1b1ced5961fb43d7150b836">parseLanes</a>(<span class="keywordtype">id</span>, attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a7d81012d38b65b66075c1235b7a8fab3" title="Returns the string-value of the named (by its enum-value) attribute.">getStringSecure</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a8adbc96d412a50acc334fe84fa2c1a46">SUMO_ATTR_INCLANES</a>, <span class="stringliteral">&quot;&quot;</span>), incomingLanes,
<a name="l00532"></a>00532             ok);
<a name="l00533"></a>00533     <span class="comment">// internal lanes</span>
<a name="l00534"></a>00534     std::vector&lt;MSLane*&gt; internalLanes;
<a name="l00535"></a>00535 <span class="preprocessor">#ifdef HAVE_INTERNAL_LANES</span>
<a name="l00536"></a>00536 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d5/de7/class_m_s_globals.html#afab897d0ff315c0853f3dfad1b617d8a" title="Information whether the simulation regards internal lanes.">MSGlobals::gUsingInternalLanes</a>) {
<a name="l00537"></a>00537         <a class="code" href="../../da/d57/class_n_l_handler.html#a533e747ae1b1ced5961fb43d7150b836">parseLanes</a>(<span class="keywordtype">id</span>, attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a7d81012d38b65b66075c1235b7a8fab3" title="Returns the string-value of the named (by its enum-value) attribute.">getStringSecure</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a544d2897478046b3ad9cc18729c869b1">SUMO_ATTR_INTLANES</a>, <span class="stringliteral">&quot;&quot;</span>),
<a name="l00538"></a>00538                 internalLanes, ok);
<a name="l00539"></a>00539     }
<a name="l00540"></a>00540 <span class="preprocessor">#endif</span>
<a name="l00541"></a>00541 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!ok) {
<a name="l00542"></a>00542         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00543"></a>00543     } <span class="keywordflow">else</span> {
<a name="l00544"></a>00544         <span class="keywordflow">try</span> {
<a name="l00545"></a>00545             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a9fd158265e2dd4a939ef11a54f8921f1" title="Begins the processing of the named junction.">openJunction</a>(<span class="keywordtype">id</span>, key, type, x, y, shape,
<a name="l00546"></a>00546                     incomingLanes, internalLanes);
<a name="l00547"></a>00547         } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00548"></a>00548             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l00549"></a>00549                     e.what() + std::string(<span class="stringliteral">&quot;\n Can not build according junction.&quot;</span>));
<a name="l00550"></a>00550             <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00551"></a>00551         }
<a name="l00552"></a>00552     }
<a name="l00553"></a>00553 }
<a name="l00554"></a>00554 
<a name="l00555"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a533e747ae1b1ced5961fb43d7150b836">00555</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a533e747ae1b1ced5961fb43d7150b836">NLHandler::parseLanes</a>(<span class="keyword">const</span> std::string&amp; junctionID,
<a name="l00556"></a>00556         <span class="keyword">const</span> std::string&amp; def, std::vector&lt;MSLane*&gt; &amp;into, <span class="keywordtype">bool</span>&amp; ok) {
<a name="l00557"></a>00557     <a class="code" href="../../db/dc0/class_string_tokenizer.html">StringTokenizer</a> st(def);
<a name="l00558"></a>00558     <span class="keywordflow">while</span> (ok &amp;&amp; st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#aa654384891d4b9d724eee0f6c739193c">hasNext</a>()) {
<a name="l00559"></a>00559         std::string laneID = st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#afbe25dccd9c18a10650861730e63a7c2">next</a>();
<a name="l00560"></a>00560         <a class="code" href="../../d9/d16/class_m_s_lane.html" title="Representation of a lane in the micro simulation.">MSLane</a>* lane = <a class="code" href="../../d9/d16/class_m_s_lane.html#a965f4a235ad88d59aa404c1054dafe75" title="Inserts a MSLane into the static dictionary Returns true if the key id isn&amp;#39;t...">MSLane::dictionary</a>(laneID);
<a name="l00561"></a>00561         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de7/class_m_s_globals.html#afab897d0ff315c0853f3dfad1b617d8a" title="Information whether the simulation regards internal lanes.">MSGlobals::gUsingInternalLanes</a> &amp;&amp; laneID[0] == <span class="charliteral">&#39;:&#39;</span>) {
<a name="l00562"></a>00562             <span class="keywordflow">continue</span>;
<a name="l00563"></a>00563         }
<a name="l00564"></a>00564         <span class="keywordflow">if</span> (lane == 0) {
<a name="l00565"></a>00565             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l00566"></a>00566                     <span class="stringliteral">&quot;An unknown lane (&#39;&quot;</span> + laneID + <span class="stringliteral">&quot;&#39;) was tried to be set as incoming to junction &#39;&quot;</span> + junctionID + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00567"></a>00567             ok = <span class="keyword">false</span>;
<a name="l00568"></a>00568             <span class="keywordflow">continue</span>;
<a name="l00569"></a>00569         }
<a name="l00570"></a>00570         into.push_back(lane);
<a name="l00571"></a>00571     }
<a name="l00572"></a>00572 }
<a name="l00573"></a>00573 <span class="comment">// ----</span>
<a name="l00574"></a>00574 
<a name="l00575"></a><a class="code" href="../../da/d57/class_n_l_handler.html#af899bb912b67511484921aea9577d78c">00575</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#af899bb912b67511484921aea9577d78c">NLHandler::addParam</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00576"></a>00576     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00577"></a>00577     std::string key = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aec433aa930560c3327bafe3d3473b5cd">SUMO_ATTR_KEY</a>, 0, ok);
<a name="l00578"></a>00578     std::string val = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a2aff17dc4f76421bc9e2d437f5a99658">SUMO_ATTR_VALUE</a>, 0, ok);
<a name="l00579"></a>00579     <span class="comment">// set</span>
<a name="l00580"></a>00580     <span class="keywordflow">if</span> (ok &amp;&amp; <a class="code" href="../../da/d57/class_n_l_handler.html#ac35ce18de8d666141c1456f918e1d67d" title="internal information whether a tls-logic is currently read">myAmInTLLogicMode</a>) {
<a name="l00581"></a>00581         assert(key != <span class="stringliteral">&quot;&quot;</span>);
<a name="l00582"></a>00582         assert(val != <span class="stringliteral">&quot;&quot;</span>);
<a name="l00583"></a>00583         <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a99b00666ba105906449bad334ccaa957" title="Adds a parameter.">addParam</a>(key, val);
<a name="l00584"></a>00584     }
<a name="l00585"></a>00585 }
<a name="l00586"></a>00586 
<a name="l00587"></a><a class="code" href="../../da/d57/class_n_l_handler.html#ab4fa02d085e032148a70aecb7a2693e1">00587</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#ab4fa02d085e032148a70aecb7a2693e1">NLHandler::openWAUT</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00588"></a>00588     <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">false</span>;
<a name="l00589"></a>00589     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00590"></a>00590     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l00591"></a>00591     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00592"></a>00592     <span class="keywordflow">if</span> (!ok) {
<a name="l00593"></a>00593         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00594"></a>00594         <span class="keywordflow">return</span>;
<a name="l00595"></a>00595     }
<a name="l00596"></a>00596     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> t = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aec7c611af3672624082be22699508c3d">SUMO_ATTR_REF_TIME</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00597"></a>00597             ok, 0);
<a name="l00598"></a>00598     std::string pro = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a5e2ab6da8fec8cf072eafc636c5ae307">SUMO_ATTR_START_PROG</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00599"></a>00599             ok);
<a name="l00600"></a>00600     <span class="keywordflow">if</span> (!ok) {
<a name="l00601"></a>00601         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00602"></a>00602     }
<a name="l00603"></a>00603     <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l00604"></a>00604         <a class="code" href="../../da/d57/class_n_l_handler.html#a516f2a6cc6f7a81470185bc2eaa80969" title="The id of the currently processed WAUT.">myCurrentWAUTID</a> = id;
<a name="l00605"></a>00605         <span class="keywordflow">try</span> {
<a name="l00606"></a>00606             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a3938c64114117c0742328d815d713636" title="Returns the used tls control.">getTLLogicControlToUse</a>().<a class="code" href="../../d2/da4/class_m_s_t_l_logic_control.html#a4bab321ab43c416a1f1355e4c62e10a1" title="Adds a WAUT definition.">addWAUT</a>(t, <span class="keywordtype">id</span>,
<a name="l00607"></a>00607                     pro);
<a name="l00608"></a>00608         } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00609"></a>00609             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00610"></a>00610             <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00611"></a>00611         }
<a name="l00612"></a>00612     }
<a name="l00613"></a>00613 }
<a name="l00614"></a>00614 
<a name="l00615"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a2429db6194a45f8b6ad08a0618296c7d">00615</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a2429db6194a45f8b6ad08a0618296c7d">NLHandler::addWAUTSwitch</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00616"></a>00616     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00617"></a>00617     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> t = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96af5f02c7e208a3cf26f42e22463d0796e">SUMO_ATTR_TIME</a>,
<a name="l00618"></a>00618             <a class="code" href="../../da/d57/class_n_l_handler.html#a516f2a6cc6f7a81470185bc2eaa80969" title="The id of the currently processed WAUT.">myCurrentWAUTID</a>.c_str(), ok);
<a name="l00619"></a>00619     std::string to = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9c30cf894facbcdf6956d4e37c994538">SUMO_ATTR_TO</a>,
<a name="l00620"></a>00620             <a class="code" href="../../da/d57/class_n_l_handler.html#a516f2a6cc6f7a81470185bc2eaa80969" title="The id of the currently processed WAUT.">myCurrentWAUTID</a>.c_str(), ok);
<a name="l00621"></a>00621     <span class="keywordflow">if</span> (!ok) {
<a name="l00622"></a>00622         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00623"></a>00623     }
<a name="l00624"></a>00624     <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l00625"></a>00625         <span class="keywordflow">try</span> {
<a name="l00626"></a>00626             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a3938c64114117c0742328d815d713636" title="Returns the used tls control.">getTLLogicControlToUse</a>().<a class="code" href="../../d2/da4/class_m_s_t_l_logic_control.html#a8a7c6ee04b89bdca00551592e44fca9b" title="Adds a WAUT switch step to a previously built WAUT.">addWAUTSwitch</a>(
<a name="l00627"></a>00627                     <a class="code" href="../../da/d57/class_n_l_handler.html#a516f2a6cc6f7a81470185bc2eaa80969" title="The id of the currently processed WAUT.">myCurrentWAUTID</a>, t, to);
<a name="l00628"></a>00628         } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00629"></a>00629             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00630"></a>00630             <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00631"></a>00631         }
<a name="l00632"></a>00632     }
<a name="l00633"></a>00633 }
<a name="l00634"></a>00634 
<a name="l00635"></a><a class="code" href="../../da/d57/class_n_l_handler.html#af02587243ab00fc801107745681cbbd0">00635</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#af02587243ab00fc801107745681cbbd0">NLHandler::addWAUTJunction</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00636"></a>00636     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00637"></a>00637     std::string wautID = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a4cc2aa69bfe25db7b4df59f6693f81a7">SUMO_ATTR_WAUT_ID</a>, 0, ok);
<a name="l00638"></a>00638     std::string junctionID = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac1f5bd92889a9b47e5918bc55512c363">SUMO_ATTR_JUNCTION_ID</a>, 0,
<a name="l00639"></a>00639             ok);
<a name="l00640"></a>00640     std::string procedure = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a3404482e0df5d7b0329ddcbf89ef866d">SUMO_ATTR_PROCEDURE</a>, 0,
<a name="l00641"></a>00641             ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00642"></a>00642     <span class="keywordtype">bool</span> synchron = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae23ab494abc2d52db64e54082e871433">SUMO_ATTR_SYNCHRON</a>, 0, ok, <span class="keyword">false</span>);
<a name="l00643"></a>00643     <span class="keywordflow">if</span> (!ok) {
<a name="l00644"></a>00644         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00645"></a>00645     }
<a name="l00646"></a>00646     <span class="keywordflow">try</span> {
<a name="l00647"></a>00647         <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l00648"></a>00648             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a3938c64114117c0742328d815d713636" title="Returns the used tls control.">getTLLogicControlToUse</a>().<a class="code" href="../../d2/da4/class_m_s_t_l_logic_control.html#a03f84ca068a075b2a0b5e879519112be" title="Adds a tls to the list of tls to be switched by the named WAUT.">addWAUTJunction</a>(
<a name="l00649"></a>00649                     wautID, junctionID, procedure, synchron);
<a name="l00650"></a>00650         }
<a name="l00651"></a>00651     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00652"></a>00652         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00653"></a>00653         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l00654"></a>00654     }
<a name="l00655"></a>00655 }
<a name="l00656"></a>00656 
<a name="l00657"></a><a class="code" href="../../da/d57/class_n_l_handler.html#ac403d0dc45ad9ca4c31c0d8a5e2ee82d">00657</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#ac403d0dc45ad9ca4c31c0d8a5e2ee82d" title="adds a polygon">NLHandler::addPOI</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00658"></a>00658     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00659"></a>00659     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> INVALID_POSITION(-1000000);
<a name="l00660"></a>00660     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00661"></a>00661     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> x = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a4925775281a000afbddcee2e173674ad">SUMO_ATTR_X</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l00662"></a>00662             INVALID_POSITION);
<a name="l00663"></a>00663     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> y = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a360ac21f3e5ff5b0838d4bea2101da0f">SUMO_ATTR_Y</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l00664"></a>00664             INVALID_POSITION);
<a name="l00665"></a>00665     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> lanePos = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aedb2f129c132230d40119f4d6d10ed53">SUMO_ATTR_POSITION</a>,
<a name="l00666"></a>00666             <span class="keywordtype">id</span>.c_str(), ok, INVALID_POSITION);
<a name="l00667"></a>00667     <span class="keywordtype">int</span> layer = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a7f8c959ba7d79f8495a97326101895c2" title="Tries to read given attribute assuming it is an int.">getOptIntReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a918f83558e34f54d741ff159c0b4ccc1" title="A layer number.">SUMO_ATTR_LAYER</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l00668"></a>00668             <a class="code" href="../../db/dcf/_g_u_i_gl_object_types_8h.html#af2b60d80f2ed12c3f597887aec83db5cac8530ee00a7340b761329e2f13421d27" title="a shape">GLO_SHAPE</a>);
<a name="l00669"></a>00669     std::string type = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac2d51057ec185c633d66ac68e3ddbb7c">SUMO_ATTR_TYPE</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00670"></a>00670             ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00671"></a>00671     std::string laneID = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00672"></a>00672             ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00673"></a>00673     std::string colorStr = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac9e3c699318ae073cd4b1312b1b96dca" title="A color information.">SUMO_ATTR_COLOR</a>,
<a name="l00674"></a>00674             <span class="keywordtype">id</span>.c_str(), ok, <span class="stringliteral">&quot;1,0,0&quot;</span>);
<a name="l00675"></a>00675     <a class="code" href="../../da/da9/class_r_g_b_color.html">RGBColor</a> color = <a class="code" href="../../da/da9/class_r_g_b_color.html#a9106d02e4ed6dc53f7550f8277e047e1" title="Parses a color information.">RGBColor::parseColorReporting</a>(colorStr,
<a name="l00676"></a>00676             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a71c6518bb947798becfe584408002142" title="return the objecttype to which these attributes belong">getObjectType</a>(), <span class="keywordtype">id</span>.c_str(), <span class="keyword">true</span>, ok);
<a name="l00677"></a>00677     <span class="keywordflow">if</span> (!ok) {
<a name="l00678"></a>00678         <span class="keywordflow">return</span>;
<a name="l00679"></a>00679     }
<a name="l00680"></a>00680     <a class="code" href="../../d7/d3b/class_position.html" title="A point in 2D or 3D with translation and scaling methods.">Position</a> pos(x, y);
<a name="l00681"></a>00681     <span class="keywordflow">if</span> (x == INVALID_POSITION || y == INVALID_POSITION) {
<a name="l00682"></a>00682         <a class="code" href="../../d9/d16/class_m_s_lane.html" title="Representation of a lane in the micro simulation.">MSLane</a>* lane = <a class="code" href="../../d9/d16/class_m_s_lane.html#a965f4a235ad88d59aa404c1054dafe75" title="Inserts a MSLane into the static dictionary Returns true if the key id isn&amp;#39;t...">MSLane::dictionary</a>(laneID);
<a name="l00683"></a>00683         <span class="keywordflow">if</span> (lane == 0) {
<a name="l00684"></a>00684             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l00685"></a>00685                     <span class="stringliteral">&quot;Lane &#39;&quot;</span> + laneID + <span class="stringliteral">&quot;&#39; to place a poi &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39;on is not known.&quot;</span>);
<a name="l00686"></a>00686             <span class="keywordflow">return</span>;
<a name="l00687"></a>00687         }
<a name="l00688"></a>00688         <span class="keywordflow">if</span> (lanePos &lt; 0) {
<a name="l00689"></a>00689             lanePos = lane-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#aef5b982f774910cf6de56065fee1d260" title="Returns the lane&amp;#39;s length.">getLength</a>() + lanePos;
<a name="l00690"></a>00690         }
<a name="l00691"></a>00691         pos = lane-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#a8b6eba4f01577ab96e7e606d5028bf44" title="Returns this lane&amp;#39;s shape.">getShape</a>().<a class="code" href="../../da/d56/class_position_vector.html#a716318d3b0fe4298f5384d8d38688b6c" title="Returns the position at the given length.">positionAtLengthPosition</a>(lanePos);
<a name="l00692"></a>00692     }
<a name="l00693"></a>00693     <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#ae4ae1bedba27b61260a425609c71177d" title="The net to fill (preinitialised).">myNet</a>.<a class="code" href="../../dc/d5d/class_m_s_net.html#a72eb4c4284be8e3da698e021a5e77ed9" title="Returns the shapes container.">getShapeContainer</a>().<a class="code" href="../../d6/d6b/class_shape_container.html#aa7af9d49310c2a853cf43a5da9e76ac0" title="Builds a PoI using the given values and adds it to the according layer.">addPoI</a>(<span class="keywordtype">id</span>, layer, type, color, pos)) {
<a name="l00694"></a>00694         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;PoI &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; already exists.&quot;</span>);
<a name="l00695"></a>00695     }
<a name="l00696"></a>00696 }
<a name="l00697"></a>00697 
<a name="l00698"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a8071df406188fdd66b87aeb95f092639">00698</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a8071df406188fdd66b87aeb95f092639" title="adds a polygon">NLHandler::addPoly</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00699"></a>00699     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00700"></a>00700     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00701"></a>00701     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l00702"></a>00702     <span class="keywordflow">if</span> (!ok) {
<a name="l00703"></a>00703         <span class="keywordflow">return</span>;
<a name="l00704"></a>00704     }
<a name="l00705"></a>00705     <span class="keywordtype">int</span> layer = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a7f8c959ba7d79f8495a97326101895c2" title="Tries to read given attribute assuming it is an int.">getOptIntReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a918f83558e34f54d741ff159c0b4ccc1" title="A layer number.">SUMO_ATTR_LAYER</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l00706"></a>00706             <a class="code" href="../../db/dcf/_g_u_i_gl_object_types_8h.html#af2b60d80f2ed12c3f597887aec83db5cac8530ee00a7340b761329e2f13421d27" title="a shape">GLO_SHAPE</a>);
<a name="l00707"></a>00707     <span class="keywordtype">bool</span> fill = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a8eb33068fecc57d8eec0054bd1f8012f" title="Fill the polygon.">SUMO_ATTR_FILL</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l00708"></a>00708             <span class="keyword">false</span>);
<a name="l00709"></a>00709     std::string type = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac2d51057ec185c633d66ac68e3ddbb7c">SUMO_ATTR_TYPE</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00710"></a>00710             ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00711"></a>00711     std::string colorStr = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac9e3c699318ae073cd4b1312b1b96dca" title="A color information.">SUMO_ATTR_COLOR</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00712"></a>00712             ok);
<a name="l00713"></a>00713     <a class="code" href="../../da/da9/class_r_g_b_color.html">RGBColor</a> color = <a class="code" href="../../da/da9/class_r_g_b_color.html#a9106d02e4ed6dc53f7550f8277e047e1" title="Parses a color information.">RGBColor::parseColorReporting</a>(colorStr,
<a name="l00714"></a>00714             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a71c6518bb947798becfe584408002142" title="return the objecttype to which these attributes belong">getObjectType</a>(), <span class="keywordtype">id</span>.c_str(), <span class="keyword">true</span>, ok);
<a name="l00715"></a>00715     <a class="code" href="../../da/d56/class_position_vector.html" title="A list of 2D-positions.">PositionVector</a> shape = <a class="code" href="../../d9/df8/class_geom_conv_helper.html#afff274e69ad451886e889048a1e1f2d5" title="Builds a PositionVector from a string representation, reporting occured errors.">GeomConvHelper::parseShapeReporting</a>(
<a name="l00716"></a>00716             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a76bcfe39a3dd7eec7ced0bd2e40a6270">SUMO_ATTR_SHAPE</a>, <span class="keywordtype">id</span>.c_str(), ok),
<a name="l00717"></a>00717             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a71c6518bb947798becfe584408002142" title="return the objecttype to which these attributes belong">getObjectType</a>(), <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">false</span>);
<a name="l00718"></a>00718     <span class="keywordflow">if</span> (shape.size() != 0) {
<a name="l00719"></a>00719         <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#ae4ae1bedba27b61260a425609c71177d" title="The net to fill (preinitialised).">myNet</a>.<a class="code" href="../../dc/d5d/class_m_s_net.html#a72eb4c4284be8e3da698e021a5e77ed9" title="Returns the shapes container.">getShapeContainer</a>().<a class="code" href="../../d6/d6b/class_shape_container.html#a7f3c8936ee48484bc0d39e11dcc619b5" title="Builds a polygon using the given values and adds it to the according layer.">addPolygon</a>(<span class="keywordtype">id</span>, layer, type, color, fill,
<a name="l00720"></a>00720                 shape)) {
<a name="l00721"></a>00721             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;Polygon &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; already exists.&quot;</span>);
<a name="l00722"></a>00722         }
<a name="l00723"></a>00723     }
<a name="l00724"></a>00724 }
<a name="l00725"></a>00725 
<a name="l00726"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a65e4562c53771eeb6166ab9889a619fa">00726</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a65e4562c53771eeb6166ab9889a619fa" title="(deprecated) adds a logic item to the current logic">NLHandler::addLogicItem</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00727"></a>00727     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00728"></a>00728     <span class="keywordtype">int</span> request = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa20314c8b11251d9d6d82566d6b34136" title="Tries to read given attribute assuming it is an int.">getIntReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae9b48984a03c6fdc7459d1a4ab6e7b01">SUMO_ATTR_REQUEST</a>, 0, ok);
<a name="l00729"></a>00729     <span class="keywordtype">bool</span> cont = <span class="keyword">false</span>;
<a name="l00730"></a>00730 <span class="preprocessor">#ifdef HAVE_INTERNAL_LANES</span>
<a name="l00731"></a>00731 <span class="preprocessor"></span>    cont = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a13d6001f9e7394ba8dd9be10752670a2" title="Information whether the detector shall be continued on the folowing lanes.">SUMO_ATTR_CONT</a>, 0, ok, <span class="keyword">false</span>);
<a name="l00732"></a>00732 <span class="preprocessor">#endif</span>
<a name="l00733"></a>00733 <span class="preprocessor"></span>    std::string response = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a410328c9f58000d7531a6b1dfd1aecd4">SUMO_ATTR_RESPONSE</a>, 0, ok);
<a name="l00734"></a>00734     std::string foes = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab5780c603e54bc9b748e6f674d755684" title="Information within the junction logic which internal lanes block external.">SUMO_ATTR_FOES</a>, 0, ok);
<a name="l00735"></a>00735     <span class="keywordflow">if</span> (!ok) {
<a name="l00736"></a>00736         <span class="keywordflow">return</span>;
<a name="l00737"></a>00737     }
<a name="l00738"></a>00738     <span class="comment">// store received information</span>
<a name="l00739"></a>00739     <span class="keywordflow">if</span> (request &gt;= 0 &amp;&amp; response.length() &gt; 0) {
<a name="l00740"></a>00740         <span class="keywordflow">try</span> {
<a name="l00741"></a>00741             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#ae004d38c793d27e8ae2db06a7878928a" title="Adds a logic item.">addLogicItem</a>(request, response, foes,
<a name="l00742"></a>00742                     cont);
<a name="l00743"></a>00743         } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00744"></a>00744             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00745"></a>00745         }
<a name="l00746"></a>00746     }
<a name="l00747"></a>00747 }
<a name="l00748"></a>00748 
<a name="l00749"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a05837f5223a8b4d724f1d47ce1b55ca5">00749</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a05837f5223a8b4d724f1d47ce1b55ca5" title="adds a request item to the current junction logic">NLHandler::addRequest</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00750"></a>00750     <span class="keywordflow">if</span> (<a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l00751"></a>00751         <span class="keywordflow">return</span>;
<a name="l00752"></a>00752     }
<a name="l00753"></a>00753     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00754"></a>00754     <span class="keywordtype">int</span> request = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa20314c8b11251d9d6d82566d6b34136" title="Tries to read given attribute assuming it is an int.">getIntReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a8d59481c710b2f316a4c6a0cc2b8bc5b">SUMO_ATTR_INDEX</a>, 0, ok);
<a name="l00755"></a>00755     <span class="keywordtype">bool</span> cont = <span class="keyword">false</span>;
<a name="l00756"></a>00756 <span class="preprocessor">#ifdef HAVE_INTERNAL_LANES</span>
<a name="l00757"></a>00757 <span class="preprocessor"></span>    cont = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a13d6001f9e7394ba8dd9be10752670a2" title="Information whether the detector shall be continued on the folowing lanes.">SUMO_ATTR_CONT</a>, 0, ok, <span class="keyword">false</span>);
<a name="l00758"></a>00758 <span class="preprocessor">#endif</span>
<a name="l00759"></a>00759 <span class="preprocessor"></span>    std::string response = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a410328c9f58000d7531a6b1dfd1aecd4">SUMO_ATTR_RESPONSE</a>, 0, ok);
<a name="l00760"></a>00760     std::string foes = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab5780c603e54bc9b748e6f674d755684" title="Information within the junction logic which internal lanes block external.">SUMO_ATTR_FOES</a>, 0, ok);
<a name="l00761"></a>00761     <span class="keywordflow">if</span> (!ok) {
<a name="l00762"></a>00762         <span class="keywordflow">return</span>;
<a name="l00763"></a>00763     }
<a name="l00764"></a>00764     <span class="comment">// store received information</span>
<a name="l00765"></a>00765     <span class="keywordflow">if</span> (request &gt;= 0 &amp;&amp; response.length() &gt; 0) {
<a name="l00766"></a>00766         <span class="keywordflow">try</span> {
<a name="l00767"></a>00767             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#ae004d38c793d27e8ae2db06a7878928a" title="Adds a logic item.">addLogicItem</a>(request, response, foes,
<a name="l00768"></a>00768                     cont);
<a name="l00769"></a>00769         } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00770"></a>00770             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00771"></a>00771         }
<a name="l00772"></a>00772     }
<a name="l00773"></a>00773 }
<a name="l00774"></a>00774 
<a name="l00775"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a5d9e8633c01fc932256bae35212dcf51">00775</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a5d9e8633c01fc932256bae35212dcf51" title="begins the reading of a junction row logic">NLHandler::initJunctionLogic</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00776"></a>00776     <span class="keywordflow">if</span> (<a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l00777"></a>00777         <span class="keywordflow">return</span>;
<a name="l00778"></a>00778     }
<a name="l00779"></a>00779     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00780"></a>00780     <span class="comment">// we either a have a junction or a legacy network with ROWLogic</span>
<a name="l00781"></a>00781     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00782"></a>00782     <span class="keywordflow">if</span> (ok) {
<a name="l00783"></a>00783         <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#aae973e160afb24afa2fe712b9c025f5b" title="Initialises a junction logic.">initJunctionLogic</a>(<span class="keywordtype">id</span>);
<a name="l00784"></a>00784     }
<a name="l00785"></a>00785 }
<a name="l00786"></a>00786 
<a name="l00787"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a9284c6cce1bfdb7f168cca864af30cca">00787</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a9284c6cce1bfdb7f168cca864af30cca" title="begins the reading of a traffic lights logic">NLHandler::initTrafficLightLogic</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00788"></a>00788     <a class="code" href="../../da/d57/class_n_l_handler.html#ac35ce18de8d666141c1456f918e1d67d" title="internal information whether a tls-logic is currently read">myAmInTLLogicMode</a> = <span class="keyword">true</span>;
<a name="l00789"></a>00789     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00790"></a>00790     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00791"></a>00791     <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a2e13f54047cc51f08632a48b36d8b7eb">TrafficLightType</a> type;
<a name="l00792"></a>00792     std::string typeS = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac2d51057ec185c633d66ac68e3ddbb7c">SUMO_ATTR_TYPE</a>, 0, ok);
<a name="l00793"></a>00793     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d5a/class_s_u_m_o_x_m_l_definitions.html#a38df146ff1117bffac251cac38f828a7">SUMOXMLDefinitions::TrafficLightTypes</a>.hasString(typeS)) {
<a name="l00794"></a>00794         type = <a class="code" href="../../d1/d5a/class_s_u_m_o_x_m_l_definitions.html#a38df146ff1117bffac251cac38f828a7">SUMOXMLDefinitions::TrafficLightTypes</a>.<a class="code" href="../../d5/d41/class_string_bijection.html#a04ecd30500893639fd2c05722c09f7a4">get</a>(typeS);
<a name="l00795"></a>00795     } <span class="keywordflow">else</span> {
<a name="l00796"></a>00796         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l00797"></a>00797                 <span class="stringliteral">&quot;Traffic light &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; has unknown type &#39;&quot;</span> + typeS + <span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l00798"></a>00798         <span class="keywordflow">return</span>;
<a name="l00799"></a>00799     }
<a name="l00800"></a>00800     <span class="comment">//</span>
<a name="l00801"></a>00801     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> offset = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a47edd2b4f6d51bc429c1cef3be42b9a2">SUMO_ATTR_OFFSET</a>,
<a name="l00802"></a>00802             <span class="keywordtype">id</span>.c_str(), ok, 0);
<a name="l00803"></a>00803     <span class="keywordflow">if</span> (!ok) {
<a name="l00804"></a>00804         <span class="keywordflow">return</span>;
<a name="l00805"></a>00805     }
<a name="l00806"></a>00806     std::string programID = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ad5d780be5ae044ceabdd359d0417b2d1">SUMO_ATTR_PROGRAMID</a>,
<a name="l00807"></a>00807             <span class="keywordtype">id</span>.c_str(), ok, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>);
<a name="l00808"></a>00808     <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#ab2dd9f5cff2feb82b480663d9453db1d" title="Begins the reading of a traffic lights logic.">initTrafficLightLogic</a>(<span class="keywordtype">id</span>, programID, type, offset);
<a name="l00809"></a>00809 }
<a name="l00810"></a>00810 
<a name="l00811"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a40e24ab9a201181118459111ef1c2541">00811</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a40e24ab9a201181118459111ef1c2541" title="adds a phase to the traffic lights logic currently build">NLHandler::addPhase</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00812"></a>00812     <span class="comment">// try to get the phase definition</span>
<a name="l00813"></a>00813     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00814"></a>00814     std::string state = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96af22c84df27d5a3cc44cbb08231a29ba1" title="The state of a link.">SUMO_ATTR_STATE</a>, 0, ok);
<a name="l00815"></a>00815     <span class="keywordflow">if</span> (!ok) {
<a name="l00816"></a>00816         <span class="keywordflow">return</span>;
<a name="l00817"></a>00817     }
<a name="l00818"></a>00818     <span class="comment">// try to get the phase duration</span>
<a name="l00819"></a>00819     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> duration = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96adfa4719fd026c92649eb79501982ffef">SUMO_ATTR_DURATION</a>,
<a name="l00820"></a>00820             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a076a1c04a9ecf9f4504776b1faf3bef0" title="Returns the active key.">getActiveKey</a>().c_str(), ok);
<a name="l00821"></a>00821     <span class="keywordflow">if</span> (duration == 0) {
<a name="l00822"></a>00822         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l00823"></a>00823                 <span class="stringliteral">&quot;Duration of tls-logic &#39;&quot;</span> + <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a076a1c04a9ecf9f4504776b1faf3bef0" title="Returns the active key.">getActiveKey</a>() + <span class="stringliteral">&quot;/&quot;</span> + <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a5d033f9312223f322e9296f41f84350a" title="Returns the active sub key.">getActiveSubKey</a>() + <span class="stringliteral">&quot;&#39; is zero.&quot;</span>);
<a name="l00824"></a>00824         <span class="keywordflow">return</span>;
<a name="l00825"></a>00825     }
<a name="l00826"></a>00826     <span class="comment">// if the traffic light is an actuated traffic light, try to get</span>
<a name="l00827"></a>00827     <span class="comment">//  the minimum and maximum durations</span>
<a name="l00828"></a>00828     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> minDuration = -1;
<a name="l00829"></a>00829     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aa9e65e339f49337267e529536146f660" title="minimum duration of a phase">SUMO_ATTR_MINDURATION__DEPRECATED</a>)) {
<a name="l00830"></a>00830         minDuration = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(
<a name="l00831"></a>00831                 <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aa9e65e339f49337267e529536146f660" title="minimum duration of a phase">SUMO_ATTR_MINDURATION__DEPRECATED</a>,
<a name="l00832"></a>00832                 <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a076a1c04a9ecf9f4504776b1faf3bef0" title="Returns the active key.">getActiveKey</a>().c_str(), ok);
<a name="l00833"></a>00833         <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#adf263b8b06abec410a95ba4f428688d7">myHaveWarnedAboutDeprecatedTLSTiming</a>) {
<a name="l00834"></a>00834             <a class="code" href="../../da/d57/class_n_l_handler.html#adf263b8b06abec410a95ba4f428688d7">myHaveWarnedAboutDeprecatedTLSTiming</a> = <span class="keyword">true</span>;
<a name="l00835"></a>00835             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00836"></a>00836                     <span class="stringliteral">&quot;Your tls definition contains deprecated minimum/maximum duration attribute; use minDur and maxDur instead.&quot;</span>);
<a name="l00837"></a>00837         }
<a name="l00838"></a>00838     } <span class="keywordflow">else</span> {
<a name="l00839"></a>00839         minDuration = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae77f21323f3fbc5b8f1995902c7ae130">SUMO_ATTR_MINDURATION</a>,
<a name="l00840"></a>00840                 <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a076a1c04a9ecf9f4504776b1faf3bef0" title="Returns the active key.">getActiveKey</a>().c_str(), ok, -1);
<a name="l00841"></a>00841     }
<a name="l00842"></a>00842     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> maxDuration = -1;
<a name="l00843"></a>00843     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a54b4801df191bad94e3ad418fa004b65" title="maximum duration of a phase">SUMO_ATTR_MAXDURATION__DEPRECATED</a>)) {
<a name="l00844"></a>00844         maxDuration = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(
<a name="l00845"></a>00845                 <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a54b4801df191bad94e3ad418fa004b65" title="maximum duration of a phase">SUMO_ATTR_MAXDURATION__DEPRECATED</a>,
<a name="l00846"></a>00846                 <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a076a1c04a9ecf9f4504776b1faf3bef0" title="Returns the active key.">getActiveKey</a>().c_str(), ok);
<a name="l00847"></a>00847         <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#adf263b8b06abec410a95ba4f428688d7">myHaveWarnedAboutDeprecatedTLSTiming</a>) {
<a name="l00848"></a>00848             <a class="code" href="../../da/d57/class_n_l_handler.html#adf263b8b06abec410a95ba4f428688d7">myHaveWarnedAboutDeprecatedTLSTiming</a> = <span class="keyword">true</span>;
<a name="l00849"></a>00849             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00850"></a>00850                     <span class="stringliteral">&quot;Your tls definition contains deprecated minimum/maximum duration attribute; use minDur and maxDur instead.&quot;</span>);
<a name="l00851"></a>00851         }
<a name="l00852"></a>00852     } <span class="keywordflow">else</span> {
<a name="l00853"></a>00853         maxDuration = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acf912a18ec3b63b8d6fc8c48051f8d35">SUMO_ATTR_MAXDURATION</a>,
<a name="l00854"></a>00854                 <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a076a1c04a9ecf9f4504776b1faf3bef0" title="Returns the active key.">getActiveKey</a>().c_str(), ok, -1);
<a name="l00855"></a>00855     }
<a name="l00856"></a>00856     <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#acf8cc866b170acd6af4cb0ac9802fdb1" title="Adds a phase to the currently built traffic lights logic.">addPhase</a>(duration, state, minDuration,
<a name="l00857"></a>00857             maxDuration);
<a name="l00858"></a>00858 }
<a name="l00859"></a>00859 
<a name="l00860"></a>00860 <span class="preprocessor">#ifdef _MESSAGES</span>
<a name="l00861"></a>00861 <span class="preprocessor"></span><span class="keywordtype">void</span>
<a name="l00862"></a>00862 NLHandler::addMsgEmitter(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00863"></a>00863     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00864"></a>00864     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00865"></a>00865     std::string file = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a33ec524d2a7432aad949132a6656f460">SUMO_ATTR_FILE</a>, 0, ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00866"></a>00866     <span class="comment">// if no file given, use stdout</span>
<a name="l00867"></a>00867     <span class="keywordflow">if</span> (file == <span class="stringliteral">&quot;&quot;</span>) {
<a name="l00868"></a>00868         file = <span class="stringliteral">&quot;-&quot;</span>;
<a name="l00869"></a>00869     }
<a name="l00870"></a>00870     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> step = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(SUMO_ATTR_STEP, <span class="keywordtype">id</span>.c_str(), ok, 1);
<a name="l00871"></a>00871     <span class="keywordtype">bool</span> reverse = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(SUMO_ATTR_REVERSE, 0, ok, <span class="keyword">false</span>);
<a name="l00872"></a>00872     <span class="keywordtype">bool</span> table = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(SUMO_ATTR_TABLE, 0, ok, <span class="keyword">false</span>);
<a name="l00873"></a>00873     <span class="keywordtype">bool</span> xycoord = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(SUMO_ATTR_XY, 0, ok, <span class="keyword">false</span>);
<a name="l00874"></a>00874     std::string whatemit = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(SUMO_ATTR_EVENTS, 0, ok);
<a name="l00875"></a>00875     <span class="keywordflow">if</span> (!ok) {
<a name="l00876"></a>00876         <span class="keywordflow">return</span>;
<a name="l00877"></a>00877     }
<a name="l00878"></a>00878     <a class="code" href="../../da/d57/class_n_l_handler.html#ae4ae1bedba27b61260a425609c71177d" title="The net to fill (preinitialised).">myNet</a>.createMsgEmitter(<span class="keywordtype">id</span>, file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>(), whatemit, reverse, table, xycoord, step);
<a name="l00879"></a>00879 }
<a name="l00880"></a>00880 <span class="preprocessor">#endif</span>
<a name="l00881"></a>00881 <span class="preprocessor"></span>
<a name="l00882"></a><a class="code" href="../../da/d57/class_n_l_handler.html#ac74675fae99fea4b2d68346110ef2532">00882</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#ac74675fae99fea4b2d68346110ef2532" title="Builds an e1 detector using the given specification.">NLHandler::addE1Detector</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00883"></a>00883     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00884"></a>00884     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l00885"></a>00885     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00886"></a>00886     <span class="keywordflow">if</span> (!ok) {
<a name="l00887"></a>00887         <span class="keywordflow">return</span>;
<a name="l00888"></a>00888     }
<a name="l00889"></a>00889     <span class="comment">// inform the user about deprecated values</span>
<a name="l00890"></a>00890     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> frequency = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a980d00056b5a53301ffc1a3e4468e90d">SUMO_ATTR_FREQUENCY</a>,
<a name="l00891"></a>00891             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00892"></a>00892     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> position = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aedb2f129c132230d40119f4d6d10ed53">SUMO_ATTR_POSITION</a>,
<a name="l00893"></a>00893             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00894"></a>00894     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>)
<a name="l00895"></a>00895             &amp;&amp; !<a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a>) {
<a name="l00896"></a>00896         <a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a> = <span class="keyword">true</span>;
<a name="l00897"></a>00897         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00898"></a>00898                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated, use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>) + <span class="stringliteral">&quot;&#39; instead.&quot;</span>);
<a name="l00899"></a>00899     }
<a name="l00900"></a>00900     <span class="keywordtype">bool</span> friendlyPos =
<a name="l00901"></a>00901             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) ?
<a name="l00902"></a>00902                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(
<a name="l00903"></a>00903                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l00904"></a>00904                             <span class="keyword">false</span>) :
<a name="l00905"></a>00905                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>,
<a name="l00906"></a>00906                             <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">false</span>);
<a name="l00907"></a>00907     <span class="keywordtype">bool</span> splitByType = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a554cc5a59ba484b2ae31cee63ae57abc">SUMO_ATTR_SPLIT_VTYPE</a>,
<a name="l00908"></a>00908             <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">false</span>);
<a name="l00909"></a>00909     std::string lane = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00910"></a>00910     std::string file = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a33ec524d2a7432aad949132a6656f460">SUMO_ATTR_FILE</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00911"></a>00911     <span class="keywordflow">if</span> (!ok) {
<a name="l00912"></a>00912         <span class="keywordflow">return</span>;
<a name="l00913"></a>00913     }
<a name="l00914"></a>00914     <span class="keywordflow">try</span> {
<a name="l00915"></a>00915         <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a57b32df7fd6db8331873252a7ced0a03" title="Builds an e1 detector and adds it to the net.">buildInductLoop</a>(<span class="keywordtype">id</span>, lane, position, frequency,
<a name="l00916"></a>00916                 <a class="code" href="../../de/da0/class_output_device.html#a235c99951018d43e355900697460188b" title="Returns the described OutputDevice.">OutputDevice::getDevice</a>(file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>()), friendlyPos,
<a name="l00917"></a>00917                 splitByType);
<a name="l00918"></a>00918     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00919"></a>00919         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00920"></a>00920     } <span class="keywordflow">catch</span> (<a class="code" href="../../db/dcb/class_i_o_error.html">IOError</a>&amp; e) {
<a name="l00921"></a>00921         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00922"></a>00922     }
<a name="l00923"></a>00923 }
<a name="l00924"></a>00924 
<a name="l00925"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a787be0445ddd7518478db12194fb943f">00925</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a787be0445ddd7518478db12194fb943f" title="Builds an e1 detector using the given specification.">NLHandler::addInstantE1Detector</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00926"></a>00926     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00927"></a>00927     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l00928"></a>00928     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00929"></a>00929     <span class="keywordflow">if</span> (!ok) {
<a name="l00930"></a>00930         <span class="keywordflow">return</span>;
<a name="l00931"></a>00931     }
<a name="l00932"></a>00932     <span class="comment">// inform the user about deprecated values</span>
<a name="l00933"></a>00933     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> position = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aedb2f129c132230d40119f4d6d10ed53">SUMO_ATTR_POSITION</a>,
<a name="l00934"></a>00934             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00935"></a>00935     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>)
<a name="l00936"></a>00936             &amp;&amp; !<a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a>) {
<a name="l00937"></a>00937         <a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a> = <span class="keyword">true</span>;
<a name="l00938"></a>00938         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l00939"></a>00939                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated, use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>) + <span class="stringliteral">&quot;&#39; instead.&quot;</span>);
<a name="l00940"></a>00940     }
<a name="l00941"></a>00941     <span class="keywordtype">bool</span> friendlyPos =
<a name="l00942"></a>00942             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) ?
<a name="l00943"></a>00943                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(
<a name="l00944"></a>00944                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l00945"></a>00945                             <span class="keyword">false</span>) :
<a name="l00946"></a>00946                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>,
<a name="l00947"></a>00947                             <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">false</span>);
<a name="l00948"></a>00948     std::string lane = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00949"></a>00949     std::string file = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a33ec524d2a7432aad949132a6656f460">SUMO_ATTR_FILE</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00950"></a>00950     <span class="keywordflow">if</span> (!ok) {
<a name="l00951"></a>00951         <span class="keywordflow">return</span>;
<a name="l00952"></a>00952     }
<a name="l00953"></a>00953     <span class="keywordflow">try</span> {
<a name="l00954"></a>00954         <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#aa2aaa6c2004c8076202b5db897e446b4" title="Builds an instantenous induction and adds it to the net.">buildInstantInductLoop</a>(<span class="keywordtype">id</span>, lane, position,
<a name="l00955"></a>00955                 <a class="code" href="../../de/da0/class_output_device.html#a235c99951018d43e355900697460188b" title="Returns the described OutputDevice.">OutputDevice::getDevice</a>(file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>()), friendlyPos);
<a name="l00956"></a>00956     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00957"></a>00957         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00958"></a>00958     } <span class="keywordflow">catch</span> (<a class="code" href="../../db/dcb/class_i_o_error.html">IOError</a>&amp; e) {
<a name="l00959"></a>00959         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00960"></a>00960     }
<a name="l00961"></a>00961 }
<a name="l00962"></a>00962 
<a name="l00963"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a4f4426c1381ef11f45bdf54a5e5d130a">00963</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a4f4426c1381ef11f45bdf54a5e5d130a" title="Builds a vtype-detector using the given specification.">NLHandler::addVTypeProbeDetector</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00964"></a>00964     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00965"></a>00965     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00966"></a>00966     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> frequency = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a980d00056b5a53301ffc1a3e4468e90d">SUMO_ATTR_FREQUENCY</a>,
<a name="l00967"></a>00967             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00968"></a>00968     std::string type = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a7d81012d38b65b66075c1235b7a8fab3" title="Returns the string-value of the named (by its enum-value) attribute.">getStringSecure</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac2d51057ec185c633d66ac68e3ddbb7c">SUMO_ATTR_TYPE</a>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00969"></a>00969     std::string file = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a33ec524d2a7432aad949132a6656f460">SUMO_ATTR_FILE</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00970"></a>00970     <span class="keywordflow">if</span> (!ok) {
<a name="l00971"></a>00971         <span class="keywordflow">return</span>;
<a name="l00972"></a>00972     }
<a name="l00973"></a>00973     <span class="keywordflow">try</span> {
<a name="l00974"></a>00974         <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#aae1cf7e00da8cc5ba8481407a42e0d78" title="Builds a vTypeProbe and adds it to the net.">buildVTypeProbe</a>(<span class="keywordtype">id</span>, type, frequency,
<a name="l00975"></a>00975                 <a class="code" href="../../de/da0/class_output_device.html#a235c99951018d43e355900697460188b" title="Returns the described OutputDevice.">OutputDevice::getDevice</a>(file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>()));
<a name="l00976"></a>00976     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00977"></a>00977         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00978"></a>00978     } <span class="keywordflow">catch</span> (<a class="code" href="../../db/dcb/class_i_o_error.html">IOError</a>&amp; e) {
<a name="l00979"></a>00979         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l00980"></a>00980     }
<a name="l00981"></a>00981 }
<a name="l00982"></a>00982 
<a name="l00983"></a><a class="code" href="../../da/d57/class_n_l_handler.html#af1ab26b10d9bd21779ac2fbd9ef7a8f8">00983</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#af1ab26b10d9bd21779ac2fbd9ef7a8f8" title="Builds a routeprobe-detector using the given specification.">NLHandler::addRouteProbeDetector</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00984"></a>00984     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00985"></a>00985     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00986"></a>00986     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> frequency = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a980d00056b5a53301ffc1a3e4468e90d">SUMO_ATTR_FREQUENCY</a>,
<a name="l00987"></a>00987             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00988"></a>00988     <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> begin = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a533632d56a5981854a4cb4e5a32d816a">SUMO_ATTR_BEGIN</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l00989"></a>00989             ok, -1);
<a name="l00990"></a>00990     std::string edge = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a3839c49f278aa3d011edc117e4217f84">SUMO_ATTR_EDGE</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00991"></a>00991     std::string file = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a33ec524d2a7432aad949132a6656f460">SUMO_ATTR_FILE</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00992"></a>00992     <span class="keywordflow">if</span> (!ok) {
<a name="l00993"></a>00993         <span class="keywordflow">return</span>;
<a name="l00994"></a>00994     }
<a name="l00995"></a>00995     <span class="keywordflow">try</span> {
<a name="l00996"></a>00996         <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a618931a4cab131b0ee87d6f8a9987a33" title="Builds a routeprobe and adds it to the net.">buildRouteProbe</a>(<span class="keywordtype">id</span>, edge, frequency, begin,
<a name="l00997"></a>00997                 <a class="code" href="../../de/da0/class_output_device.html#a235c99951018d43e355900697460188b" title="Returns the described OutputDevice.">OutputDevice::getDevice</a>(file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>()));
<a name="l00998"></a>00998     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l00999"></a>00999         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01000"></a>01000     } <span class="keywordflow">catch</span> (<a class="code" href="../../db/dcb/class_i_o_error.html">IOError</a>&amp; e) {
<a name="l01001"></a>01001         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01002"></a>01002     }
<a name="l01003"></a>01003 }
<a name="l01004"></a>01004 
<a name="l01005"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a1963f7161920d4d6bdd6984fb7df358f">01005</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a1963f7161920d4d6bdd6984fb7df358f" title="Builds an e2 detector using the given specification.">NLHandler::addE2Detector</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l01006"></a>01006     <span class="comment">// check whether this is a detector connected to a tls an optionally to a link</span>
<a name="l01007"></a>01007     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01008"></a>01008     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l01009"></a>01009     std::string lsaid = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacca1fc077d594feb29657bd723aea2b">SUMO_ATTR_TLID</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l01010"></a>01010             ok, <span class="stringliteral">&quot;&lt;invalid&gt;&quot;</span>);
<a name="l01011"></a>01011     std::string toLane = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9c30cf894facbcdf6956d4e37c994538">SUMO_ATTR_TO</a>, <span class="keywordtype">id</span>.c_str(),
<a name="l01012"></a>01012             ok, <span class="stringliteral">&quot;&lt;invalid&gt;&quot;</span>);
<a name="l01013"></a>01013     <span class="comment">//</span>
<a name="l01014"></a>01014     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacc9a012062e93ff2a1cc7da3e04f867">SUMO_ATTR_HALTING_TIME_THRESHOLD__DEPRECATED</a>)) {
<a name="l01015"></a>01015         <a class="code" href="../../da/d57/class_n_l_handler.html#a28477bbf94e8fcc011de2cdb7cfc39f3">myHaveWarnedAboutDeprecatedTimeThreshold</a> = <span class="keyword">true</span>;
<a name="l01016"></a>01016         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01017"></a>01017                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacc9a012062e93ff2a1cc7da3e04f867">SUMO_ATTR_HALTING_TIME_THRESHOLD__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a62c72c489f900c613f19200111393f2e">SUMO_ATTR_HALTING_TIME_THRESHOLD</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01018"></a>01018     }
<a name="l01019"></a>01019     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a36c110416229cf140ee08ef8a977e614">SUMO_ATTR_HALTING_SPEED_THRESHOLD__DEPRECATED</a>)) {
<a name="l01020"></a>01020         <a class="code" href="../../da/d57/class_n_l_handler.html#a523c341b77bf7d0b7975871e00b16b9a">myHaveWarnedAboutDeprecatedSpeedThreshold</a> = <span class="keyword">true</span>;
<a name="l01021"></a>01021         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01022"></a>01022                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a36c110416229cf140ee08ef8a977e614">SUMO_ATTR_HALTING_SPEED_THRESHOLD__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9801c72ba0dec6c303c3d256f98df869">SUMO_ATTR_HALTING_SPEED_THRESHOLD</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01023"></a>01023     }
<a name="l01024"></a>01024     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a259036800d8418ddbdb746826616c493">SUMO_ATTR_JAM_DIST_THRESHOLD__DEPRECATED</a>)) {
<a name="l01025"></a>01025         <a class="code" href="../../da/d57/class_n_l_handler.html#ae1a02e1545452633d2411a590c1e0138">myHaveWarnedAboutDeprecatedJamDistThreshold</a> = <span class="keyword">true</span>;
<a name="l01026"></a>01026         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01027"></a>01027                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a259036800d8418ddbdb746826616c493">SUMO_ATTR_JAM_DIST_THRESHOLD__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a3b11d22c04d1e1691f91ccfe4d02dee9">SUMO_ATTR_JAM_DIST_THRESHOLD</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01028"></a>01028     }
<a name="l01029"></a>01029     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>)
<a name="l01030"></a>01030             &amp;&amp; !<a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a>) {
<a name="l01031"></a>01031         <a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a> = <span class="keyword">true</span>;
<a name="l01032"></a>01032         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01033"></a>01033                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01034"></a>01034     }
<a name="l01035"></a>01035 
<a name="l01036"></a>01036     <span class="keyword">const</span> <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> haltingTimeThreshold =
<a name="l01037"></a>01037             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacc9a012062e93ff2a1cc7da3e04f867">SUMO_ATTR_HALTING_TIME_THRESHOLD__DEPRECATED</a>) ?
<a name="l01038"></a>01038                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(
<a name="l01039"></a>01039                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacc9a012062e93ff2a1cc7da3e04f867">SUMO_ATTR_HALTING_TIME_THRESHOLD__DEPRECATED</a>,
<a name="l01040"></a>01040                             <span class="keywordtype">id</span>.c_str(), ok, <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ac685f1ff371bcd4d294780fde36d2f8f">TIME2STEPS</a>(1)) :
<a name="l01041"></a>01041                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(
<a name="l01042"></a>01042                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a62c72c489f900c613f19200111393f2e">SUMO_ATTR_HALTING_TIME_THRESHOLD</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l01043"></a>01043                             <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ac685f1ff371bcd4d294780fde36d2f8f">TIME2STEPS</a>(1));
<a name="l01044"></a>01044     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> haltingSpeedThreshold =
<a name="l01045"></a>01045             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a36c110416229cf140ee08ef8a977e614">SUMO_ATTR_HALTING_SPEED_THRESHOLD__DEPRECATED</a>) ?
<a name="l01046"></a>01046                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(
<a name="l01047"></a>01047                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a36c110416229cf140ee08ef8a977e614">SUMO_ATTR_HALTING_SPEED_THRESHOLD__DEPRECATED</a>,
<a name="l01048"></a>01048                             <span class="keywordtype">id</span>.c_str(), ok, 5.0f / 3.6f) :
<a name="l01049"></a>01049                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(
<a name="l01050"></a>01050                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9801c72ba0dec6c303c3d256f98df869">SUMO_ATTR_HALTING_SPEED_THRESHOLD</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l01051"></a>01051                             5.0f / 3.6f);
<a name="l01052"></a>01052     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> jamDistThreshold =
<a name="l01053"></a>01053             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a259036800d8418ddbdb746826616c493">SUMO_ATTR_JAM_DIST_THRESHOLD__DEPRECATED</a>) ?
<a name="l01054"></a>01054                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(
<a name="l01055"></a>01055                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a259036800d8418ddbdb746826616c493">SUMO_ATTR_JAM_DIST_THRESHOLD__DEPRECATED</a>,
<a name="l01056"></a>01056                             <span class="keywordtype">id</span>.c_str(), ok, 10.0f) :
<a name="l01057"></a>01057                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a3b11d22c04d1e1691f91ccfe4d02dee9">SUMO_ATTR_JAM_DIST_THRESHOLD</a>,
<a name="l01058"></a>01058                             <span class="keywordtype">id</span>.c_str(), ok, 10.0f);
<a name="l01059"></a>01059     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> position = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aedb2f129c132230d40119f4d6d10ed53">SUMO_ATTR_POSITION</a>,
<a name="l01060"></a>01060             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l01061"></a>01061     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> length = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac5b13bfcb8d3ef18e937978f66d14933">SUMO_ATTR_LENGTH</a>,
<a name="l01062"></a>01062             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l01063"></a>01063     <span class="keyword">const</span> <span class="keywordtype">bool</span> friendlyPos =
<a name="l01064"></a>01064             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) ?
<a name="l01065"></a>01065                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(
<a name="l01066"></a>01066                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l01067"></a>01067                             <span class="keyword">false</span>) :
<a name="l01068"></a>01068                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>,
<a name="l01069"></a>01069                             <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">false</span>);
<a name="l01070"></a>01070     <span class="keyword">const</span> <span class="keywordtype">bool</span> cont = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a13d6001f9e7394ba8dd9be10752670a2" title="Information whether the detector shall be continued on the folowing lanes.">SUMO_ATTR_CONT</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l01071"></a>01071             <span class="keyword">false</span>);
<a name="l01072"></a>01072     <span class="keyword">const</span> std::string lane = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>,
<a name="l01073"></a>01073             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l01074"></a>01074     <span class="keyword">const</span> std::string file = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a33ec524d2a7432aad949132a6656f460">SUMO_ATTR_FILE</a>,
<a name="l01075"></a>01075             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l01076"></a>01076     <span class="keywordflow">if</span> (!ok) {
<a name="l01077"></a>01077         <span class="keywordflow">return</span>;
<a name="l01078"></a>01078     }
<a name="l01079"></a>01079     <span class="keywordflow">try</span> {
<a name="l01080"></a>01080         <span class="keywordflow">if</span> (lsaid != <span class="stringliteral">&quot;&lt;invalid&gt;&quot;</span>) {
<a name="l01081"></a>01081             <span class="keywordflow">if</span> (toLane == <span class="stringliteral">&quot;&lt;invalid&gt;&quot;</span>) {
<a name="l01082"></a>01082                 <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#afe65de0465bdc47ceabdbede2af5ee04" title="Builds an e2 detector with a fixed interval and adds it to the net.">buildE2Detector</a>(<span class="keywordtype">id</span>, lane, position, length,
<a name="l01083"></a>01083                         cont, <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#aa38813ac660883571d477fdd2eb4c353" title="Returns a previously build tls logic.">getTLLogic</a>(lsaid),
<a name="l01084"></a>01084                         <a class="code" href="../../de/da0/class_output_device.html#a235c99951018d43e355900697460188b" title="Returns the described OutputDevice.">OutputDevice::getDevice</a>(file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>()),
<a name="l01085"></a>01085                         haltingTimeThreshold, haltingSpeedThreshold,
<a name="l01086"></a>01086                         jamDistThreshold, friendlyPos);
<a name="l01087"></a>01087             } <span class="keywordflow">else</span> {
<a name="l01088"></a>01088                 <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#afe65de0465bdc47ceabdbede2af5ee04" title="Builds an e2 detector with a fixed interval and adds it to the net.">buildE2Detector</a>(<span class="keywordtype">id</span>, lane, position, length,
<a name="l01089"></a>01089                         cont, <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#aa38813ac660883571d477fdd2eb4c353" title="Returns a previously build tls logic.">getTLLogic</a>(lsaid),
<a name="l01090"></a>01090                         toLane, <a class="code" href="../../de/da0/class_output_device.html#a235c99951018d43e355900697460188b" title="Returns the described OutputDevice.">OutputDevice::getDevice</a>(file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>()),
<a name="l01091"></a>01091                         haltingTimeThreshold, haltingSpeedThreshold,
<a name="l01092"></a>01092                         jamDistThreshold, friendlyPos);
<a name="l01093"></a>01093             }
<a name="l01094"></a>01094         } <span class="keywordflow">else</span> {
<a name="l01095"></a>01095             <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01096"></a>01096             <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> frequency = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a980d00056b5a53301ffc1a3e4468e90d">SUMO_ATTR_FREQUENCY</a>,
<a name="l01097"></a>01097                     <span class="keywordtype">id</span>.c_str(), ok);
<a name="l01098"></a>01098             <span class="keywordflow">if</span> (!ok) {
<a name="l01099"></a>01099                 <span class="keywordflow">return</span>;
<a name="l01100"></a>01100             }
<a name="l01101"></a>01101             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#afe65de0465bdc47ceabdbede2af5ee04" title="Builds an e2 detector with a fixed interval and adds it to the net.">buildE2Detector</a>(<span class="keywordtype">id</span>, lane, position, length, cont,
<a name="l01102"></a>01102                     frequency, <a class="code" href="../../de/da0/class_output_device.html#a235c99951018d43e355900697460188b" title="Returns the described OutputDevice.">OutputDevice::getDevice</a>(file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>()),
<a name="l01103"></a>01103                     haltingTimeThreshold, haltingSpeedThreshold,
<a name="l01104"></a>01104                     jamDistThreshold, friendlyPos);
<a name="l01105"></a>01105         }
<a name="l01106"></a>01106     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l01107"></a>01107         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01108"></a>01108     } <span class="keywordflow">catch</span> (<a class="code" href="../../db/dcb/class_i_o_error.html">IOError</a>&amp; e) {
<a name="l01109"></a>01109         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01110"></a>01110     }
<a name="l01111"></a>01111 }
<a name="l01112"></a>01112 
<a name="l01113"></a><a class="code" href="../../da/d57/class_n_l_handler.html#ad5cc7f3345a10f29d9184934cbeb5128">01113</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#ad5cc7f3345a10f29d9184934cbeb5128" title="Starts building of an e3 detector using the given specification.">NLHandler::beginE3Detector</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l01114"></a>01114     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01115"></a>01115     <span class="comment">// inform the user about deprecated values</span>
<a name="l01116"></a>01116     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l01117"></a>01117     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacc9a012062e93ff2a1cc7da3e04f867">SUMO_ATTR_HALTING_TIME_THRESHOLD__DEPRECATED</a>)) {
<a name="l01118"></a>01118         <a class="code" href="../../da/d57/class_n_l_handler.html#a28477bbf94e8fcc011de2cdb7cfc39f3">myHaveWarnedAboutDeprecatedTimeThreshold</a> = <span class="keyword">true</span>;
<a name="l01119"></a>01119         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01120"></a>01120                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacc9a012062e93ff2a1cc7da3e04f867">SUMO_ATTR_HALTING_TIME_THRESHOLD__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a62c72c489f900c613f19200111393f2e">SUMO_ATTR_HALTING_TIME_THRESHOLD</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01121"></a>01121     }
<a name="l01122"></a>01122     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a36c110416229cf140ee08ef8a977e614">SUMO_ATTR_HALTING_SPEED_THRESHOLD__DEPRECATED</a>)) {
<a name="l01123"></a>01123         <a class="code" href="../../da/d57/class_n_l_handler.html#a523c341b77bf7d0b7975871e00b16b9a">myHaveWarnedAboutDeprecatedSpeedThreshold</a> = <span class="keyword">true</span>;
<a name="l01124"></a>01124         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01125"></a>01125                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a36c110416229cf140ee08ef8a977e614">SUMO_ATTR_HALTING_SPEED_THRESHOLD__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9801c72ba0dec6c303c3d256f98df869">SUMO_ATTR_HALTING_SPEED_THRESHOLD</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01126"></a>01126     }
<a name="l01127"></a>01127 
<a name="l01128"></a>01128     <span class="keyword">const</span> <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> frequency = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a980d00056b5a53301ffc1a3e4468e90d">SUMO_ATTR_FREQUENCY</a>,
<a name="l01129"></a>01129             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l01130"></a>01130     <span class="keyword">const</span> <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> haltingTimeThreshold =
<a name="l01131"></a>01131             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacc9a012062e93ff2a1cc7da3e04f867">SUMO_ATTR_HALTING_TIME_THRESHOLD__DEPRECATED</a>) ?
<a name="l01132"></a>01132                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(
<a name="l01133"></a>01133                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacc9a012062e93ff2a1cc7da3e04f867">SUMO_ATTR_HALTING_TIME_THRESHOLD__DEPRECATED</a>,
<a name="l01134"></a>01134                             <span class="keywordtype">id</span>.c_str(), ok, <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ac685f1ff371bcd4d294780fde36d2f8f">TIME2STEPS</a>(1)) :
<a name="l01135"></a>01135                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(
<a name="l01136"></a>01136                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a62c72c489f900c613f19200111393f2e">SUMO_ATTR_HALTING_TIME_THRESHOLD</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l01137"></a>01137                             <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ac685f1ff371bcd4d294780fde36d2f8f">TIME2STEPS</a>(1));
<a name="l01138"></a>01138     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> haltingSpeedThreshold =
<a name="l01139"></a>01139             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a36c110416229cf140ee08ef8a977e614">SUMO_ATTR_HALTING_SPEED_THRESHOLD__DEPRECATED</a>) ?
<a name="l01140"></a>01140                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(
<a name="l01141"></a>01141                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a36c110416229cf140ee08ef8a977e614">SUMO_ATTR_HALTING_SPEED_THRESHOLD__DEPRECATED</a>,
<a name="l01142"></a>01142                             <span class="keywordtype">id</span>.c_str(), ok, 5.0f / 3.6f) :
<a name="l01143"></a>01143                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(
<a name="l01144"></a>01144                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9801c72ba0dec6c303c3d256f98df869">SUMO_ATTR_HALTING_SPEED_THRESHOLD</a>, <span class="keywordtype">id</span>.c_str(), ok,
<a name="l01145"></a>01145                             5.0f / 3.6f);
<a name="l01146"></a>01146     <span class="keyword">const</span> std::string file = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a33ec524d2a7432aad949132a6656f460">SUMO_ATTR_FILE</a>,
<a name="l01147"></a>01147             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l01148"></a>01148     <span class="keywordflow">if</span> (!ok) {
<a name="l01149"></a>01149         <span class="keywordflow">return</span>;
<a name="l01150"></a>01150     }
<a name="l01151"></a>01151     <span class="keywordflow">try</span> {
<a name="l01152"></a>01152         <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a66b858995533b827b42410aa49fd0619" title="Stores temporary the initial information about an e3 detector to build.">beginE3Detector</a>(<span class="keywordtype">id</span>,
<a name="l01153"></a>01153                 <a class="code" href="../../de/da0/class_output_device.html#a235c99951018d43e355900697460188b" title="Returns the described OutputDevice.">OutputDevice::getDevice</a>(file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>()), frequency,
<a name="l01154"></a>01154                 haltingSpeedThreshold, haltingTimeThreshold);
<a name="l01155"></a>01155     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l01156"></a>01156         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01157"></a>01157     } <span class="keywordflow">catch</span> (<a class="code" href="../../db/dcb/class_i_o_error.html">IOError</a>&amp; e) {
<a name="l01158"></a>01158         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01159"></a>01159     }
<a name="l01160"></a>01160 }
<a name="l01161"></a>01161 
<a name="l01162"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a2aeabca6e73d3e23b0987d5653b4b001">01162</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a2aeabca6e73d3e23b0987d5653b4b001" title="Adds an entry to the currently processed e3 detector.">NLHandler::addE3Entry</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l01163"></a>01163     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01164"></a>01164     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>)
<a name="l01165"></a>01165             &amp;&amp; !<a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a>) {
<a name="l01166"></a>01166         <a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a> = <span class="keyword">true</span>;
<a name="l01167"></a>01167         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01168"></a>01168                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated, use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>) + <span class="stringliteral">&quot;&#39; instead.&quot;</span>);
<a name="l01169"></a>01169     }
<a name="l01170"></a>01170     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> position = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aedb2f129c132230d40119f4d6d10ed53">SUMO_ATTR_POSITION</a>,
<a name="l01171"></a>01171             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a6555ff0f2d4dbfab59330369ddb50b10" title="Returns the id of the currently built e3 detector.">getCurrentE3ID</a>().c_str(), ok);
<a name="l01172"></a>01172     <span class="keyword">const</span> <span class="keywordtype">bool</span> friendlyPos =
<a name="l01173"></a>01173             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) ?
<a name="l01174"></a>01174                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(
<a name="l01175"></a>01175                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>,
<a name="l01176"></a>01176                             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a6555ff0f2d4dbfab59330369ddb50b10" title="Returns the id of the currently built e3 detector.">getCurrentE3ID</a>().c_str(), ok,
<a name="l01177"></a>01177                             <span class="keyword">false</span>) :
<a name="l01178"></a>01178                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>,
<a name="l01179"></a>01179                             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a6555ff0f2d4dbfab59330369ddb50b10" title="Returns the id of the currently built e3 detector.">getCurrentE3ID</a>().c_str(), ok,
<a name="l01180"></a>01180                             <span class="keyword">false</span>);
<a name="l01181"></a>01181     <span class="keyword">const</span> std::string lane = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>,
<a name="l01182"></a>01182             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a6555ff0f2d4dbfab59330369ddb50b10" title="Returns the id of the currently built e3 detector.">getCurrentE3ID</a>().c_str(), ok);
<a name="l01183"></a>01183     <span class="keywordflow">if</span> (!ok) {
<a name="l01184"></a>01184         <span class="keywordflow">return</span>;
<a name="l01185"></a>01185     }
<a name="l01186"></a>01186     <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#aedd2cba68df3b35a3b65be12d32c62b3" title="Builds an entry point of an e3 detector.">addE3Entry</a>(lane, position, friendlyPos);
<a name="l01187"></a>01187 }
<a name="l01188"></a>01188 
<a name="l01189"></a><a class="code" href="../../da/d57/class_n_l_handler.html#ad2b499413c7d71025b32f9ad553c0e74">01189</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#ad2b499413c7d71025b32f9ad553c0e74" title="Adds an exit to the currently processed e3 detector.">NLHandler::addE3Exit</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l01190"></a>01190     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01191"></a>01191     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> position = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aedb2f129c132230d40119f4d6d10ed53">SUMO_ATTR_POSITION</a>,
<a name="l01192"></a>01192             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a6555ff0f2d4dbfab59330369ddb50b10" title="Returns the id of the currently built e3 detector.">getCurrentE3ID</a>().c_str(), ok);
<a name="l01193"></a>01193     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>)
<a name="l01194"></a>01194             &amp;&amp; !<a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a>) {
<a name="l01195"></a>01195         <a class="code" href="../../d7/df0/class_m_s_route_handler.html#a56a9abd87f37166e147cdddb57442813">myHaveWarnedAboutDeprecatedFriendlyPos</a> = <span class="keyword">true</span>;
<a name="l01196"></a>01196         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01197"></a>01197                 <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated, use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>) + <span class="stringliteral">&quot;&#39; instead.&quot;</span>);
<a name="l01198"></a>01198     }
<a name="l01199"></a>01199     <span class="keyword">const</span> <span class="keywordtype">bool</span> friendlyPos =
<a name="l01200"></a>01200             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>) ?
<a name="l01201"></a>01201                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(
<a name="l01202"></a>01202                             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae8e17fd4e6e7703c5efec71c14bcebf6">SUMO_ATTR_FRIENDLY_POS__DEPRECATED</a>,
<a name="l01203"></a>01203                             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a6555ff0f2d4dbfab59330369ddb50b10" title="Returns the id of the currently built e3 detector.">getCurrentE3ID</a>().c_str(), ok,
<a name="l01204"></a>01204                             <span class="keyword">false</span>) :
<a name="l01205"></a>01205                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab838fae782facd040295771c3556e751">SUMO_ATTR_FRIENDLY_POS</a>,
<a name="l01206"></a>01206                             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a6555ff0f2d4dbfab59330369ddb50b10" title="Returns the id of the currently built e3 detector.">getCurrentE3ID</a>().c_str(), ok,
<a name="l01207"></a>01207                             <span class="keyword">false</span>);
<a name="l01208"></a>01208     <span class="keyword">const</span> std::string lane = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>,
<a name="l01209"></a>01209             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a6555ff0f2d4dbfab59330369ddb50b10" title="Returns the id of the currently built e3 detector.">getCurrentE3ID</a>().c_str(), ok);
<a name="l01210"></a>01210     <span class="keywordflow">if</span> (!ok) {
<a name="l01211"></a>01211         <span class="keywordflow">return</span>;
<a name="l01212"></a>01212     }
<a name="l01213"></a>01213     <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a87aae82118d8731bd68b8c8ef7f088ea" title="Builds an exit point of an e3 detector.">addE3Exit</a>(lane, position, friendlyPos);
<a name="l01214"></a>01214 }
<a name="l01215"></a>01215 
<a name="l01216"></a><a class="code" href="../../da/d57/class_n_l_handler.html#af270a2c5b22fe8a3e02e65305e7e30ef">01216</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#af270a2c5b22fe8a3e02e65305e7e30ef" title="Builds edge or lane base mean data collector using the given specification.">NLHandler::addEdgeLaneMeanData</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs,
<a name="l01217"></a>01217         <span class="keywordtype">int</span> objecttype) {
<a name="l01218"></a>01218     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01219"></a>01219     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l01220"></a>01220     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> maxTravelTime = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(
<a name="l01221"></a>01221             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a85509b1424163d21d1756c85206eddb3">SUMO_ATTR_MAX_TRAVELTIME</a>, <span class="keywordtype">id</span>.c_str(), ok, 100000);
<a name="l01222"></a>01222     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> minSamples = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(
<a name="l01223"></a>01223             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac04af1ff38041301d0188b453e6561a2">SUMO_ATTR_MIN_SAMPLES</a>, <span class="keywordtype">id</span>.c_str(), ok, 0);
<a name="l01224"></a>01224     <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> haltingSpeedThreshold = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(
<a name="l01225"></a>01225             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9801c72ba0dec6c303c3d256f98df869">SUMO_ATTR_HALTING_SPEED_THRESHOLD</a>, <span class="keywordtype">id</span>.c_str(), ok, <a class="code" href="../../db/d16/config_8h.html#af94afeb21356793ecd34d4b7bef68d50">POSITION_EPS</a>);
<a name="l01226"></a>01226     <span class="keyword">const</span> <span class="keywordtype">bool</span> excludeEmpty = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96afbf85140f61490637e10566b77f867be">SUMO_ATTR_EXCLUDE_EMPTY</a>,
<a name="l01227"></a>01227             <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">false</span>);
<a name="l01228"></a>01228     <span class="keyword">const</span> <span class="keywordtype">bool</span> withInternal = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a5623a46a12093d08a7088522717516ba">SUMO_ATTR_WITH_INTERNAL</a>,
<a name="l01229"></a>01229             <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">false</span>);
<a name="l01230"></a>01230     <span class="keyword">const</span> <span class="keywordtype">bool</span> trackVehicles = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a565ee2fcaeb1b815907eed8e32a1bf4e" title="Tries to read given attribute assuming it is a boolean.">getOptBoolReporting</a>(
<a name="l01231"></a>01231             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a40cf21baa2ea5ad6bb96295b9f1bb560">SUMO_ATTR_TRACK_VEHICLES</a>, <span class="keywordtype">id</span>.c_str(), ok, <span class="keyword">false</span>);
<a name="l01232"></a>01232     <span class="keyword">const</span> std::string file = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a33ec524d2a7432aad949132a6656f460">SUMO_ATTR_FILE</a>,
<a name="l01233"></a>01233             <span class="keywordtype">id</span>.c_str(), ok);
<a name="l01234"></a>01234     <span class="keyword">const</span> std::string type = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac2d51057ec185c633d66ac68e3ddbb7c">SUMO_ATTR_TYPE</a>,
<a name="l01235"></a>01235             <span class="keywordtype">id</span>.c_str(), ok, <span class="stringliteral">&quot;performance&quot;</span>);
<a name="l01236"></a>01236     std::string vtypes = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a727c488a0ddf025b93d7f266b57bfa1a">SUMO_ATTR_VTYPES</a>,
<a name="l01237"></a>01237             <span class="keywordtype">id</span>.c_str(), ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l01238"></a>01238     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aa045488e698fc5cdadb6aeef890c7c64">SUMO_ATTR_VTYPES__DEPRECATED</a>)) {
<a name="l01239"></a>01239         vtypes = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aa045488e698fc5cdadb6aeef890c7c64">SUMO_ATTR_VTYPES__DEPRECATED</a>,
<a name="l01240"></a>01240                 <span class="keywordtype">id</span>.c_str(), ok);
<a name="l01241"></a>01241         <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a403fa2aa9b91c33999e403f747529d6d">myHaveWarnedAboutDeprecatedVTypes</a>) {
<a name="l01242"></a>01242             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01243"></a>01243                     <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aa045488e698fc5cdadb6aeef890c7c64">SUMO_ATTR_VTYPES__DEPRECATED</a>) + <span class="stringliteral">&quot; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a727c488a0ddf025b93d7f266b57bfa1a">SUMO_ATTR_VTYPES</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01244"></a>01244             <a class="code" href="../../da/d57/class_n_l_handler.html#a403fa2aa9b91c33999e403f747529d6d">myHaveWarnedAboutDeprecatedVTypes</a> = <span class="keyword">true</span>;
<a name="l01245"></a>01245         }
<a name="l01246"></a>01246     }
<a name="l01247"></a>01247     <span class="keyword">const</span> <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> frequency = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(
<a name="l01248"></a>01248             <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a980d00056b5a53301ffc1a3e4468e90d">SUMO_ATTR_FREQUENCY</a>, <span class="keywordtype">id</span>.c_str(), ok, -1);
<a name="l01249"></a>01249     <span class="keyword">const</span> <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> begin = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a533632d56a5981854a4cb4e5a32d816a">SUMO_ATTR_BEGIN</a>,
<a name="l01250"></a>01250             <span class="keywordtype">id</span>.c_str(), ok,
<a name="l01251"></a>01251             <a class="code" href="../../d6/d1f/_s_u_m_o_time_8cpp.html#a5d22214aa371f87d2d4ff1612411e632">string2time</a>(<a class="code" href="../../db/d31/class_options_cont.html#aeb57cb173789bce33943574837e6221c" title="Retrieves the options.">OptionsCont::getOptions</a>().getString(<span class="stringliteral">&quot;begin&quot;</span>)));
<a name="l01252"></a>01252     <span class="keyword">const</span> <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> end = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a86a6e60b2f342ff08721f29465e0fa50" title="Tries to read given attribute assuming it is a SUMOTime.">getOptSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9fdddf15eba27322118d801fa3217251">SUMO_ATTR_END</a>,
<a name="l01253"></a>01253             <span class="keywordtype">id</span>.c_str(), ok,
<a name="l01254"></a>01254             <a class="code" href="../../d6/d1f/_s_u_m_o_time_8cpp.html#a5d22214aa371f87d2d4ff1612411e632">string2time</a>(<a class="code" href="../../db/d31/class_options_cont.html#aeb57cb173789bce33943574837e6221c" title="Retrieves the options.">OptionsCont::getOptions</a>().getString(<span class="stringliteral">&quot;end&quot;</span>)));
<a name="l01255"></a>01255     <span class="keywordflow">if</span> (!ok) {
<a name="l01256"></a>01256         <span class="keywordflow">return</span>;
<a name="l01257"></a>01257     }
<a name="l01258"></a>01258     <span class="keywordflow">try</span> {
<a name="l01259"></a>01259         <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#ac355234dfde486ace4c2f30d56891dff" title="Creates edge based mean data collector using the given specification.">createEdgeLaneMeanData</a>(<span class="keywordtype">id</span>, frequency, begin, end,
<a name="l01260"></a>01260                 type, objecttype == <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba503a1d667a41f182031d73936767bd7e">SUMO_TAG_MEANDATA_LANE</a>, !excludeEmpty,
<a name="l01261"></a>01261                 withInternal, trackVehicles, maxTravelTime, minSamples,
<a name="l01262"></a>01262                 haltingSpeedThreshold, vtypes,
<a name="l01263"></a>01263                 <a class="code" href="../../de/da0/class_output_device.html#a235c99951018d43e355900697460188b" title="Returns the described OutputDevice.">OutputDevice::getDevice</a>(file, <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#a1f77121dce3632bf4642ff0eba72ce04" title="returns the current file name">getFileName</a>()));
<a name="l01264"></a>01264     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l01265"></a>01265         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01266"></a>01266     } <span class="keywordflow">catch</span> (<a class="code" href="../../db/dcb/class_i_o_error.html">IOError</a>&amp; e) {
<a name="l01267"></a>01267         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01268"></a>01268     }
<a name="l01269"></a>01269 }
<a name="l01270"></a>01270 
<a name="l01271"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a9e555153c4573186a23ee00388b70af2">01271</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a9e555153c4573186a23ee00388b70af2" title="opens the container of succeeding lanes for processing (deprecated, see addConnection))...">NLHandler::openSucc</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l01272"></a>01272     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01273"></a>01273     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>, 0, ok);
<a name="l01274"></a>01274     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de7/class_m_s_globals.html#afab897d0ff315c0853f3dfad1b617d8a" title="Information whether the simulation regards internal lanes.">MSGlobals::gUsingInternalLanes</a> &amp;&amp; <span class="keywordtype">id</span>[0] == <span class="charliteral">&#39;:&#39;</span>) {
<a name="l01275"></a>01275         <a class="code" href="../../da/d57/class_n_l_handler.html#a860058d06347bed9cbcd5acb6c9eb6bd" title="Information whether the currently parsed edge is internal and not wished, here.">myCurrentIsInternalToSkip</a> = <span class="keyword">true</span>;
<a name="l01276"></a>01276         <span class="keywordflow">return</span>;
<a name="l01277"></a>01277     }
<a name="l01278"></a>01278     <a class="code" href="../../da/d57/class_n_l_handler.html#a860058d06347bed9cbcd5acb6c9eb6bd" title="Information whether the currently parsed edge is internal and not wished, here.">myCurrentIsInternalToSkip</a> = <span class="keyword">false</span>;
<a name="l01279"></a>01279     <a class="code" href="../../da/d57/class_n_l_handler.html#ae9256f8b08f5cc63ab31086cc64077e6" title="The lane-to-lane connections builder to use.">mySucceedingLaneBuilder</a>.<a class="code" href="../../d5/d47/class_n_l_succeeding_lane_builder.html#a6e3b86626e43acc4e9023d704bf33b3a" title="Begins the computation of a container holding the succeeding lanes of a lane.">openSuccLane</a>(<span class="keywordtype">id</span>);
<a name="l01280"></a>01280 }
<a name="l01281"></a>01281 
<a name="l01282"></a><a class="code" href="../../da/d57/class_n_l_handler.html#ae600ce9af72d281890bb8210d66befc6">01282</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#ae600ce9af72d281890bb8210d66befc6" title="adds a succeeding lane (deprecated, see addConnection)">NLHandler::addSuccLane</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l01283"></a>01283     <span class="comment">// do not process internal lanes if not wished</span>
<a name="l01284"></a>01284     <span class="keywordflow">if</span> (<a class="code" href="../../da/d57/class_n_l_handler.html#a860058d06347bed9cbcd5acb6c9eb6bd" title="Information whether the currently parsed edge is internal and not wished, here.">myCurrentIsInternalToSkip</a>) {
<a name="l01285"></a>01285         <span class="keywordflow">return</span>;
<a name="l01286"></a>01286     }
<a name="l01287"></a>01287     <span class="keywordflow">try</span> {
<a name="l01288"></a>01288         <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01289"></a>01289         <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> pass = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a986f27636b6a419b1e85e73e707edd88">SUMO_ATTR_PASS</a>, 0, ok,
<a name="l01290"></a>01290                 -1);
<a name="l01291"></a>01291         std::string lane = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>, 0, ok);
<a name="l01292"></a>01292         std::string dir = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae2627e7d3e30ec7b1732ad3e510a6a05" title="The abstract direction of a link.">SUMO_ATTR_DIR</a>, 0, ok);
<a name="l01293"></a>01293         std::string state = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96af22c84df27d5a3cc44cbb08231a29ba1" title="The state of a link.">SUMO_ATTR_STATE</a>, 0, ok);
<a name="l01294"></a>01294         std::string tlID = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacca1fc077d594feb29657bd723aea2b">SUMO_ATTR_TLID</a>, 0, ok,
<a name="l01295"></a>01295                 <span class="stringliteral">&quot;&quot;</span>);
<a name="l01296"></a>01296 <span class="preprocessor">#ifdef HAVE_INTERNAL_LANES</span>
<a name="l01297"></a>01297 <span class="preprocessor"></span>        std::string via = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a2ca1fa0c72e296452490a82ebbd2bf3d">SUMO_ATTR_VIA</a>, 0, ok, <span class="stringliteral">&quot;&quot;</span>);
<a name="l01298"></a>01298 <span class="preprocessor">#endif</span>
<a name="l01299"></a>01299 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (!ok) {
<a name="l01300"></a>01300             <span class="keywordflow">return</span>;
<a name="l01301"></a>01301         }
<a name="l01302"></a>01302         <span class="keywordflow">if</span> (tlID != <span class="stringliteral">&quot;&quot;</span>) {
<a name="l01303"></a>01303             <span class="keywordtype">int</span> linkNumber =
<a name="l01304"></a>01304                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae510086c383c13db996075db3d31eadb">SUMO_ATTR_TLLINKINDEX</a>) ?
<a name="l01305"></a>01305                             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa20314c8b11251d9d6d82566d6b34136" title="Tries to read given attribute assuming it is an int.">getIntReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae510086c383c13db996075db3d31eadb">SUMO_ATTR_TLLINKINDEX</a>, 0,
<a name="l01306"></a>01306                                     ok) :
<a name="l01307"></a>01307                             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa20314c8b11251d9d6d82566d6b34136" title="Tries to read given attribute assuming it is an int.">getIntReporting</a>(
<a name="l01308"></a>01308                                     <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab06706dd42c6b6bd6375daf26a38a8ad">SUMO_ATTR_TLLINKNO__DEPRECATED</a>, 0, ok);
<a name="l01309"></a>01309             <span class="keywordflow">if</span> (!ok) {
<a name="l01310"></a>01310                 <span class="keywordflow">return</span>;
<a name="l01311"></a>01311             }
<a name="l01312"></a>01312             <a class="code" href="../../da/d57/class_n_l_handler.html#ae9256f8b08f5cc63ab31086cc64077e6" title="The lane-to-lane connections builder to use.">mySucceedingLaneBuilder</a>.<a class="code" href="../../d5/d47/class_n_l_succeeding_lane_builder.html#a08755da9260706056a85c3ed0e5e7716" title="Adds a succeeding lane.">addSuccLane</a>(lane,
<a name="l01313"></a>01313 #ifdef <a class="code" href="../../db/d16/config_8h.html#ace8db5ae1f13c6d9eb8daab67f317bb9">HAVE_INTERNAL_LANES</a>
<a name="l01314"></a>01314                     via, pass,
<a name="l01315"></a>01315 #endif
<a name="l01316"></a>01316                     <a class="code" href="../../da/d57/class_n_l_handler.html#aed9715d222e6c6c649107050077dfa80" title="Parses the given character into an enumeration typed link direction.">parseLinkDir</a>(dir), <a class="code" href="../../da/d57/class_n_l_handler.html#ab5f15937f344b251404383deab0bc78f" title="Parses the given character into an enumeration typed link state.">parseLinkState</a>(state), tlID, linkNumber);
<a name="l01317"></a>01317         } <span class="keywordflow">else</span> {
<a name="l01318"></a>01318             <a class="code" href="../../da/d57/class_n_l_handler.html#ae9256f8b08f5cc63ab31086cc64077e6" title="The lane-to-lane connections builder to use.">mySucceedingLaneBuilder</a>.<a class="code" href="../../d5/d47/class_n_l_succeeding_lane_builder.html#a08755da9260706056a85c3ed0e5e7716" title="Adds a succeeding lane.">addSuccLane</a>(lane,
<a name="l01319"></a>01319 #ifdef <a class="code" href="../../db/d16/config_8h.html#ace8db5ae1f13c6d9eb8daab67f317bb9">HAVE_INTERNAL_LANES</a>
<a name="l01320"></a>01320                     via, pass,
<a name="l01321"></a>01321 #endif
<a name="l01322"></a>01322                     <a class="code" href="../../da/d57/class_n_l_handler.html#aed9715d222e6c6c649107050077dfa80" title="Parses the given character into an enumeration typed link direction.">parseLinkDir</a>(dir), <a class="code" href="../../da/d57/class_n_l_handler.html#ab5f15937f344b251404383deab0bc78f" title="Parses the given character into an enumeration typed link state.">parseLinkState</a>(state));
<a name="l01323"></a>01323         }
<a name="l01324"></a>01324     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l01325"></a>01325         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01326"></a>01326     }
<a name="l01327"></a>01327 }
<a name="l01328"></a>01328 
<a name="l01329"></a><a class="code" href="../../da/d57/class_n_l_handler.html#afb303581761c6bebdb10048728e232e5">01329</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#afb303581761c6bebdb10048728e232e5" title="adds a connection">NLHandler::addConnection</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l01330"></a>01330     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01331"></a>01331     std::string fromID = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9c3c947551970dae7f706c78ac9a7060">SUMO_ATTR_FROM</a>, 0, ok);
<a name="l01332"></a>01332     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de7/class_m_s_globals.html#afab897d0ff315c0853f3dfad1b617d8a" title="Information whether the simulation regards internal lanes.">MSGlobals::gUsingInternalLanes</a> &amp;&amp; fromID[0] == <span class="charliteral">&#39;:&#39;</span>) {
<a name="l01333"></a>01333         <span class="keywordflow">return</span>;
<a name="l01334"></a>01334     }
<a name="l01335"></a>01335 
<a name="l01336"></a>01336     <span class="keywordflow">try</span> {
<a name="l01337"></a>01337         <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01338"></a>01338         std::string toID = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9c30cf894facbcdf6956d4e37c994538">SUMO_ATTR_TO</a>, 0, ok);
<a name="l01339"></a>01339         std::string laneIndices;
<a name="l01340"></a>01340         <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>)) {
<a name="l01341"></a>01341             <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a7263ce6af6df465e5300c6f65413fdce">myHaveWarnedAboutDeprecatedLanes</a>) {
<a name="l01342"></a>01342                 <a class="code" href="../../da/d57/class_n_l_handler.html#a7263ce6af6df465e5300c6f65413fdce">myHaveWarnedAboutDeprecatedLanes</a> = <span class="keyword">true</span>;
<a name="l01343"></a>01343                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(
<a name="l01344"></a>01344                         <span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>) + <span class="stringliteral">&quot;&#39; is deprecated, please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a37932ca0c290cea5d6806ba3d6bd5ff0">SUMO_ATTR_FROM_LANE</a>) + <span class="stringliteral">&quot;&#39; and &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96abf87a8b2eadf42013451318d97c620ae">SUMO_ATTR_TO_LANE</a>) + <span class="stringliteral">&quot;&#39; instead.&quot;</span>);
<a name="l01345"></a>01345             }
<a name="l01346"></a>01346             laneIndices = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0c5bfe1cad71b317bd8330906c0dfa4e">SUMO_ATTR_LANE</a>, 0, ok);
<a name="l01347"></a>01347         } <span class="keywordflow">else</span> {
<a name="l01348"></a>01348             laneIndices = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a37932ca0c290cea5d6806ba3d6bd5ff0">SUMO_ATTR_FROM_LANE</a>, 0, ok)
<a name="l01349"></a>01349                     + <span class="stringliteral">&quot;:&quot;</span> + attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96abf87a8b2eadf42013451318d97c620ae">SUMO_ATTR_TO_LANE</a>, 0, ok);
<a name="l01350"></a>01350         }
<a name="l01351"></a>01351         <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#aa0b67dafb51a20429fabfa8d7a07d57e" title="The different directions a link between two lanes may take (or a stream between two...">LinkDirection</a> dir = <a class="code" href="../../da/d57/class_n_l_handler.html#aed9715d222e6c6c649107050077dfa80" title="Parses the given character into an enumeration typed link direction.">parseLinkDir</a>(
<a name="l01352"></a>01352                 attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae2627e7d3e30ec7b1732ad3e510a6a05" title="The abstract direction of a link.">SUMO_ATTR_DIR</a>, 0, ok));
<a name="l01353"></a>01353         <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#ab0033b911037fd995258d117e65461e0" title="The right-of-way state of a link between two lanes used when constructing a NBTrafficLightLogic...">LinkState</a> state = <a class="code" href="../../da/d57/class_n_l_handler.html#ab5f15937f344b251404383deab0bc78f" title="Parses the given character into an enumeration typed link state.">parseLinkState</a>(
<a name="l01354"></a>01354                 attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96af22c84df27d5a3cc44cbb08231a29ba1" title="The state of a link.">SUMO_ATTR_STATE</a>, 0, ok));
<a name="l01355"></a>01355         std::string tlID = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96aacca1fc077d594feb29657bd723aea2b">SUMO_ATTR_TLID</a>, 0, ok,
<a name="l01356"></a>01356                 <span class="stringliteral">&quot;&quot;</span>);
<a name="l01357"></a>01357 <span class="preprocessor">#ifdef HAVE_INTERNAL_LANES</span>
<a name="l01358"></a>01358 <span class="preprocessor"></span>        std::string viaID = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a532666e0ee347cad965e86e266b7b4fe" title="Tries to read given attribute assuming it is a string.">getOptStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a2ca1fa0c72e296452490a82ebbd2bf3d">SUMO_ATTR_VIA</a>, 0, ok,
<a name="l01359"></a>01359                 <span class="stringliteral">&quot;&quot;</span>);
<a name="l01360"></a>01360         <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> pass = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a986f27636b6a419b1e85e73e707edd88">SUMO_ATTR_PASS</a>, 0, ok,
<a name="l01361"></a>01361                 -1);
<a name="l01362"></a>01362 <span class="preprocessor">#endif</span>
<a name="l01363"></a>01363 <span class="preprocessor"></span>
<a name="l01364"></a>01364         <a class="code" href="../../d7/d27/class_m_s_edge.html" title="A road/street connecting two junctions.">MSEdge</a>* from = <a class="code" href="../../d7/d27/class_m_s_edge.html#ab193f7a67f12ca616305c36964e5aa00" title="Inserts edge into the static dictionary Returns true if the key id isn&amp;#39;t already...">MSEdge::dictionary</a>(fromID);
<a name="l01365"></a>01365         <span class="keywordflow">if</span> (from == 0) {
<a name="l01366"></a>01366             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;Unknown from-edge &#39;&quot;</span> + fromID + <span class="stringliteral">&quot;&#39; in connection&quot;</span>);
<a name="l01367"></a>01367             <span class="keywordflow">return</span>;
<a name="l01368"></a>01368         }
<a name="l01369"></a>01369         <a class="code" href="../../d7/d27/class_m_s_edge.html" title="A road/street connecting two junctions.">MSEdge</a>* to = <a class="code" href="../../d7/d27/class_m_s_edge.html#ab193f7a67f12ca616305c36964e5aa00" title="Inserts edge into the static dictionary Returns true if the key id isn&amp;#39;t already...">MSEdge::dictionary</a>(toID);
<a name="l01370"></a>01370         <span class="keywordflow">if</span> (to == 0) {
<a name="l01371"></a>01371             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;Unknown to-edge &#39;&quot;</span> + toID + <span class="stringliteral">&quot;&#39; in connection&quot;</span>);
<a name="l01372"></a>01372             <span class="keywordflow">return</span>;
<a name="l01373"></a>01373         }
<a name="l01374"></a>01374         std::pair&lt;MSLane*, MSLane*&gt; lanes = <a class="code" href="../../da/d57/class_n_l_handler.html#a61fbe725e4286fc758e871ed92a622f3" title="retrieves &amp;lt;fromLane, toLane&amp;gt; based on the edges and an index specifier (i.e...">getLanesFromIndices</a>(from, to,
<a name="l01375"></a>01375                 laneIndices, ok);
<a name="l01376"></a>01376         <span class="keywordflow">if</span> (!ok) {
<a name="l01377"></a>01377             <span class="keywordflow">return</span>;
<a name="l01378"></a>01378         }
<a name="l01379"></a>01379         <a class="code" href="../../d9/d16/class_m_s_lane.html" title="Representation of a lane in the micro simulation.">MSLane</a>* fromLane = lanes.first;
<a name="l01380"></a>01380         <a class="code" href="../../d9/d16/class_m_s_lane.html" title="Representation of a lane in the micro simulation.">MSLane</a>* toLane = lanes.second;
<a name="l01381"></a>01381         assert(fromLane);
<a name="l01382"></a>01382         assert(toLane);
<a name="l01383"></a>01383 
<a name="l01384"></a>01384         <span class="keywordtype">int</span> tlLinkIdx;
<a name="l01385"></a>01385         <span class="keywordflow">if</span> (tlID != <span class="stringliteral">&quot;&quot;</span>) {
<a name="l01386"></a>01386             tlLinkIdx =
<a name="l01387"></a>01387                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae510086c383c13db996075db3d31eadb">SUMO_ATTR_TLLINKINDEX</a>) ?
<a name="l01388"></a>01388                             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa20314c8b11251d9d6d82566d6b34136" title="Tries to read given attribute assuming it is an int.">getIntReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae510086c383c13db996075db3d31eadb">SUMO_ATTR_TLLINKINDEX</a>, 0,
<a name="l01389"></a>01389                                     ok) :
<a name="l01390"></a>01390                             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa20314c8b11251d9d6d82566d6b34136" title="Tries to read given attribute assuming it is an int.">getIntReporting</a>(
<a name="l01391"></a>01391                                     <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab06706dd42c6b6bd6375daf26a38a8ad">SUMO_ATTR_TLLINKNO__DEPRECATED</a>, 0, ok);
<a name="l01392"></a>01392             <span class="comment">// make sure that the index is in range</span>
<a name="l01393"></a>01393             <a class="code" href="../../df/d93/class_m_s_traffic_light_logic.html" title="The parent class for traffic light logics.">MSTrafficLightLogic</a>* logic = <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#aa38813ac660883571d477fdd2eb4c353" title="Returns a previously build tls logic.">getTLLogic</a>(
<a name="l01394"></a>01394                     tlID).<a class="code" href="../../d1/dab/class_m_s_t_l_logic_control_1_1_t_l_s_logic_variants.html#a700e5609724b6445a7effc9d212d6129">getActive</a>();
<a name="l01395"></a>01395             <span class="keywordflow">if</span> (tlLinkIdx
<a name="l01396"></a>01396                     &gt;= (<span class="keywordtype">int</span>) logic-&gt;<a class="code" href="../../df/d93/class_m_s_traffic_light_logic.html#a06670997037f3fb482f271601a852a41" title="Returns the definition of the current phase.">getCurrentPhaseDef</a>().<a class="code" href="../../d0/d95/class_m_s_phase_definition.html#ac1a06ef5f493feeb13d574dad17fa032" title="Returns the state within this phase.">getState</a>().size()) {
<a name="l01397"></a>01397                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l01398"></a>01398                         <span class="stringliteral">&quot;Invalid &quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ae510086c383c13db996075db3d31eadb">SUMO_ATTR_TLLINKINDEX</a>) + <span class="stringliteral">&quot; &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(tlLinkIdx) + <span class="stringliteral">&quot;&#39; in connection controlled by &#39;&quot;</span> + tlID + <span class="stringliteral">&quot;&#39;&quot;</span>);
<a name="l01399"></a>01399                 <span class="keywordflow">return</span>;
<a name="l01400"></a>01400             }
<a name="l01401"></a>01401             <span class="keywordflow">if</span> (!ok) {
<a name="l01402"></a>01402                 <span class="keywordflow">return</span>;
<a name="l01403"></a>01403             }
<a name="l01404"></a>01404         }
<a name="l01405"></a>01405         <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> length = fromLane-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#a8b6eba4f01577ab96e7e606d5028bf44" title="Returns this lane&amp;#39;s shape.">getShape</a>()[-1].distanceTo(
<a name="l01406"></a>01406                 toLane-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#a8b6eba4f01577ab96e7e606d5028bf44" title="Returns this lane&amp;#39;s shape.">getShape</a>()[0]);
<a name="l01407"></a>01407         <a class="code" href="../../d3/d2e/class_m_s_link.html">MSLink</a>* link = 0;
<a name="l01408"></a>01408 
<a name="l01409"></a>01409         <span class="comment">// build the link</span>
<a name="l01410"></a>01410 <span class="preprocessor">#ifdef HAVE_INTERNAL_LANES</span>
<a name="l01411"></a>01411 <span class="preprocessor"></span>        <a class="code" href="../../d9/d16/class_m_s_lane.html" title="Representation of a lane in the micro simulation.">MSLane</a>* via = 0;
<a name="l01412"></a>01412         <span class="keywordflow">if</span> (viaID != <span class="stringliteral">&quot;&quot;</span> &amp;&amp; <a class="code" href="../../d5/de7/class_m_s_globals.html#afab897d0ff315c0853f3dfad1b617d8a" title="Information whether the simulation regards internal lanes.">MSGlobals::gUsingInternalLanes</a>) {
<a name="l01413"></a>01413             via = <a class="code" href="../../d9/d16/class_m_s_lane.html#a965f4a235ad88d59aa404c1054dafe75" title="Inserts a MSLane into the static dictionary Returns true if the key id isn&amp;#39;t...">MSLane::dictionary</a>(viaID);
<a name="l01414"></a>01414             <span class="keywordflow">if</span> (via == 0) {
<a name="l01415"></a>01415                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l01416"></a>01416                         <span class="stringliteral">&quot;An unknown lane (&#39;&quot;</span> + viaID + <span class="stringliteral">&quot;&#39;) should be set as a via-lane for lane &#39;&quot;</span> + toLane-&gt;<a class="code" href="../../d5/dbf/class_named.html#a20fd12b55c213fd79eae9fdd47b14eb1" title="Returns the id.">getID</a>() + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01417"></a>01417                 <span class="keywordflow">return</span>;
<a name="l01418"></a>01418             }
<a name="l01419"></a>01419             length = via-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#aef5b982f774910cf6de56065fee1d260" title="Returns the lane&amp;#39;s length.">getLength</a>();
<a name="l01420"></a>01420         }
<a name="l01421"></a>01421         <span class="keywordflow">if</span> (pass &gt;= 0) {
<a name="l01422"></a>01422             <span class="keyword">static_cast&lt;</span><a class="code" href="../../d3/d09/class_m_s_internal_lane.html" title="Representation of a lane over a junction.">MSInternalLane</a>*<span class="keyword">&gt;</span>(toLane)-&gt;setPassPosition(pass);
<a name="l01423"></a>01423         }
<a name="l01424"></a>01424         link = <span class="keyword">new</span> <a class="code" href="../../d3/d2e/class_m_s_link.html">MSLink</a>(toLane, via, dir, state, length);
<a name="l01425"></a>01425         <span class="keywordflow">if</span> (via != 0) {
<a name="l01426"></a>01426             via-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#a622643f9e09fed270806a23bad552610">addIncomingLane</a>(fromLane, link);
<a name="l01427"></a>01427         } <span class="keywordflow">else</span> {
<a name="l01428"></a>01428             toLane-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#a622643f9e09fed270806a23bad552610">addIncomingLane</a>(fromLane, link);
<a name="l01429"></a>01429         }
<a name="l01430"></a>01430 <span class="preprocessor">#else</span>
<a name="l01431"></a>01431 <span class="preprocessor"></span>        link = <span class="keyword">new</span> <a class="code" href="../../d3/d2e/class_m_s_link.html">MSLink</a>(toLane, dir, state, length);
<a name="l01432"></a>01432         toLane-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#a622643f9e09fed270806a23bad552610">addIncomingLane</a>(fromLane, link);
<a name="l01433"></a>01433 <span class="preprocessor">#endif</span>
<a name="l01434"></a>01434 <span class="preprocessor"></span>        toLane-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#af8a59813ab59be346de0657dba1e90f1">addApproachingLane</a>(fromLane);
<a name="l01435"></a>01435 
<a name="l01436"></a>01436         <span class="comment">// if a traffic light is responsible for it, inform the traffic light</span>
<a name="l01437"></a>01437         <span class="comment">// check whether this link is controlled by a traffic light</span>
<a name="l01438"></a>01438         <span class="keywordflow">if</span> (tlID != <span class="stringliteral">&quot;&quot;</span>) {
<a name="l01439"></a>01439             <a class="code" href="../../d1/dab/class_m_s_t_l_logic_control_1_1_t_l_s_logic_variants.html" title="Storage for all programs of a single tls.">MSTLLogicControl::TLSLogicVariants</a>&amp; logics =
<a name="l01440"></a>01440                     <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#aa38813ac660883571d477fdd2eb4c353" title="Returns a previously build tls logic.">getTLLogic</a>(tlID);
<a name="l01441"></a>01441             logics.<a class="code" href="../../d1/dab/class_m_s_t_l_logic_control_1_1_t_l_s_logic_variants.html#a34ee338baf9006060a6ff8fcc00bad8a">addLink</a>(link, fromLane, tlLinkIdx);
<a name="l01442"></a>01442         }
<a name="l01443"></a>01443         <span class="comment">// add the link</span>
<a name="l01444"></a>01444         fromLane-&gt;<a class="code" href="../../d9/d16/class_m_s_lane.html#a695882f06ad88f5838af4c6a5547d49e" title="Delayed initialization.">addLink</a>(link);
<a name="l01445"></a>01445 
<a name="l01446"></a>01446     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l01447"></a>01447         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01448"></a>01448     }
<a name="l01449"></a>01449 }
<a name="l01450"></a>01450 
<a name="l01451"></a><a class="code" href="../../da/d57/class_n_l_handler.html#aed9715d222e6c6c649107050077dfa80">01451</a> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#aa0b67dafb51a20429fabfa8d7a07d57e" title="The different directions a link between two lanes may take (or a stream between two...">LinkDirection</a> <a class="code" href="../../da/d57/class_n_l_handler.html#aed9715d222e6c6c649107050077dfa80" title="Parses the given character into an enumeration typed link direction.">NLHandler::parseLinkDir</a>(<span class="keyword">const</span> std::string&amp; dir) {
<a name="l01452"></a>01452     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d5a/class_s_u_m_o_x_m_l_definitions.html#adee6ce699461e21b766b158fd083a8ce">SUMOXMLDefinitions::LinkDirections</a>.hasString(dir)) {
<a name="l01453"></a>01453         <span class="keywordflow">return</span> <a class="code" href="../../d1/d5a/class_s_u_m_o_x_m_l_definitions.html#adee6ce699461e21b766b158fd083a8ce">SUMOXMLDefinitions::LinkDirections</a>.<a class="code" href="../../d5/d41/class_string_bijection.html#a04ecd30500893639fd2c05722c09f7a4">get</a>(dir);
<a name="l01454"></a>01454     } <span class="keywordflow">else</span> {
<a name="l01455"></a>01455         <span class="keywordflow">throw</span> <a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>(<span class="stringliteral">&quot;Unrecognised link direction &#39;&quot;</span> + dir + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01456"></a>01456     }
<a name="l01457"></a>01457 }
<a name="l01458"></a>01458 
<a name="l01459"></a><a class="code" href="../../da/d57/class_n_l_handler.html#ab5f15937f344b251404383deab0bc78f">01459</a> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#ab0033b911037fd995258d117e65461e0" title="The right-of-way state of a link between two lanes used when constructing a NBTrafficLightLogic...">LinkState</a> <a class="code" href="../../da/d57/class_n_l_handler.html#ab5f15937f344b251404383deab0bc78f" title="Parses the given character into an enumeration typed link state.">NLHandler::parseLinkState</a>(<span class="keyword">const</span> std::string&amp; state) {
<a name="l01460"></a>01460     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d5a/class_s_u_m_o_x_m_l_definitions.html#a4e50ce91100c59980b7df7e6179c811f">SUMOXMLDefinitions::LinkStates</a>.hasString(state)) {
<a name="l01461"></a>01461         <span class="keywordflow">return</span> <a class="code" href="../../d1/d5a/class_s_u_m_o_x_m_l_definitions.html#a4e50ce91100c59980b7df7e6179c811f">SUMOXMLDefinitions::LinkStates</a>.<a class="code" href="../../d5/d41/class_string_bijection.html#a04ecd30500893639fd2c05722c09f7a4">get</a>(state);
<a name="l01462"></a>01462     } <span class="keywordflow">else</span> {
<a name="l01463"></a>01463         <span class="keywordflow">if</span> (state == <span class="stringliteral">&quot;t&quot;</span>) { <span class="comment">// legacy networks</span>
<a name="l01464"></a>01464             <span class="comment">// WRITE_WARNING(&quot;Obsolete link state &#39;t&#39;. Use &#39;o&#39; instead&quot;);</span>
<a name="l01465"></a>01465             <span class="keywordflow">return</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#ab0033b911037fd995258d117e65461e0abfab4b365511f57f3759bdc5168d6bbb" title="The link is controlled by a tls which is off and blinks, has to brake.">LINKSTATE_TL_OFF_BLINKING</a>;
<a name="l01466"></a>01466         } <span class="keywordflow">else</span> {
<a name="l01467"></a>01467             <span class="keywordflow">throw</span> <a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>(<span class="stringliteral">&quot;Unrecognised link state &#39;&quot;</span> + state + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l01468"></a>01468         }
<a name="l01469"></a>01469     }
<a name="l01470"></a>01470 }
<a name="l01471"></a>01471 
<a name="l01472"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a61fbe725e4286fc758e871ed92a622f3">01472</a> std::pair&lt;MSLane*, MSLane*&gt; <a class="code" href="../../da/d57/class_n_l_handler.html#a61fbe725e4286fc758e871ed92a622f3" title="retrieves &amp;lt;fromLane, toLane&amp;gt; based on the edges and an index specifier (i.e...">NLHandler::getLanesFromIndices</a>(<a class="code" href="../../d7/d27/class_m_s_edge.html" title="A road/street connecting two junctions.">MSEdge</a>* from,
<a name="l01473"></a>01473         <a class="code" href="../../d7/d27/class_m_s_edge.html" title="A road/street connecting two junctions.">MSEdge</a>* to, <span class="keyword">const</span> std::string&amp; laneIndices, <span class="keywordtype">bool</span>&amp; ok) {
<a name="l01474"></a>01474     std::string <a class="code" href="../../da/da8/class_generic_s_a_x_handler.html#aca53c681ef04db6383344d351214a3d6" title="Handler for XML-errors.">error</a> = <span class="stringliteral">&quot;Invalid attribute in connection from &#39;&quot;</span> + from-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#a715096baba12f1f89b7bc1bedd6df1b5" title="Returns the id of the edge.">getID</a>()
<a name="l01475"></a>01475             + <span class="stringliteral">&quot;&#39; to &#39;&quot;</span> + to-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#a715096baba12f1f89b7bc1bedd6df1b5" title="Returns the id of the edge.">getID</a>() + <span class="stringliteral">&quot;&#39; &quot;</span>;
<a name="l01476"></a>01476     <a class="code" href="../../db/dc0/class_string_tokenizer.html">StringTokenizer</a> st(laneIndices, <span class="charliteral">&#39;:&#39;</span>);
<a name="l01477"></a>01477     <span class="keywordflow">if</span> (st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#a920b9028afe112760e4c088a2c378c5f">size</a>() == 2) {
<a name="l01478"></a>01478         <span class="keywordtype">int</span> fromLaneIdx;
<a name="l01479"></a>01479         <span class="keywordtype">int</span> toLaneIdx;
<a name="l01480"></a>01480         <span class="keywordflow">try</span> {
<a name="l01481"></a>01481             fromLaneIdx = <a class="code" href="../../db/d13/class_tpl_convert_sec.html">TplConvertSec&lt;char&gt;::_2intSec</a>(st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#afbe25dccd9c18a10650861730e63a7c2">next</a>().c_str(), -1);
<a name="l01482"></a>01482             toLaneIdx = <a class="code" href="../../db/d13/class_tpl_convert_sec.html">TplConvertSec&lt;char&gt;::_2intSec</a>(st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#afbe25dccd9c18a10650861730e63a7c2">next</a>().c_str(), -1);
<a name="l01483"></a>01483             <span class="keywordflow">if</span> (fromLaneIdx &gt;= 0
<a name="l01484"></a>01484                     &amp;&amp; static_cast&lt;unsigned int&gt;(fromLaneIdx)
<a name="l01485"></a>01485                             &lt; from-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#ac6454be7984c840da4fa48808cf22833" title="Returns this edge&amp;#39;s lanes.">getLanes</a>().size() &amp;&amp; toLaneIdx &gt;= 0
<a name="l01486"></a>01486                     &amp;&amp; <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(toLaneIdx)
<a name="l01487"></a>01487                             &lt; to-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#ac6454be7984c840da4fa48808cf22833" title="Returns this edge&amp;#39;s lanes.">getLanes</a>().size()) {
<a name="l01488"></a>01488                 <span class="keywordflow">return</span> std::pair&lt;MSLane*, MSLane*&gt;(
<a name="l01489"></a>01489                         from-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#ac6454be7984c840da4fa48808cf22833" title="Returns this edge&amp;#39;s lanes.">getLanes</a>()[fromLaneIdx],
<a name="l01490"></a>01490                         to-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#ac6454be7984c840da4fa48808cf22833" title="Returns this edge&amp;#39;s lanes.">getLanes</a>()[toLaneIdx]);
<a name="l01491"></a>01491             } <span class="keywordflow">else</span> {
<a name="l01492"></a>01492                 error += <span class="stringliteral">&quot;(invalid index)&quot;</span>;
<a name="l01493"></a>01493             }
<a name="l01494"></a>01494         } <span class="keywordflow">catch</span> (<a class="code" href="../../d7/ddc/class_number_format_exception.html">NumberFormatException</a>&amp;) {
<a name="l01495"></a>01495             error += <span class="stringliteral">&quot;(number format)&quot;</span>;
<a name="l01496"></a>01496         }
<a name="l01497"></a>01497     } <span class="keywordflow">else</span> {
<a name="l01498"></a>01498         error += <span class="stringliteral">&quot;(malformed)&quot;</span>;
<a name="l01499"></a>01499     }
<a name="l01500"></a>01500     <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(error);
<a name="l01501"></a>01501     ok = <span class="keyword">false</span>;
<a name="l01502"></a>01502     <span class="keywordflow">return</span> std::pair&lt;MSLane*, MSLane*&gt;(<span class="keyword">static_cast&lt;</span><a class="code" href="../../d9/d16/class_m_s_lane.html" title="Representation of a lane in the micro simulation.">MSLane</a>*<span class="keyword">&gt;</span>(0),
<a name="l01503"></a>01503             static_cast&lt;MSLane*&gt;(0));
<a name="l01504"></a>01504 }
<a name="l01505"></a>01505 
<a name="l01506"></a>01506 <span class="comment">// ----------------------------------</span>
<a name="l01507"></a><a class="code" href="../../da/d57/class_n_l_handler.html#aa97f474706eaebc6e04191a75aa33659">01507</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#aa97f474706eaebc6e04191a75aa33659" title="Parses network location description.">NLHandler::setLocation</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l01508"></a>01508     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01509"></a>01509     <a class="code" href="../../da/d56/class_position_vector.html" title="A list of 2D-positions.">PositionVector</a> s = <a class="code" href="../../d9/df8/class_geom_conv_helper.html#afff274e69ad451886e889048a1e1f2d5" title="Builds a PositionVector from a string representation, reporting occured errors.">GeomConvHelper::parseShapeReporting</a>(
<a name="l01510"></a>01510             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a0effb28c28241430a403c7b815fb2e93">SUMO_ATTR_NET_OFFSET</a>, 0, ok),
<a name="l01511"></a>01511             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a71c6518bb947798becfe584408002142" title="return the objecttype to which these attributes belong">getObjectType</a>(), 0, ok, <span class="keyword">false</span>);
<a name="l01512"></a>01512     <a class="code" href="../../d5/dda/class_boundary.html" title="A class that stores a 2D geometrical boundary.">Boundary</a> convBoundary = <a class="code" href="../../d9/df8/class_geom_conv_helper.html#aad1058df5bf20802d4fce82289a297a6" title="Builds a boundary from its string representation, reporting occured errors.">GeomConvHelper::parseBoundaryReporting</a>(
<a name="l01513"></a>01513             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a08e415aacfc2ca073d6ad9ccc5aec116">SUMO_ATTR_CONV_BOUNDARY</a>, 0, ok),
<a name="l01514"></a>01514             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a71c6518bb947798becfe584408002142" title="return the objecttype to which these attributes belong">getObjectType</a>(), 0, ok);
<a name="l01515"></a>01515     <a class="code" href="../../d5/dda/class_boundary.html" title="A class that stores a 2D geometrical boundary.">Boundary</a> origBoundary = <a class="code" href="../../d9/df8/class_geom_conv_helper.html#aad1058df5bf20802d4fce82289a297a6" title="Builds a boundary from its string representation, reporting occured errors.">GeomConvHelper::parseBoundaryReporting</a>(
<a name="l01516"></a>01516             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a160fb5eef99f4c4f2fbe4c025bfc463c">SUMO_ATTR_ORIG_BOUNDARY</a>, 0, ok),
<a name="l01517"></a>01517             attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a71c6518bb947798becfe584408002142" title="return the objecttype to which these attributes belong">getObjectType</a>(), 0, ok);
<a name="l01518"></a>01518     std::string proj = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9092068fbc59ab882c2f8be7040ffa95">SUMO_ATTR_ORIG_PROJ</a>, 0, ok);
<a name="l01519"></a>01519     <span class="keywordflow">if</span> (ok) {
<a name="l01520"></a>01520         <a class="code" href="../../d7/d3b/class_position.html" title="A point in 2D or 3D with translation and scaling methods.">Position</a> networkOffset = s[0];
<a name="l01521"></a>01521         <a class="code" href="../../d7/d6c/class_geo_conv_helper.html#abb89773398bc60d5ed62cfe2818af6f9" title="Initialises the processing and the final instance using the given options.">GeoConvHelper::init</a>(proj, networkOffset, origBoundary, convBoundary);
<a name="l01522"></a>01522     }
<a name="l01523"></a>01523 }
<a name="l01524"></a>01524 
<a name="l01525"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a852b068b4a61ed78a2c239a1d016a0de">01525</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a852b068b4a61ed78a2c239a1d016a0de">NLHandler::addDistrict</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l01526"></a>01526     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01527"></a>01527     <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">false</span>;
<a name="l01528"></a>01528     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l01529"></a>01529     <a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l01530"></a>01530     <span class="keywordflow">if</span> (!ok) {
<a name="l01531"></a>01531         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l01532"></a>01532         <span class="keywordflow">return</span>;
<a name="l01533"></a>01533     }
<a name="l01534"></a>01534     <span class="keywordflow">try</span> {
<a name="l01535"></a>01535         <a class="code" href="../../d7/d27/class_m_s_edge.html" title="A road/street connecting two junctions.">MSEdge</a>* sink = <a class="code" href="../../da/d57/class_n_l_handler.html#a8b5f649705380ec22f0fcd0f3b7c0ad1" title="The edge builder to use.">myEdgeControlBuilder</a>.<a class="code" href="../../d9/d96/class_n_l_edge_control_builder.html#a4ae231559dbc4b3375421a789a2cb96f" title="Builds an edge instance (MSEdge in this case).">buildEdge</a>(
<a name="l01536"></a>01536                 <a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a> + <span class="stringliteral">&quot;-sink&quot;</span>);
<a name="l01537"></a>01537         <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d27/class_m_s_edge.html#ab193f7a67f12ca616305c36964e5aa00" title="Inserts edge into the static dictionary Returns true if the key id isn&amp;#39;t already...">MSEdge::dictionary</a>(<a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a> + <span class="stringliteral">&quot;-sink&quot;</span>, sink)) {
<a name="l01538"></a>01538             <span class="keyword">delete</span> sink;
<a name="l01539"></a>01539             <span class="keywordflow">throw</span> <a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>(
<a name="l01540"></a>01540                     <span class="stringliteral">&quot;Another edge with the id &#39;&quot;</span> + <a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a>
<a name="l01541"></a>01541                             + <span class="stringliteral">&quot;-sink&#39; exists.&quot;</span>);
<a name="l01542"></a>01542         }
<a name="l01543"></a>01543         sink-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#ab036ea91f3e51ad6fb8075a7f49fb03a" title="Initialize the edge.">initialize</a>(0, <a class="code" href="../../d7/d27/class_m_s_edge.html#a075fc93ccf4dc6ad26f654b7a2b30f5ea9b628d1a95cdb2ca57f008330e9fe960" title="The edge is a district edge.">MSEdge::EDGEFUNCTION_DISTRICT</a>);
<a name="l01544"></a>01544         <a class="code" href="../../d7/d27/class_m_s_edge.html" title="A road/street connecting two junctions.">MSEdge</a>* source = <a class="code" href="../../da/d57/class_n_l_handler.html#a8b5f649705380ec22f0fcd0f3b7c0ad1" title="The edge builder to use.">myEdgeControlBuilder</a>.<a class="code" href="../../d9/d96/class_n_l_edge_control_builder.html#a4ae231559dbc4b3375421a789a2cb96f" title="Builds an edge instance (MSEdge in this case).">buildEdge</a>(
<a name="l01545"></a>01545                 <a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a> + <span class="stringliteral">&quot;-source&quot;</span>);
<a name="l01546"></a>01546         <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d27/class_m_s_edge.html#ab193f7a67f12ca616305c36964e5aa00" title="Inserts edge into the static dictionary Returns true if the key id isn&amp;#39;t already...">MSEdge::dictionary</a>(<a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a> + <span class="stringliteral">&quot;-source&quot;</span>, source)) {
<a name="l01547"></a>01547             <span class="keyword">delete</span> source;
<a name="l01548"></a>01548             <span class="keywordflow">throw</span> <a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>(
<a name="l01549"></a>01549                     <span class="stringliteral">&quot;Another edge with the id &#39;&quot;</span> + <a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a>
<a name="l01550"></a>01550                             + <span class="stringliteral">&quot;-source&#39; exists.&quot;</span>);
<a name="l01551"></a>01551         }
<a name="l01552"></a>01552         source-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#ab036ea91f3e51ad6fb8075a7f49fb03a" title="Initialize the edge.">initialize</a>(0, <a class="code" href="../../d7/d27/class_m_s_edge.html#a075fc93ccf4dc6ad26f654b7a2b30f5ea9b628d1a95cdb2ca57f008330e9fe960" title="The edge is a district edge.">MSEdge::EDGEFUNCTION_DISTRICT</a>);
<a name="l01553"></a>01553         <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a56eddfbe3ddf92eca2a5629ab0bda5ee" title="the edges of a route">SUMO_ATTR_EDGES</a>)) {
<a name="l01554"></a>01554             std::vector&lt;std::string&gt; desc = <a class="code" href="../../db/dc0/class_string_tokenizer.html">StringTokenizer</a>(
<a name="l01555"></a>01555                     attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae674bccb2c2b5213041eec13668adb00" title="Returns the string-value of the named (by its enum-value) attribute.">getString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a56eddfbe3ddf92eca2a5629ab0bda5ee" title="the edges of a route">SUMO_ATTR_EDGES</a>)).getVector();
<a name="l01556"></a>01556             <span class="keywordflow">for</span> (std::vector&lt;std::string&gt;::const_iterator i = desc.begin();
<a name="l01557"></a>01557                     i != desc.end(); ++i) {
<a name="l01558"></a>01558                 <a class="code" href="../../d7/d27/class_m_s_edge.html" title="A road/street connecting two junctions.">MSEdge</a>* edge = <a class="code" href="../../d7/d27/class_m_s_edge.html#ab193f7a67f12ca616305c36964e5aa00" title="Inserts edge into the static dictionary Returns true if the key id isn&amp;#39;t already...">MSEdge::dictionary</a>(*i);
<a name="l01559"></a>01559                 <span class="comment">// check whether the edge exists</span>
<a name="l01560"></a>01560                 <span class="keywordflow">if</span> (edge == 0) {
<a name="l01561"></a>01561                     <span class="keywordflow">throw</span> <a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>(
<a name="l01562"></a>01562                             <span class="stringliteral">&quot;The edge &#39;&quot;</span> + *i + <span class="stringliteral">&quot;&#39; within district &#39;&quot;</span>
<a name="l01563"></a>01563                                     + <a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a> + <span class="stringliteral">&quot;&#39; is not known.&quot;</span>);
<a name="l01564"></a>01564                 }
<a name="l01565"></a>01565                 source-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#a56a2ae98c16164a457a5e77f448936e2" title="Returns the list of edges which may be reached from this edge.">addFollower</a>(edge);
<a name="l01566"></a>01566                 edge-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#a56a2ae98c16164a457a5e77f448936e2" title="Returns the list of edges which may be reached from this edge.">addFollower</a>(sink);
<a name="l01567"></a>01567             }
<a name="l01568"></a>01568         }
<a name="l01569"></a>01569     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l01570"></a>01570         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01571"></a>01571         <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l01572"></a>01572     }
<a name="l01573"></a>01573 }
<a name="l01574"></a>01574 
<a name="l01575"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a5121da0fb3ee8769156558ea54c90551">01575</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a5121da0fb3ee8769156558ea54c90551">NLHandler::addDistrictEdge</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs, <span class="keywordtype">bool</span> isSource) {
<a name="l01576"></a>01576     <span class="keywordflow">if</span> (<a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l01577"></a>01577         <span class="comment">// earlier error</span>
<a name="l01578"></a>01578         <span class="keywordflow">return</span>;
<a name="l01579"></a>01579     }
<a name="l01580"></a>01580     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l01581"></a>01581     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>,
<a name="l01582"></a>01582             <a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a>.c_str(), ok);
<a name="l01583"></a>01583     <a class="code" href="../../d7/d27/class_m_s_edge.html" title="A road/street connecting two junctions.">MSEdge</a>* succ = <a class="code" href="../../d7/d27/class_m_s_edge.html#ab193f7a67f12ca616305c36964e5aa00" title="Inserts edge into the static dictionary Returns true if the key id isn&amp;#39;t already...">MSEdge::dictionary</a>(<span class="keywordtype">id</span>);
<a name="l01584"></a>01584     <span class="keywordflow">if</span> (succ != 0) {
<a name="l01585"></a>01585         <span class="comment">// connect edge</span>
<a name="l01586"></a>01586         <span class="keywordflow">if</span> (isSource) {
<a name="l01587"></a>01587             <a class="code" href="../../d7/d27/class_m_s_edge.html#ab193f7a67f12ca616305c36964e5aa00" title="Inserts edge into the static dictionary Returns true if the key id isn&amp;#39;t already...">MSEdge::dictionary</a>(<a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a> + <span class="stringliteral">&quot;-source&quot;</span>)-&gt;addFollower(
<a name="l01588"></a>01588                     succ);
<a name="l01589"></a>01589         } <span class="keywordflow">else</span> {
<a name="l01590"></a>01590             succ-&gt;<a class="code" href="../../d7/d27/class_m_s_edge.html#a56a2ae98c16164a457a5e77f448936e2" title="Returns the list of edges which may be reached from this edge.">addFollower</a>(
<a name="l01591"></a>01591                     <a class="code" href="../../d7/d27/class_m_s_edge.html#ab193f7a67f12ca616305c36964e5aa00" title="Inserts edge into the static dictionary Returns true if the key id isn&amp;#39;t already...">MSEdge::dictionary</a>(<a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a> + <span class="stringliteral">&quot;-sink&quot;</span>));
<a name="l01592"></a>01592         }
<a name="l01593"></a>01593     } <span class="keywordflow">else</span> {
<a name="l01594"></a>01594         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(
<a name="l01595"></a>01595                 <span class="stringliteral">&quot;At district &#39;&quot;</span> + <a class="code" href="../../da/d57/class_n_l_handler.html#a3c5956a67e401c3adc982b25d4590ef8" title="The id of the current district.">myCurrentDistrictID</a> + <span class="stringliteral">&quot;&#39;: succeeding edge &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; does not exist.&quot;</span>);
<a name="l01596"></a>01596     }
<a name="l01597"></a>01597 }
<a name="l01598"></a>01598 
<a name="l01599"></a>01599 <span class="comment">// ----------------------------------</span>
<a name="l01600"></a>01600 
<a name="l01601"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a361692f405ebba2b07968ba7223fa5ba">01601</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a361692f405ebba2b07968ba7223fa5ba" title="closes the processing of a lane">NLHandler::closeSuccLane</a>() {
<a name="l01602"></a>01602     <span class="comment">// do not process internal lanes if not wished</span>
<a name="l01603"></a>01603     <span class="keywordflow">if</span> (<a class="code" href="../../da/d57/class_n_l_handler.html#a860058d06347bed9cbcd5acb6c9eb6bd" title="Information whether the currently parsed edge is internal and not wished, here.">myCurrentIsInternalToSkip</a>) {
<a name="l01604"></a>01604         <span class="keywordflow">return</span>;
<a name="l01605"></a>01605     }
<a name="l01606"></a>01606     <span class="keywordflow">try</span> {
<a name="l01607"></a>01607         <a class="code" href="../../da/d57/class_n_l_handler.html#ae9256f8b08f5cc63ab31086cc64077e6" title="The lane-to-lane connections builder to use.">mySucceedingLaneBuilder</a>.<a class="code" href="../../d5/d47/class_n_l_succeeding_lane_builder.html#ac1f805c3db9f5d69b9d4940dbc6bd46e" title="Ends the computation of a container holding the succeeding lanes of a lane.">closeSuccLane</a>();
<a name="l01608"></a>01608     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l01609"></a>01609         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01610"></a>01610     }
<a name="l01611"></a>01611 }
<a name="l01612"></a>01612 
<a name="l01613"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a80036b73e5a32a5f1c85fdbdfa354fea">01613</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a80036b73e5a32a5f1c85fdbdfa354fea" title="Builds of an e3 detector using collected values.">NLHandler::endE3Detector</a>() {
<a name="l01614"></a>01614     <span class="keywordflow">try</span> {
<a name="l01615"></a>01615         <a class="code" href="../../da/d57/class_n_l_handler.html#ac5459d5d686706e8592deeed5a4f5191" title="The detector builder to use.">myDetectorBuilder</a>.<a class="code" href="../../dc/d12/class_n_l_detector_builder.html#a0d01d897795a667f0c5ef6ca4eccb848" title="Builds of an e3 detector using collected values.">endE3Detector</a>();
<a name="l01616"></a>01616     } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l01617"></a>01617         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01618"></a>01618     }
<a name="l01619"></a>01619 }
<a name="l01620"></a>01620 
<a name="l01621"></a><a class="code" href="../../da/d57/class_n_l_handler.html#a94edca1ff9bbaabb76a981de905d9560">01621</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d57/class_n_l_handler.html#a94edca1ff9bbaabb76a981de905d9560">NLHandler::closeWAUT</a>() {
<a name="l01622"></a>01622     <span class="keywordflow">if</span> (!<a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a>) {
<a name="l01623"></a>01623         <span class="keywordflow">try</span> {
<a name="l01624"></a>01624             <a class="code" href="../../da/d57/class_n_l_handler.html#ac5f321e2c628899e040015d5942cd6d1" title="The junction builder to use.">myJunctionControlBuilder</a>.<a class="code" href="../../d4/de2/class_n_l_junction_control_builder.html#a3938c64114117c0742328d815d713636" title="Returns the used tls control.">getTLLogicControlToUse</a>().<a class="code" href="../../d2/da4/class_m_s_t_l_logic_control.html#afec646796334fb10ed00dd392ff62743" title="Closes loading of a WAUT.">closeWAUT</a>(
<a name="l01625"></a>01625                     <a class="code" href="../../da/d57/class_n_l_handler.html#a516f2a6cc6f7a81470185bc2eaa80969" title="The id of the currently processed WAUT.">myCurrentWAUTID</a>);
<a name="l01626"></a>01626         } <span class="keywordflow">catch</span> (<a class="code" href="../../d3/d68/class_invalid_argument.html">InvalidArgument</a>&amp; e) {
<a name="l01627"></a>01627             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(e.what());
<a name="l01628"></a>01628             <a class="code" href="../../da/d57/class_n_l_handler.html#a2a6a713343d73b14521e36dff1d045c7">myCurrentIsBroken</a> = <span class="keyword">true</span>;
<a name="l01629"></a>01629         }
<a name="l01630"></a>01630     }
<a name="l01631"></a>01631     <a class="code" href="../../da/d57/class_n_l_handler.html#a516f2a6cc6f7a81470185bc2eaa80969" title="The id of the currently processed WAUT.">myCurrentWAUTID</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01632"></a>01632 }
<a name="l01633"></a>01633 
<a name="l01634"></a>01634 <span class="comment">/****************************************************************************/</span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Jul 17 12:16:09 2012 for SUMO - Simulation of Urban MObility by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
