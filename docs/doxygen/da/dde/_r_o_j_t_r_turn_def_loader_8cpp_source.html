<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SUMO - Simulation of Urban MObility: ROJTRTurnDefLoader.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="../../dir_75b82e7e4a5feb05200b9ad7adf06257.html">home</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_46b8f36974b309f038ffc35aa047a32b.html">boni</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_52e5be8ca53cec2b5437a8ba83e8e4f0.html">Desktop</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_7de3ce0f65e0314f747915173f89e60e.html">DanielTouched</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_a0096e276045b3ff0719c75e0b3c59bf.html">sumo-0.14.0</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_e9b8d709919855cd07b0394009af2578.html">src</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_c88f9fbef27d79e7216e129e3f995e23.html">jtrrouter</a>
  </div>
</div>
<div class="contents">
<h1>ROJTRTurnDefLoader.cpp</h1><a href="../../da/dde/_r_o_j_t_r_turn_def_loader_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************/</span>
<a name="l00009"></a>00009 <span class="comment">// Loader for the of turning percentages and source/sink definitions</span>
<a name="l00010"></a>00010 <span class="comment">/****************************************************************************/</span>
<a name="l00011"></a>00011 <span class="comment">// SUMO, Simulation of Urban MObility; see http://sumo.sourceforge.net/</span>
<a name="l00012"></a>00012 <span class="comment">// Copyright (C) 2001-2012 DLR (http://www.dlr.de/) and contributors</span>
<a name="l00013"></a>00013 <span class="comment">/****************************************************************************/</span>
<a name="l00014"></a>00014 <span class="comment">//</span>
<a name="l00015"></a>00015 <span class="comment">//   This file is part of SUMO.</span>
<a name="l00016"></a>00016 <span class="comment">//   SUMO is free software: you can redistribute it and/or modify</span>
<a name="l00017"></a>00017 <span class="comment">//   it under the terms of the GNU General Public License as published by</span>
<a name="l00018"></a>00018 <span class="comment">//   the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00019"></a>00019 <span class="comment">//   (at your option) any later version.</span>
<a name="l00020"></a>00020 <span class="comment">//</span>
<a name="l00021"></a>00021 <span class="comment">/****************************************************************************/</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="comment">// ===========================================================================</span>
<a name="l00025"></a>00025 <span class="comment">// included modules</span>
<a name="l00026"></a>00026 <span class="comment">// ===========================================================================</span>
<a name="l00027"></a>00027 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="../../d3/d99/windows__config_8h.html">windows_config.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#else</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="../../db/d16/config_8h.html">config.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#endif</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;set&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="../../d0/da2/_file_helpers_8h.html">utils/common/FileHelpers.h</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="../../d5/de9/_x_m_l_sub_sys_8h.html">utils/xml/XMLSubSys.h</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="../../d7/db4/_util_exceptions_8h.html">utils/common/UtilExceptions.h</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="../../d4/df7/_msg_handler_8h.html">utils/common/MsgHandler.h</a>&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="../../d7/db4/_util_exceptions_8h.html">utils/common/UtilExceptions.h</a>&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;<a class="code" href="../../de/d4a/_tpl_convert_8h.html">utils/common/TplConvert.h</a>&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;<a class="code" href="../../d8/d08/_to_string_8h.html">utils/common/ToString.h</a>&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html">utils/xml/SUMOXMLDefinitions.h</a>&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;<a class="code" href="../../df/da4/_r_o_net_8h.html">router/RONet.h</a>&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../df/d15/_r_o_j_t_r_edge_8h.html">ROJTREdge.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/da1/_r_o_j_t_r_turn_def_loader_8h.html">ROJTRTurnDefLoader.h</a>&quot;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#ifdef CHECK_MEMORY_LEAKS</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="../../d7/d8d/debug__new_8h.html">foreign/nvwa/debug_new.h</a>&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#endif // CHECK_MEMORY_LEAKS</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="comment">// ===========================================================================</span>
<a name="l00053"></a>00053 <span class="comment">// method definitions</span>
<a name="l00054"></a>00054 <span class="comment">// ===========================================================================</span>
<a name="l00055"></a><a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a397da1d437fa97697505e87f66a4d5d3">00055</a> <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a397da1d437fa97697505e87f66a4d5d3" title="Constructor.">ROJTRTurnDefLoader::ROJTRTurnDefLoader</a>(<a class="code" href="../../de/def/class_r_o_net.html" title="The router&amp;#39;s network representation.">RONet</a>&amp; net)
<a name="l00056"></a>00056     : <a class="code" href="../../db/db8/class_s_u_m_o_s_a_x_handler.html" title="SAX-handler base for SUMO-files.">SUMOSAXHandler</a>(<span class="stringliteral">&quot;turn-ratio-file&quot;</span>), myNet(net),
<a name="l00057"></a>00057       myIntervalBegin(0), myIntervalEnd(<a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#a5ba532efbf218127137edc651cf24e36">SUMOTime_MAX</a>), myEdge(0),
<a name="l00058"></a>00058       myHaveWarnedAboutDeprecatedSources(false),
<a name="l00059"></a>00059       myHaveWarnedAboutDeprecatedSinks(false),
<a name="l00060"></a>00060       myHaveWarnedAboutDeprecatedFromEdge(false),
<a name="l00061"></a>00061       myHaveWarnedAboutDeprecatedToEdge(false) {}
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 
<a name="l00064"></a><a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a1b8ea8dd3c2c956bff0a3b1f5a5871f1">00064</a> <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a1b8ea8dd3c2c956bff0a3b1f5a5871f1" title="Destructor.">ROJTRTurnDefLoader::~ROJTRTurnDefLoader</a>() {}
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="keywordtype">void</span>
<a name="l00068"></a><a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#ac6d5c67405db01bbb8c126571e7769e7">00068</a> <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#ac6d5c67405db01bbb8c126571e7769e7" title="Called on the opening of a tag;.">ROJTRTurnDefLoader::myStartElement</a>(<span class="keywordtype">int</span> element,
<a name="l00069"></a>00069                                    <span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00070"></a>00070     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00071"></a>00071     <span class="keywordflow">switch</span> (element) {
<a name="l00072"></a>00072         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba0af9e48211cf854451584926a04a39d4">SUMO_TAG_INTERVAL</a>:
<a name="l00073"></a>00073             <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a5d6397e1aee73000770e525751f37a07" title="The begin and the end of the current interval.">myIntervalBegin</a> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a533632d56a5981854a4cb4e5a32d816a">SUMO_ATTR_BEGIN</a>, 0, ok);
<a name="l00074"></a>00074             <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#ac548748614b5a040c05a677a3f961cf9">myIntervalEnd</a> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a08af070c1f0b36d07fc02628af8e706d" title="Tries to read given attribute assuming it is a SUMOTime.">getSUMOTimeReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a9fdddf15eba27322118d801fa3217251">SUMO_ATTR_END</a>, 0, ok);
<a name="l00075"></a>00075             <span class="keywordflow">break</span>;
<a name="l00076"></a>00076         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba6c6cce587f8601defb7ba99c136bd57b" title="Incoming edge specification (jtrrouter).">SUMO_TAG_FROMEDGE__DEPRECATED</a>:
<a name="l00077"></a>00077             <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a72bf9eea7eea347e1e1ddbe4a67e337e">myHaveWarnedAboutDeprecatedFromEdge</a>) {
<a name="l00078"></a>00078                 <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a72bf9eea7eea347e1e1ddbe4a67e337e">myHaveWarnedAboutDeprecatedFromEdge</a> = <span class="keyword">true</span>;
<a name="l00079"></a>00079                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(<span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba6c6cce587f8601defb7ba99c136bd57b" title="Incoming edge specification (jtrrouter).">SUMO_TAG_FROMEDGE__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9958be753e042d223ff8f7eb1d4817d7">SUMO_TAG_FROMEDGE</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00080"></a>00080             }
<a name="l00081"></a>00081         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9958be753e042d223ff8f7eb1d4817d7">SUMO_TAG_FROMEDGE</a>:
<a name="l00082"></a>00082             <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#af60f3cae8d5e3cb136ab707085073d49" title="Begins the processing of a incoming edge definition.">beginFromEdge</a>(attrs);
<a name="l00083"></a>00083             <span class="keywordflow">break</span>;
<a name="l00084"></a>00084         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baca9cba84b00b57283781cf3fc4309ecd" title="Outgoing edge specification (jtrrouter).">SUMO_TAG_TOEDGE__DEPRECATED</a>:
<a name="l00085"></a>00085             <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a68bfac1f6844b15efd88ba796cbe18e8">myHaveWarnedAboutDeprecatedToEdge</a>) {
<a name="l00086"></a>00086                 <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a68bfac1f6844b15efd88ba796cbe18e8">myHaveWarnedAboutDeprecatedToEdge</a> = <span class="keyword">true</span>;
<a name="l00087"></a>00087                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(<span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baca9cba84b00b57283781cf3fc4309ecd" title="Outgoing edge specification (jtrrouter).">SUMO_TAG_TOEDGE__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba6af663e92d0aad301dd94e46c2d08a50">SUMO_TAG_TOEDGE</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00088"></a>00088             }
<a name="l00089"></a>00089         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba6af663e92d0aad301dd94e46c2d08a50">SUMO_TAG_TOEDGE</a>:
<a name="l00090"></a>00090             <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a90cb2837716ceb235354189586c150d5" title="Parses the probability to use a certain outgoing edge.">addToEdge</a>(attrs);
<a name="l00091"></a>00091             <span class="keywordflow">break</span>;
<a name="l00092"></a>00092         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9c87381fdebbe289813e9831d3522d41" title="Sink(s) specification.">SUMO_TAG_SINK</a>:
<a name="l00093"></a>00093             <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a56eddfbe3ddf92eca2a5629ab0bda5ee" title="the edges of a route">SUMO_ATTR_EDGES</a>)) {
<a name="l00094"></a>00094                 std::string edges = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a56eddfbe3ddf92eca2a5629ab0bda5ee" title="the edges of a route">SUMO_ATTR_EDGES</a>, 0, ok);
<a name="l00095"></a>00095                 <a class="code" href="../../db/dc0/class_string_tokenizer.html">StringTokenizer</a> st(edges, <a class="code" href="../../db/dc0/class_string_tokenizer.html#a64cf5e8b2363147cb65068f44436c1bb">StringTokenizer::WHITECHARS</a>);
<a name="l00096"></a>00096                 <span class="keywordflow">while</span> (st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#aa654384891d4b9d724eee0f6c739193c">hasNext</a>()) {
<a name="l00097"></a>00097                     std::string <span class="keywordtype">id</span> = st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#afbe25dccd9c18a10650861730e63a7c2">next</a>();
<a name="l00098"></a>00098                     <a class="code" href="../../de/df5/class_r_o_edge.html" title="A basic edge for routing applications.">ROEdge</a>* edge = <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#acbda634a3022fbd96b0051c567425612" title="The network to set the information into.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a6ba12e67b00a1536c4ef8e106c85aabb" title="Retrieves an edge from the network.">getEdge</a>(<span class="keywordtype">id</span>);
<a name="l00099"></a>00099                     <span class="keywordflow">if</span> (edge == 0) {
<a name="l00100"></a>00100                         <span class="keywordflow">throw</span> <a class="code" href="../../da/d18/class_process_error.html">ProcessError</a>(<span class="stringliteral">&quot;The edge &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; declared as a sink is not known.&quot;</span>);
<a name="l00101"></a>00101                     }
<a name="l00102"></a>00102                     edge-&gt;<a class="code" href="../../de/df5/class_r_o_edge.html#a4e0e7b8eb8c896ce57b8d8160c004e6b" title="Sets the type of te edge.">setType</a>(<a class="code" href="../../de/df5/class_r_o_edge.html#abbc0725006c12d16bf602adc0d4af17ea12c38694b26abe1578e30bd1ed9a51f5" title="An edge where vehicles disappear (no vehicle may leave this edge).">ROEdge::ET_SINK</a>);
<a name="l00103"></a>00103                 }
<a name="l00104"></a>00104             }
<a name="l00105"></a>00105             <span class="keywordflow">break</span>;
<a name="l00106"></a>00106         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baa4de9ffbf112edce02d60eea7dbb6e7a">SUMO_TAG_SOURCE</a>:
<a name="l00107"></a>00107             <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a56eddfbe3ddf92eca2a5629ab0bda5ee" title="the edges of a route">SUMO_ATTR_EDGES</a>)) {
<a name="l00108"></a>00108                 std::string edges = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a56eddfbe3ddf92eca2a5629ab0bda5ee" title="the edges of a route">SUMO_ATTR_EDGES</a>, 0, ok);
<a name="l00109"></a>00109                 <a class="code" href="../../db/dc0/class_string_tokenizer.html">StringTokenizer</a> st(edges, <a class="code" href="../../db/dc0/class_string_tokenizer.html#a64cf5e8b2363147cb65068f44436c1bb">StringTokenizer::WHITECHARS</a>);
<a name="l00110"></a>00110                 <span class="keywordflow">while</span> (st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#aa654384891d4b9d724eee0f6c739193c">hasNext</a>()) {
<a name="l00111"></a>00111                     std::string <span class="keywordtype">id</span> = st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#afbe25dccd9c18a10650861730e63a7c2">next</a>();
<a name="l00112"></a>00112                     <a class="code" href="../../de/df5/class_r_o_edge.html" title="A basic edge for routing applications.">ROEdge</a>* edge = <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#acbda634a3022fbd96b0051c567425612" title="The network to set the information into.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a6ba12e67b00a1536c4ef8e106c85aabb" title="Retrieves an edge from the network.">getEdge</a>(<span class="keywordtype">id</span>);
<a name="l00113"></a>00113                     <span class="keywordflow">if</span> (edge == 0) {
<a name="l00114"></a>00114                         <span class="keywordflow">throw</span> <a class="code" href="../../da/d18/class_process_error.html">ProcessError</a>(<span class="stringliteral">&quot;The edge &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; declared as a source is not known.&quot;</span>);
<a name="l00115"></a>00115                     }
<a name="l00116"></a>00116                     edge-&gt;<a class="code" href="../../de/df5/class_r_o_edge.html#a4e0e7b8eb8c896ce57b8d8160c004e6b" title="Sets the type of te edge.">setType</a>(<a class="code" href="../../de/df5/class_r_o_edge.html#abbc0725006c12d16bf602adc0d4af17ea9a07d958b940968694c4c5af3f099d71" title="An edge where vehicles are inserted at (no vehicle may come from back).">ROEdge::ET_SOURCE</a>);
<a name="l00117"></a>00117                 }
<a name="l00118"></a>00118             }
<a name="l00119"></a>00119             <span class="keywordflow">break</span>;
<a name="l00120"></a>00120         <span class="keywordflow">default</span>:
<a name="l00121"></a>00121             <span class="keywordflow">break</span>;
<a name="l00122"></a>00122     }
<a name="l00123"></a>00123 }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 
<a name="l00126"></a>00126 <span class="keywordtype">void</span>
<a name="l00127"></a><a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#af99ed37a3d3fa076a442f3c251cc12a9">00127</a> <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#af99ed37a3d3fa076a442f3c251cc12a9" title="Called when characters occure.">ROJTRTurnDefLoader::myCharacters</a>(<span class="keywordtype">int</span> element,
<a name="l00128"></a>00128                                  <span class="keyword">const</span> std::string&amp; chars) {
<a name="l00129"></a>00129     <span class="keywordflow">switch</span> (element) {
<a name="l00130"></a>00130         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9c87381fdebbe289813e9831d3522d41" title="Sink(s) specification.">SUMO_TAG_SINK</a>: {
<a name="l00131"></a>00131             <a class="code" href="../../de/df5/class_r_o_edge.html" title="A basic edge for routing applications.">ROEdge</a>* edge = <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#acbda634a3022fbd96b0051c567425612" title="The network to set the information into.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a6ba12e67b00a1536c4ef8e106c85aabb" title="Retrieves an edge from the network.">getEdge</a>(chars);
<a name="l00132"></a>00132             <span class="keywordflow">if</span> (edge == 0) {
<a name="l00133"></a>00133                 <span class="keywordflow">throw</span> <a class="code" href="../../da/d18/class_process_error.html">ProcessError</a>(<span class="stringliteral">&quot;The edge &#39;&quot;</span> + chars + <span class="stringliteral">&quot;&#39; declared as a sink is not known.&quot;</span>);
<a name="l00134"></a>00134             }
<a name="l00135"></a>00135             <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#ac4ee2f93eeedc859860066c27df0b0d6">myHaveWarnedAboutDeprecatedSinks</a>) {
<a name="l00136"></a>00136                 <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#ac4ee2f93eeedc859860066c27df0b0d6">myHaveWarnedAboutDeprecatedSinks</a> = <span class="keyword">true</span>;
<a name="l00137"></a>00137                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(<span class="stringliteral">&quot;Using characters for sinks is deprecated; use attribute &#39;edges&#39; instead.&quot;</span>);
<a name="l00138"></a>00138             }
<a name="l00139"></a>00139             edge-&gt;<a class="code" href="../../de/df5/class_r_o_edge.html#a4e0e7b8eb8c896ce57b8d8160c004e6b" title="Sets the type of te edge.">setType</a>(<a class="code" href="../../de/df5/class_r_o_edge.html#abbc0725006c12d16bf602adc0d4af17ea12c38694b26abe1578e30bd1ed9a51f5" title="An edge where vehicles disappear (no vehicle may leave this edge).">ROEdge::ET_SINK</a>);
<a name="l00140"></a>00140         }
<a name="l00141"></a>00141         <span class="keywordflow">break</span>;
<a name="l00142"></a>00142         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403baa4de9ffbf112edce02d60eea7dbb6e7a">SUMO_TAG_SOURCE</a>: {
<a name="l00143"></a>00143             <a class="code" href="../../de/df5/class_r_o_edge.html" title="A basic edge for routing applications.">ROEdge</a>* edge = <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#acbda634a3022fbd96b0051c567425612" title="The network to set the information into.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a6ba12e67b00a1536c4ef8e106c85aabb" title="Retrieves an edge from the network.">getEdge</a>(chars);
<a name="l00144"></a>00144             <span class="keywordflow">if</span> (edge == 0) {
<a name="l00145"></a>00145                 <span class="keywordflow">throw</span> <a class="code" href="../../da/d18/class_process_error.html">ProcessError</a>(<span class="stringliteral">&quot;The edge &#39;&quot;</span> + chars + <span class="stringliteral">&quot;&#39; declared as a source is not known.&quot;</span>);
<a name="l00146"></a>00146             }
<a name="l00147"></a>00147             <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a3a3239f24abc8217e0392821a298d9fa" title="Whether the loader has warned about deprecated usage of characters.">myHaveWarnedAboutDeprecatedSources</a>) {
<a name="l00148"></a>00148                 <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a3a3239f24abc8217e0392821a298d9fa" title="Whether the loader has warned about deprecated usage of characters.">myHaveWarnedAboutDeprecatedSources</a> = <span class="keyword">true</span>;
<a name="l00149"></a>00149                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(<span class="stringliteral">&quot;Using characters for sources is deprecated; use attribute &#39;edges&#39; instead.&quot;</span>);
<a name="l00150"></a>00150             }
<a name="l00151"></a>00151             edge-&gt;<a class="code" href="../../de/df5/class_r_o_edge.html#a4e0e7b8eb8c896ce57b8d8160c004e6b" title="Sets the type of te edge.">setType</a>(<a class="code" href="../../de/df5/class_r_o_edge.html#abbc0725006c12d16bf602adc0d4af17ea9a07d958b940968694c4c5af3f099d71" title="An edge where vehicles are inserted at (no vehicle may come from back).">ROEdge::ET_SOURCE</a>);
<a name="l00152"></a>00152         }
<a name="l00153"></a>00153         <span class="keywordflow">break</span>;
<a name="l00154"></a>00154         <span class="keywordflow">default</span>:
<a name="l00155"></a>00155             <span class="keywordflow">break</span>;
<a name="l00156"></a>00156     }
<a name="l00157"></a>00157 }
<a name="l00158"></a>00158 
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="keywordtype">void</span>
<a name="l00161"></a><a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#af60f3cae8d5e3cb136ab707085073d49">00161</a> <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#af60f3cae8d5e3cb136ab707085073d49" title="Begins the processing of a incoming edge definition.">ROJTRTurnDefLoader::beginFromEdge</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00162"></a>00162     <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#aaa046b325ad792a8d5b089ce40883707" title="The current incoming edge the turning probabilities are set into.">myEdge</a> = 0;
<a name="l00163"></a>00163     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00164"></a>00164     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l00165"></a>00165     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00166"></a>00166     <span class="keywordflow">if</span> (!ok) {
<a name="l00167"></a>00167         <span class="keywordflow">return</span>;
<a name="l00168"></a>00168     }
<a name="l00169"></a>00169     <span class="comment">//</span>
<a name="l00170"></a>00170     <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#aaa046b325ad792a8d5b089ce40883707" title="The current incoming edge the turning probabilities are set into.">myEdge</a> = <span class="keyword">static_cast&lt;</span><a class="code" href="../../de/dc2/class_r_o_j_t_r_edge.html" title="An edge the jtr-router may route through.">ROJTREdge</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#acbda634a3022fbd96b0051c567425612" title="The network to set the information into.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a6ba12e67b00a1536c4ef8e106c85aabb" title="Retrieves an edge from the network.">getEdge</a>(<span class="keywordtype">id</span>));
<a name="l00171"></a>00171     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#aaa046b325ad792a8d5b089ce40883707" title="The current incoming edge the turning probabilities are set into.">myEdge</a> == 0) {
<a name="l00172"></a>00172         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;The edge &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; is not known within the network (within a &#39;from-edge&#39; tag).&quot;</span>);
<a name="l00173"></a>00173         <span class="keywordflow">return</span>;
<a name="l00174"></a>00174     }
<a name="l00175"></a>00175 }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 <span class="keywordtype">void</span>
<a name="l00179"></a><a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a90cb2837716ceb235354189586c150d5">00179</a> <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a90cb2837716ceb235354189586c150d5" title="Parses the probability to use a certain outgoing edge.">ROJTRTurnDefLoader::addToEdge</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00180"></a>00180     <span class="keywordflow">if</span> (<a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#aaa046b325ad792a8d5b089ce40883707" title="The current incoming edge the turning probabilities are set into.">myEdge</a> == 0) {
<a name="l00181"></a>00181         <span class="keywordflow">return</span>;
<a name="l00182"></a>00182     }
<a name="l00183"></a>00183     <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;
<a name="l00184"></a>00184     <span class="comment">// get the id, report an error if not given or empty...</span>
<a name="l00185"></a>00185     std::string <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, ok);
<a name="l00186"></a>00186     <span class="keywordflow">if</span> (!ok) {
<a name="l00187"></a>00187         <span class="keywordflow">return</span>;
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189     <span class="comment">//</span>
<a name="l00190"></a>00190     <a class="code" href="../../de/dc2/class_r_o_j_t_r_edge.html" title="An edge the jtr-router may route through.">ROJTREdge</a>* edge = <span class="keyword">static_cast&lt;</span><a class="code" href="../../de/dc2/class_r_o_j_t_r_edge.html" title="An edge the jtr-router may route through.">ROJTREdge</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#acbda634a3022fbd96b0051c567425612" title="The network to set the information into.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a6ba12e67b00a1536c4ef8e106c85aabb" title="Retrieves an edge from the network.">getEdge</a>(<span class="keywordtype">id</span>));
<a name="l00191"></a>00191     <span class="keywordflow">if</span> (edge == 0) {
<a name="l00192"></a>00192         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;The edge &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39; is not known within the network (within a &#39;to-edge&#39; tag).&quot;</span>);
<a name="l00193"></a>00193         <span class="keywordflow">return</span>;
<a name="l00194"></a>00194     }
<a name="l00195"></a>00195     <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> probability = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab7a3aa8e12ca927a25012e1ff3b0d9ea">SUMO_ATTR_PROB</a>, <span class="keywordtype">id</span>.c_str(), ok);
<a name="l00196"></a>00196     <span class="keywordflow">if</span> (ok) {
<a name="l00197"></a>00197         <span class="keywordflow">if</span> (probability &lt; 0) {
<a name="l00198"></a>00198             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;&#39;probability&#39; must be positive (in definition of to-edge &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39;).&quot;</span>);
<a name="l00199"></a>00199         } <span class="keywordflow">else</span> {
<a name="l00200"></a>00200             <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#aaa046b325ad792a8d5b089ce40883707" title="The current incoming edge the turning probabilities are set into.">myEdge</a>-&gt;<a class="code" href="../../de/dc2/class_r_o_j_t_r_edge.html#a361d05c537504384499767bd01e060e5" title="adds the information about the percentage of using a certain follower">addFollowerProbability</a>(edge, <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#a5d6397e1aee73000770e525751f37a07" title="The begin and the end of the current interval.">myIntervalBegin</a>, <a class="code" href="../../d2/d32/class_r_o_j_t_r_turn_def_loader.html#ac548748614b5a040c05a677a3f961cf9">myIntervalEnd</a>, probability);
<a name="l00201"></a>00201         }
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203 }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 <span class="comment">/****************************************************************************/</span>
<a name="l00208"></a>00208 
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Jul 17 12:16:12 2012 for SUMO - Simulation of Urban MObility by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
