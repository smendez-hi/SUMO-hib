<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SUMO - Simulation of Urban MObility: RORDLoader_SUMOBase.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="../../dir_75b82e7e4a5feb05200b9ad7adf06257.html">home</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_46b8f36974b309f038ffc35aa047a32b.html">boni</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_52e5be8ca53cec2b5437a8ba83e8e4f0.html">Desktop</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_7de3ce0f65e0314f747915173f89e60e.html">DanielTouched</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_a0096e276045b3ff0719c75e0b3c59bf.html">sumo-0.14.0</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_e9b8d709919855cd07b0394009af2578.html">src</a>&nbsp;&raquo;&nbsp;<a class="el" href="../../dir_7d5a690347e35fa6dea04dab75144e95.html">router</a>
  </div>
</div>
<div class="contents">
<h1>RORDLoader_SUMOBase.cpp</h1><a href="../../d9/d0a/_r_o_r_d_loader___s_u_m_o_base_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************/</span>
<a name="l00009"></a>00009 <span class="comment">// The base class for SUMO-native route handlers</span>
<a name="l00010"></a>00010 <span class="comment">/****************************************************************************/</span>
<a name="l00011"></a>00011 <span class="comment">// SUMO, Simulation of Urban MObility; see http://sumo.sourceforge.net/</span>
<a name="l00012"></a>00012 <span class="comment">// Copyright (C) 2001-2012 DLR (http://www.dlr.de/) and contributors</span>
<a name="l00013"></a>00013 <span class="comment">/****************************************************************************/</span>
<a name="l00014"></a>00014 <span class="comment">//</span>
<a name="l00015"></a>00015 <span class="comment">//   This file is part of SUMO.</span>
<a name="l00016"></a>00016 <span class="comment">//   SUMO is free software: you can redistribute it and/or modify</span>
<a name="l00017"></a>00017 <span class="comment">//   it under the terms of the GNU General Public License as published by</span>
<a name="l00018"></a>00018 <span class="comment">//   the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00019"></a>00019 <span class="comment">//   (at your option) any later version.</span>
<a name="l00020"></a>00020 <span class="comment">//</span>
<a name="l00021"></a>00021 <span class="comment">/****************************************************************************/</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="comment">// ===========================================================================</span>
<a name="l00025"></a>00025 <span class="comment">// included modules</span>
<a name="l00026"></a>00026 <span class="comment">// ===========================================================================</span>
<a name="l00027"></a>00027 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="../../d3/d99/windows__config_8h.html">windows_config.h</a>&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#else</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="../../db/d16/config_8h.html">config.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#endif</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="../../db/df6/_r_o_r_d_loader___s_u_m_o_base_8h.html">RORDLoader_SUMOBase.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="../../d8/d88/_s_u_m_o_v_type_parameter_8h.html">utils/common/SUMOVTypeParameter.h</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/dfc/_r_o_route_def_8h.html">RORouteDef.h</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="../../df/da4/_r_o_net_8h.html">RONet.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="../../d7/db4/_util_exceptions_8h.html">utils/common/UtilExceptions.h</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="../../d4/df7/_msg_handler_8h.html">utils/common/MsgHandler.h</a>&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="../../da/d8e/_string_tokenizer_8h.html">utils/common/StringTokenizer.h</a>&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;<a class="code" href="../../d8/d08/_to_string_8h.html">utils/common/ToString.h</a>&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="../../df/da2/_r_o_vehicle_8h.html">ROVehicle.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="../../db/d9b/_r_o_route_def___alternatives_8h.html">RORouteDef_Alternatives.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="../../de/d66/_r_o_route_def___complete_8h.html">RORouteDef_Complete.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="../../db/de2/_r_o_route_8h.html">RORoute.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;<a class="code" href="../../d5/d84/_s_u_m_o_vehicle_parser_helper_8h.html">utils/xml/SUMOVehicleParserHelper.h</a>&gt;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#ifdef CHECK_MEMORY_LEAKS</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="../../d7/d8d/debug__new_8h.html">foreign/nvwa/debug_new.h</a>&gt;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#endif // CHECK_MEMORY_LEAKS</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="comment">// ===========================================================================</span>
<a name="l00053"></a>00053 <span class="comment">// method definitions</span>
<a name="l00054"></a>00054 <span class="comment">// ===========================================================================</span>
<a name="l00055"></a><a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a4842b36c7cc89f09f3d81d97e8923ddb">00055</a> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a4842b36c7cc89f09f3d81d97e8923ddb" title="Constructor.">RORDLoader_SUMOBase::RORDLoader_SUMOBase</a>(<a class="code" href="../../de/def/class_r_o_net.html" title="The router&amp;#39;s network representation.">RONet</a>&amp; net,
<a name="l00056"></a>00056         <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> begin, <a class="code" href="../../d4/d64/_s_u_m_o_time_8h.html#ae665eda71d2654ce49eea540f154a3c7">SUMOTime</a> end,
<a name="l00057"></a>00057         <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> beta, <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> gawronA, <span class="keyword">const</span> <a class="code" href="../../db/d16/config_8h.html#a2481f526aef497857d2b407bc09129fd">SUMOReal</a> logitGamma,
<a name="l00058"></a>00058         <span class="keyword">const</span> <span class="keywordtype">int</span> maxRouteNumber, <span class="keyword">const</span> <span class="keywordtype">bool</span> tryRepair, <span class="keyword">const</span> <span class="keywordtype">bool</span> withTaz, <span class="keyword">const</span> <span class="keywordtype">bool</span> keepRoutes,
<a name="l00059"></a>00059         <span class="keyword">const</span> <span class="keywordtype">bool</span> skipRouteCalculation, <span class="keyword">const</span> std::string&amp; file)
<a name="l00060"></a>00060     : <a class="code" href="../../d6/db8/class_r_o_typed_x_m_l_routes_loader.html" title="Base class for loading routes from XML-files.">ROTypedXMLRoutesLoader</a>(net, begin, end, file),
<a name="l00061"></a>00061       myVehicleParameter(0), myCurrentIsOk(true), myAltIsValid(true), myHaveNextRoute(false),
<a name="l00062"></a>00062       myCurrentAlternatives(0),
<a name="l00063"></a>00063       myBeta(beta), myGawronA(gawronA), myLogitGamma(logitGamma), myMaxRouteNumber(maxRouteNumber),
<a name="l00064"></a>00064       myCurrentRoute(0), myCurrentDepart(-1), myTryRepair(tryRepair), myWithTaz(withTaz), myKeepRoutes(keepRoutes),
<a name="l00065"></a>00065       mySkipRouteCalculation(skipRouteCalculation), myColor(0), myCurrentVType(0),
<a name="l00066"></a>00066       myHaveWarnedAboutDeprecatedVType(false), myHaveWarnedAboutDeprecatedRoute(false) {
<a name="l00067"></a>00067 }
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 
<a name="l00070"></a><a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a55a899705989440c28fe678e669033d9">00070</a> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a55a899705989440c28fe678e669033d9" title="Destructor.">RORDLoader_SUMOBase::~RORDLoader_SUMOBase</a>() {
<a name="l00071"></a>00071     <span class="comment">// clean up (on failure)</span>
<a name="l00072"></a>00072     <span class="keyword">delete</span> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a>;
<a name="l00073"></a>00073     <span class="keyword">delete</span> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a2b260f0c206c2fa3509302148a4d4c0d" title="The currently parsed route.">myCurrentRoute</a>;
<a name="l00074"></a>00074     <span class="keyword">delete</span> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>;
<a name="l00075"></a>00075     <span class="keyword">delete</span> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a3508a92a9d9e2498e6698d8934dc619b" title="The color of the current route/vehicle.">myColor</a>;
<a name="l00076"></a>00076 }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="keywordtype">void</span>
<a name="l00080"></a><a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a7794a4a44975fef678b1f665f44b6ae9">00080</a> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a7794a4a44975fef678b1f665f44b6ae9" title="Called on the opening of a tag;.">RORDLoader_SUMOBase::myStartElement</a>(<span class="keywordtype">int</span> element,
<a name="l00081"></a>00081                                     <span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00082"></a>00082     <span class="keywordflow">switch</span> (element) {
<a name="l00083"></a>00083         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9625e12228b5af189de826fc724034d2">SUMO_TAG_ROUTE</a>:
<a name="l00084"></a>00084             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6beb8857046923e7458a1250e8b24de3" title="Begins the parsing of a route alternative of the opened route.">startRoute</a>(attrs);
<a name="l00085"></a>00085             <span class="keywordflow">break</span>;
<a name="l00086"></a>00086         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba561009c4827464ff6456315c887c66ab">SUMO_TAG_VEHICLE</a>:
<a name="l00087"></a>00087             <span class="comment">// try to parse the vehicle definition</span>
<a name="l00088"></a>00088             <span class="keyword">delete</span> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>;
<a name="l00089"></a>00089             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a> = 0;
<a name="l00090"></a>00090             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a> = <a class="code" href="../../d1/d44/class_s_u_m_o_vehicle_parser_helper.html#ad4006d6571d1dcf85d208a6f59596db3" title="Parses a vehicle&amp;#39;s attributes.">SUMOVehicleParserHelper::parseVehicleAttributes</a>(attrs);
<a name="l00091"></a>00091             <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a> != 0) {
<a name="l00092"></a>00092                 <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ad073c239356f307105215446d4773802" title="The currently read vehicle&amp;#39;s depart.">myCurrentDepart</a> = <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#aded3ab5fa08e689297b7db36b24c3cf8" title="The vehicle&amp;#39;s departure time.">depart</a>;
<a name="l00093"></a>00093             }
<a name="l00094"></a>00094             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a> != 0;
<a name="l00095"></a>00095             <span class="keywordflow">break</span>;
<a name="l00096"></a>00096         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba0ab3b8ce7b344252965da7b878dbdb57">SUMO_TAG_VTYPE__DEPRECATED</a>:
<a name="l00097"></a>00097             <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a5bd704aadb0068383f0abdc59e1112c5">myHaveWarnedAboutDeprecatedVType</a>) {
<a name="l00098"></a>00098                 <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a5bd704aadb0068383f0abdc59e1112c5">myHaveWarnedAboutDeprecatedVType</a> = <span class="keyword">true</span>;
<a name="l00099"></a>00099                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(<span class="stringliteral">&quot;&#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba0ab3b8ce7b344252965da7b878dbdb57">SUMO_TAG_VTYPE__DEPRECATED</a>) + <span class="stringliteral">&quot;&#39; is deprecated; please use &#39;&quot;</span> + <a class="code" href="../../d8/d08/_to_string_8h.html#a18065e342d6bcbee25664108f38176f9">toString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba2de4ad0336bf6092af44720b53c7b396">SUMO_TAG_VTYPE</a>) + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00100"></a>00100             }
<a name="l00101"></a>00101         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba2de4ad0336bf6092af44720b53c7b396">SUMO_TAG_VTYPE</a>:
<a name="l00102"></a>00102             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a14606b5ca7293ba29b26735f163e458b" title="The currently parsed vehicle type.">myCurrentVType</a> = <a class="code" href="../../d1/d44/class_s_u_m_o_vehicle_parser_helper.html#a2e7fd2cd2017e02a0f73657f79670658" title="Starts to parse a vehicle type.">SUMOVehicleParserHelper::beginVTypeParsing</a>(attrs);
<a name="l00103"></a>00103             <span class="keywordflow">break</span>;
<a name="l00104"></a>00104         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba5824e4903b9d26ea6f7903c1b22099b2">SUMO_TAG_ROUTE_DISTRIBUTION</a>:
<a name="l00105"></a>00105             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a53bd3d97d350af8365c2b519949e5ff9" title="Information whether the currently parsed alternatives set is valid.">myAltIsValid</a> = <span class="keyword">true</span>;
<a name="l00106"></a>00106             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a4cde1d4708c143a2d7fdf7e455f6dc39" title="Begins the parsing of the next route alternative in the file.">startAlternative</a>(attrs);
<a name="l00107"></a>00107             <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>) {
<a name="l00108"></a>00108                 <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a53bd3d97d350af8365c2b519949e5ff9" title="Information whether the currently parsed alternatives set is valid.">myAltIsValid</a> = <span class="keyword">false</span>;
<a name="l00109"></a>00109             }
<a name="l00110"></a>00110             <span class="keywordflow">break</span>;
<a name="l00111"></a>00111         <span class="keywordflow">default</span>:
<a name="l00112"></a>00112             <span class="keywordflow">break</span>;
<a name="l00113"></a>00113     }
<a name="l00114"></a>00114     <span class="comment">// parse embedded vtype information</span>
<a name="l00115"></a>00115     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a14606b5ca7293ba29b26735f163e458b" title="The currently parsed vehicle type.">myCurrentVType</a> != 0 &amp;&amp; element != <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba2de4ad0336bf6092af44720b53c7b396">SUMO_TAG_VTYPE</a> &amp;&amp; element != <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba0ab3b8ce7b344252965da7b878dbdb57">SUMO_TAG_VTYPE__DEPRECATED</a>) {
<a name="l00116"></a>00116         <a class="code" href="../../d1/d44/class_s_u_m_o_vehicle_parser_helper.html#a8059c6f009a34f8c75e07de0f959970a" title="Parses an element embedded in vtype definition.">SUMOVehicleParserHelper::parseVTypeEmbedded</a>(*<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a14606b5ca7293ba29b26735f163e458b" title="The currently parsed vehicle type.">myCurrentVType</a>, element, attrs);
<a name="l00117"></a>00117         <span class="keywordflow">return</span>;
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119     <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>) {
<a name="l00120"></a>00120         <span class="keywordflow">throw</span> <a class="code" href="../../da/d18/class_process_error.html">ProcessError</a>();
<a name="l00121"></a>00121     }
<a name="l00122"></a>00122 }
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 
<a name="l00125"></a>00125 <span class="keywordtype">void</span>
<a name="l00126"></a><a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6beb8857046923e7458a1250e8b24de3">00126</a> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6beb8857046923e7458a1250e8b24de3" title="Begins the parsing of a route alternative of the opened route.">RORDLoader_SUMOBase::startRoute</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00127"></a>00127     <span class="keyword">delete</span> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a3508a92a9d9e2498e6698d8934dc619b" title="The color of the current route/vehicle.">myColor</a>;
<a name="l00128"></a>00128     <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a3508a92a9d9e2498e6698d8934dc619b" title="The color of the current route/vehicle.">myColor</a> = 0;
<a name="l00129"></a>00129     <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a53bd3d97d350af8365c2b519949e5ff9" title="Information whether the currently parsed alternatives set is valid.">myAltIsValid</a>) {
<a name="l00130"></a>00130         <span class="keywordflow">return</span>;
<a name="l00131"></a>00131     }
<a name="l00132"></a>00132     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a> == 0) {
<a name="l00133"></a>00133         <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">true</span>;
<a name="l00134"></a>00134         <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a> != 0) {
<a name="l00135"></a>00135             <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>)) {
<a name="l00136"></a>00136                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;Internal routes do not have an id (vehicle &#39;&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab39b1071f7e8b20fc560b30685069601" title="The vehicle&amp;#39;s id.">id</a> + <span class="stringliteral">&quot;&#39;).&quot;</span>);
<a name="l00137"></a>00137                 <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00138"></a>00138                 <span class="keywordflow">return</span>;
<a name="l00139"></a>00139             }
<a name="l00140"></a>00140             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a919e530eb7f8323c0e3fe0924a7700c5" title="The name of the currently parsed route.">myCurrentRouteName</a> = <span class="stringliteral">&quot;!&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab39b1071f7e8b20fc560b30685069601" title="The vehicle&amp;#39;s id.">id</a>;
<a name="l00141"></a>00141         } <span class="keywordflow">else</span> {
<a name="l00142"></a>00142             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a919e530eb7f8323c0e3fe0924a7700c5" title="The name of the currently parsed route.">myCurrentRouteName</a> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>);
<a name="l00143"></a>00143         }
<a name="l00144"></a>00144     } <span class="keywordflow">else</span> {
<a name="l00145"></a>00145         <span class="comment">// parse route alternative...</span>
<a name="l00146"></a>00146         <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac289ad964fc34f21bdb96e022a044677" title="The costs of the current alternative.">myCost</a> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ac75d8d5e5b9b3a3e68582e5a1c33615b" title="Tries to read given attribute assuming it is a SUMOReal.">getOptSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a899cd7cd683e00ade1947a5cd338afe3">SUMO_ATTR_COST</a>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a>-&gt;<a class="code" href="../../d5/dbf/class_named.html#a20fd12b55c213fd79eae9fdd47b14eb1" title="Returns the id.">getID</a>().c_str(), <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>, -1);
<a name="l00147"></a>00147         <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6e01b52c854b94cb60d679397f70e8c2" title="The probability of the current alternative&amp;#39;s usage.">myProbability</a> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa9ec53287d0fee3001f064b9eda3ab3f" title="Tries to read given attribute assuming it is a SUMOReal.">getSUMORealReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ab7a3aa8e12ca927a25012e1ff3b0d9ea">SUMO_ATTR_PROB</a>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a>-&gt;<a class="code" href="../../d5/dbf/class_named.html#a20fd12b55c213fd79eae9fdd47b14eb1" title="Returns the id.">getID</a>().c_str(), <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>);
<a name="l00148"></a>00148         <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> &amp;&amp; <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac289ad964fc34f21bdb96e022a044677" title="The costs of the current alternative.">myCost</a> &lt; 0 &amp;&amp; <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac289ad964fc34f21bdb96e022a044677" title="The costs of the current alternative.">myCost</a> != -1) {
<a name="l00149"></a>00149             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;Invalid cost in alternative for route &#39;&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a>-&gt;<a class="code" href="../../d5/dbf/class_named.html#a20fd12b55c213fd79eae9fdd47b14eb1" title="Returns the id.">getID</a>() + <span class="stringliteral">&quot;&#39; (&quot;</span> + toString&lt;SUMOReal&gt;(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac289ad964fc34f21bdb96e022a044677" title="The costs of the current alternative.">myCost</a>) + <span class="stringliteral">&quot;).&quot;</span>);
<a name="l00150"></a>00150             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00151"></a>00151             <span class="keywordflow">return</span>;
<a name="l00152"></a>00152         }
<a name="l00153"></a>00153         <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> &amp;&amp; <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6e01b52c854b94cb60d679397f70e8c2" title="The probability of the current alternative&amp;#39;s usage.">myProbability</a> &lt; 0) {
<a name="l00154"></a>00154             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;Invalid probability in alternative for route &#39;&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a>-&gt;<a class="code" href="../../d5/dbf/class_named.html#a20fd12b55c213fd79eae9fdd47b14eb1" title="Returns the id.">getID</a>() + <span class="stringliteral">&quot;&#39; (&quot;</span> + toString&lt;SUMOReal&gt;(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6e01b52c854b94cb60d679397f70e8c2" title="The probability of the current alternative&amp;#39;s usage.">myProbability</a>) + <span class="stringliteral">&quot;).&quot;</span>);
<a name="l00155"></a>00155             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00156"></a>00156             <span class="keywordflow">return</span>;
<a name="l00157"></a>00157         }
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac9e3c699318ae073cd4b1312b1b96dca" title="A color information.">SUMO_ATTR_COLOR</a>)) {
<a name="l00160"></a>00160         <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a3508a92a9d9e2498e6698d8934dc619b" title="The color of the current route/vehicle.">myColor</a> = <span class="keyword">new</span> <a class="code" href="../../da/da9/class_r_g_b_color.html">RGBColor</a>(<a class="code" href="../../da/da9/class_r_g_b_color.html#a9106d02e4ed6dc53f7550f8277e047e1" title="Parses a color information.">RGBColor::parseColorReporting</a>(
<a name="l00161"></a>00161                                    attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae674bccb2c2b5213041eec13668adb00" title="Returns the string-value of the named (by its enum-value) attribute.">getString</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96ac9e3c699318ae073cd4b1312b1b96dca" title="A color information.">SUMO_ATTR_COLOR</a>),
<a name="l00162"></a>00162                                    attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a71c6518bb947798becfe584408002142" title="return the objecttype to which these attributes belong">getObjectType</a>(), <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a919e530eb7f8323c0e3fe0924a7700c5" title="The name of the currently parsed route.">myCurrentRouteName</a>.c_str(), <span class="keyword">true</span>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>));
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164     <span class="keywordflow">if</span> (attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#ae1e4d97d854c6f3a5a422b5666bc6472" title="Returns the information whether the named (by its enum-value) attribute is within...">hasAttribute</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a56eddfbe3ddf92eca2a5629ab0bda5ee" title="the edges of a route">SUMO_ATTR_EDGES</a>)) {
<a name="l00165"></a>00165         <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a517c4077e8347290a19e218104d20b37" title="Called when characters occure.">myCharacters</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9625e12228b5af189de826fc724034d2">SUMO_TAG_ROUTE</a>, attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a56eddfbe3ddf92eca2a5629ab0bda5ee" title="the edges of a route">SUMO_ATTR_EDGES</a>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a919e530eb7f8323c0e3fe0924a7700c5" title="The name of the currently parsed route.">myCurrentRouteName</a>.c_str(), <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>));
<a name="l00166"></a>00166     } <span class="keywordflow">else</span> {
<a name="l00167"></a>00167         <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a8bd185ce21a2f726183830cd26eee1da">myHaveWarnedAboutDeprecatedRoute</a>) {
<a name="l00168"></a>00168             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a6875e463bd2d24f027eba135e7a5fdfa">WRITE_WARNING</a>(<span class="stringliteral">&quot;Defining routes as a nested string is deprecated, use the edges attribute instead.&quot;</span>);
<a name="l00169"></a>00169             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a8bd185ce21a2f726183830cd26eee1da">myHaveWarnedAboutDeprecatedRoute</a> = <span class="keyword">true</span>;
<a name="l00170"></a>00170         }
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 <span class="keywordtype">void</span>
<a name="l00176"></a><a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a4cde1d4708c143a2d7fdf7e455f6dc39">00176</a> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a4cde1d4708c143a2d7fdf7e455f6dc39" title="Begins the parsing of the next route alternative in the file.">RORDLoader_SUMOBase::startAlternative</a>(<span class="keyword">const</span> <a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html" title="Encapsulated SAX-Attributes.">SUMOSAXAttributes</a>&amp; attrs) {
<a name="l00177"></a>00177     <span class="comment">// try to get the id</span>
<a name="l00178"></a>00178     <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">true</span>;
<a name="l00179"></a>00179     std::string id;
<a name="l00180"></a>00180     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a> != 0) {
<a name="l00181"></a>00181         <span class="keywordtype">id</span> = <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab39b1071f7e8b20fc560b30685069601" title="The vehicle&amp;#39;s id.">id</a>;
<a name="l00182"></a>00182         <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <span class="stringliteral">&quot;&quot;</span>) {
<a name="l00183"></a>00183             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;Missing &#39;id&#39; of a routeDistribution.&quot;</span>);
<a name="l00184"></a>00184             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00185"></a>00185             <span class="keywordflow">return</span>;
<a name="l00186"></a>00186         }
<a name="l00187"></a>00187         <span class="keywordtype">id</span> = <span class="stringliteral">&quot;!&quot;</span> + id;
<a name="l00188"></a>00188     } <span class="keywordflow">else</span> {
<a name="l00189"></a>00189         <span class="keywordtype">id</span> = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#a60fb11617232827b1e57ed41151dd67c" title="Tries to read given attribute assuming it is a string.">getStringReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96acd721cc93d1bc2a1d270b87a24232763">SUMO_ATTR_ID</a>, 0, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>);
<a name="l00190"></a>00190         <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>) {
<a name="l00191"></a>00191             <span class="keywordflow">return</span>;
<a name="l00192"></a>00192         }
<a name="l00193"></a>00193     }
<a name="l00194"></a>00194     <span class="comment">// try to get the index of the last element</span>
<a name="l00195"></a>00195     <span class="keywordtype">int</span> index = attrs.<a class="code" href="../../db/ddf/class_s_u_m_o_s_a_x_attributes.html#aa20314c8b11251d9d6d82566d6b34136" title="Tries to read given attribute assuming it is an int.">getIntReporting</a>(<a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#af3c090286e6f4a2b7fff99eea4690f96a090efdd5be7642eaac2c5346d9281f7e">SUMO_ATTR_LAST</a>, <span class="keywordtype">id</span>.c_str(), <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>);
<a name="l00196"></a>00196     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> &amp;&amp; index &lt; 0) {
<a name="l00197"></a>00197         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;Negative index of a route alternative (id=&#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39;).&quot;</span>);
<a name="l00198"></a>00198         <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00199"></a>00199         <span class="keywordflow">return</span>;
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201     <span class="comment">// build the alternative cont</span>
<a name="l00202"></a>00202     <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a> = <span class="keyword">new</span> <a class="code" href="../../d7/d1f/class_r_o_route_def___alternatives.html" title="A route definition which has some alternatives, already.">RORouteDef_Alternatives</a>(<span class="keywordtype">id</span>, index, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#aea41aef972fbb57df43318ed4a1a90cd" title="gawron or logit beta - value">myBeta</a>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a37b0aa86db51ed22935be34232b44d26" title="gawron a - value">myGawronA</a>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a769f8a3336b42ad2e1a579b61728a24b" title="logit gamma - value">myLogitGamma</a>,
<a name="l00203"></a>00203             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a03820ceac84677da1990ffdab1f539d3" title="The maximum route alternatives number.">myMaxRouteNumber</a>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab375d8d90fc8530991569bac41b5ab53" title="Information whether all routes should be saved.">myKeepRoutes</a>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#adae5c145198360fb8e3e3d0e31c3a927" title="Information whether new routes should be calculated.">mySkipRouteCalculation</a>);
<a name="l00204"></a>00204 }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206 <span class="keywordtype">void</span>
<a name="l00207"></a><a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a517c4077e8347290a19e218104d20b37">00207</a> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a517c4077e8347290a19e218104d20b37" title="Called when characters occure.">RORDLoader_SUMOBase::myCharacters</a>(<span class="keywordtype">int</span> element,
<a name="l00208"></a>00208                                   <span class="keyword">const</span> std::string&amp; chars) {
<a name="l00209"></a>00209     <span class="comment">// process routes only, all other elements do</span>
<a name="l00210"></a>00210     <span class="comment">//  not have embedded characters</span>
<a name="l00211"></a>00211     <span class="keywordflow">if</span> (element != <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9625e12228b5af189de826fc724034d2">SUMO_TAG_ROUTE</a>) {
<a name="l00212"></a>00212         <span class="keywordflow">return</span>;
<a name="l00213"></a>00213     }
<a name="l00214"></a>00214     <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a53bd3d97d350af8365c2b519949e5ff9" title="Information whether the currently parsed alternatives set is valid.">myAltIsValid</a>) {
<a name="l00215"></a>00215         <span class="keywordflow">return</span>;
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a2b260f0c206c2fa3509302148a4d4c0d" title="The currently parsed route.">myCurrentRoute</a> != 0) {
<a name="l00218"></a>00218         <span class="keywordflow">return</span>;
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220     <span class="comment">// check whether the costs and the probability are valid</span>
<a name="l00221"></a>00221     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a> != 0 &amp;&amp; !<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>) {
<a name="l00222"></a>00222         <span class="keywordflow">return</span>;
<a name="l00223"></a>00223     }
<a name="l00224"></a>00224     <span class="comment">// build the list of edges</span>
<a name="l00225"></a>00225     std::vector&lt;const ROEdge*&gt; *list = <span class="keyword">new</span> std::vector&lt;const ROEdge*&gt;();
<a name="l00226"></a>00226     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6d6a26805180ff3e20fd636375affb85" title="Information whether zones (districts) are used as origins / destinations.">myWithTaz</a> &amp;&amp; <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab154fdc9979abb7f30f88bd4f1734084" title="Returns whether the given parameter was set.">wasSet</a>(<a class="code" href="../../d0/d7a/_s_u_m_o_vehicle_parameter_8h.html#a84f55e7647d6d9f5e5337f58a9284532">VEHPARS_TAZ_SET</a>)) {
<a name="l00227"></a>00227         <a class="code" href="../../de/df5/class_r_o_edge.html" title="A basic edge for routing applications.">ROEdge</a>* edge = <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a6ba12e67b00a1536c4ef8e106c85aabb" title="Retrieves an edge from the network.">getEdge</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#aeb82af5a3764ba39d9abf513ba7571eb" title="The vehicle&amp;#39;s origin zone (district).">fromTaz</a> + <span class="stringliteral">&quot;-source&quot;</span>);
<a name="l00228"></a>00228         <span class="keywordflow">if</span> (edge != 0) {
<a name="l00229"></a>00229             list-&gt;push_back(edge);
<a name="l00230"></a>00230         } <span class="keywordflow">else</span> {
<a name="l00231"></a>00231             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;The vehicle &#39;&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab39b1071f7e8b20fc560b30685069601" title="The vehicle&amp;#39;s id.">id</a> + <span class="stringliteral">&quot;&#39; contains the unknown zone &#39;&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#aeb82af5a3764ba39d9abf513ba7571eb" title="The vehicle&amp;#39;s origin zone (district).">fromTaz</a> + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00232"></a>00232             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00233"></a>00233         }
<a name="l00234"></a>00234     }
<a name="l00235"></a>00235     <a class="code" href="../../db/dc0/class_string_tokenizer.html">StringTokenizer</a> st(chars);
<a name="l00236"></a>00236     <span class="keywordflow">while</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> &amp;&amp; st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#aa654384891d4b9d724eee0f6c739193c">hasNext</a>()) { <span class="comment">// !!! too slow !!!</span>
<a name="l00237"></a>00237         <span class="keyword">const</span> std::string <span class="keywordtype">id</span> = st.<a class="code" href="../../db/dc0/class_string_tokenizer.html#afbe25dccd9c18a10650861730e63a7c2">next</a>();
<a name="l00238"></a>00238         <a class="code" href="../../de/df5/class_r_o_edge.html" title="A basic edge for routing applications.">ROEdge</a>* edge = <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a6ba12e67b00a1536c4ef8e106c85aabb" title="Retrieves an edge from the network.">getEdge</a>(<span class="keywordtype">id</span>);
<a name="l00239"></a>00239         <span class="keywordflow">if</span> (edge != 0) {
<a name="l00240"></a>00240             list-&gt;push_back(edge);
<a name="l00241"></a>00241         } <span class="keywordflow">else</span> {
<a name="l00242"></a>00242             <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ae7e4aaa962eb760e33f2b47d1cb44f01" title="Information whether a read route shall be tried to be repaired.">myTryRepair</a>) {
<a name="l00243"></a>00243                 std::string rid = <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a> != 0 ? <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a>-&gt;<a class="code" href="../../d5/dbf/class_named.html#a20fd12b55c213fd79eae9fdd47b14eb1" title="Returns the id.">getID</a>() : <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a919e530eb7f8323c0e3fe0924a7700c5" title="The name of the currently parsed route.">myCurrentRouteName</a>;
<a name="l00244"></a>00244                 <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;The route &#39;&quot;</span> + rid + <span class="stringliteral">&quot;&#39; contains the unknown edge &#39;&quot;</span> + <span class="keywordtype">id</span> + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00245"></a>00245                 <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00246"></a>00246             }
<a name="l00247"></a>00247         }
<a name="l00248"></a>00248     }
<a name="l00249"></a>00249     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6d6a26805180ff3e20fd636375affb85" title="Information whether zones (districts) are used as origins / destinations.">myWithTaz</a> &amp;&amp; <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab154fdc9979abb7f30f88bd4f1734084" title="Returns whether the given parameter was set.">wasSet</a>(<a class="code" href="../../d0/d7a/_s_u_m_o_vehicle_parameter_8h.html#a84f55e7647d6d9f5e5337f58a9284532">VEHPARS_TAZ_SET</a>)) {
<a name="l00250"></a>00250         <a class="code" href="../../de/df5/class_r_o_edge.html" title="A basic edge for routing applications.">ROEdge</a>* edge = <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a6ba12e67b00a1536c4ef8e106c85aabb" title="Retrieves an edge from the network.">getEdge</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ad65fe60e10e097e0e869239465f46679" title="The vehicle&amp;#39;s destination zone (district).">toTaz</a> + <span class="stringliteral">&quot;-sink&quot;</span>);
<a name="l00251"></a>00251         <span class="keywordflow">if</span> (edge != 0) {
<a name="l00252"></a>00252             list-&gt;push_back(edge);
<a name="l00253"></a>00253         } <span class="keywordflow">else</span> {
<a name="l00254"></a>00254             <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;The vehicle &#39;&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab39b1071f7e8b20fc560b30685069601" title="The vehicle&amp;#39;s id.">id</a> + <span class="stringliteral">&quot;&#39; contains the unknown zone &#39;&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ad65fe60e10e097e0e869239465f46679" title="The vehicle&amp;#39;s destination zone (district).">toTaz</a> + <span class="stringliteral">&quot;&#39;.&quot;</span>);
<a name="l00255"></a>00255             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00256"></a>00256         }
<a name="l00257"></a>00257     }
<a name="l00258"></a>00258     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>) {
<a name="l00259"></a>00259         <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a> != 0) {
<a name="l00260"></a>00260             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a>-&gt;<a class="code" href="../../d7/d1f/class_r_o_route_def___alternatives.html#a740426b0d9b43c794b66efa91b6b3a51" title="Adds an alternative loaded from the file An alternative may also be generated whicle...">addLoadedAlternative</a>(
<a name="l00261"></a>00261                 <span class="keyword">new</span> <a class="code" href="../../de/dcc/class_r_o_route.html" title="A complete router&amp;#39;s route.">RORoute</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a>-&gt;<a class="code" href="../../d5/dbf/class_named.html#a20fd12b55c213fd79eae9fdd47b14eb1" title="Returns the id.">getID</a>(), <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac289ad964fc34f21bdb96e022a044677" title="The costs of the current alternative.">myCost</a>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6e01b52c854b94cb60d679397f70e8c2" title="The probability of the current alternative&amp;#39;s usage.">myProbability</a>, *list, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a3508a92a9d9e2498e6698d8934dc619b" title="The color of the current route/vehicle.">myColor</a>));
<a name="l00262"></a>00262         } <span class="keywordflow">else</span> {
<a name="l00263"></a>00263             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a2b260f0c206c2fa3509302148a4d4c0d" title="The currently parsed route.">myCurrentRoute</a> = <span class="keyword">new</span> <a class="code" href="../../d0/dfb/class_r_o_route_def___complete.html" title="A complete route description containing all edges the driver will pass.">RORouteDef_Complete</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a919e530eb7f8323c0e3fe0924a7700c5" title="The name of the currently parsed route.">myCurrentRouteName</a>, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a3508a92a9d9e2498e6698d8934dc619b" title="The color of the current route/vehicle.">myColor</a>, *list, <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ae7e4aaa962eb760e33f2b47d1cb44f01" title="Information whether a read route shall be tried to be repaired.">myTryRepair</a>);
<a name="l00264"></a>00264         }
<a name="l00265"></a>00265         <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a3508a92a9d9e2498e6698d8934dc619b" title="The color of the current route/vehicle.">myColor</a> = 0;
<a name="l00266"></a>00266     }
<a name="l00267"></a>00267     <span class="keyword">delete</span> list;
<a name="l00268"></a>00268 }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="keywordtype">void</span>
<a name="l00272"></a><a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a879ebc8847ea345184bd3ca3e02cfd64">00272</a> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a879ebc8847ea345184bd3ca3e02cfd64" title="Called when a closing tag occurs.">RORDLoader_SUMOBase::myEndElement</a>(<span class="keywordtype">int</span> element) {
<a name="l00273"></a>00273     <span class="keywordflow">switch</span> (element) {
<a name="l00274"></a>00274         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba9625e12228b5af189de826fc724034d2">SUMO_TAG_ROUTE</a>:
<a name="l00275"></a>00275             <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a53bd3d97d350af8365c2b519949e5ff9" title="Information whether the currently parsed alternatives set is valid.">myAltIsValid</a>) {
<a name="l00276"></a>00276                 <span class="keywordflow">return</span>;
<a name="l00277"></a>00277             }
<a name="l00278"></a>00278             <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a2b260f0c206c2fa3509302148a4d4c0d" title="The currently parsed route.">myCurrentRoute</a> != 0 &amp;&amp; <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>) {
<a name="l00279"></a>00279                 <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a> == 0) {
<a name="l00280"></a>00280                     <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a4d00ce5e052f48d7102306dc81c91471">addRouteDef</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a2b260f0c206c2fa3509302148a4d4c0d" title="The currently parsed route.">myCurrentRoute</a>);
<a name="l00281"></a>00281                     <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a2b260f0c206c2fa3509302148a4d4c0d" title="The currently parsed route.">myCurrentRoute</a> = 0;
<a name="l00282"></a>00282                 }
<a name="l00283"></a>00283                 <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a> == 0) {
<a name="l00284"></a>00284                     <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6abcfb9b41b3ddfcf6c24370f0b7dac3" title="Information whether a further route has been read.">myHaveNextRoute</a> = <span class="keyword">true</span>;
<a name="l00285"></a>00285                 }
<a name="l00286"></a>00286                 <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a2b260f0c206c2fa3509302148a4d4c0d" title="The currently parsed route.">myCurrentRoute</a> = 0;
<a name="l00287"></a>00287             }
<a name="l00288"></a>00288             <span class="keywordflow">break</span>;
<a name="l00289"></a>00289         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba5824e4903b9d26ea6f7903c1b22099b2">SUMO_TAG_ROUTE_DISTRIBUTION</a>:
<a name="l00290"></a>00290             <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>) {
<a name="l00291"></a>00291                 <span class="keywordflow">return</span>;
<a name="l00292"></a>00292             }
<a name="l00293"></a>00293             <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a> == 0) {
<a name="l00294"></a>00294                 <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6abcfb9b41b3ddfcf6c24370f0b7dac3" title="Information whether a further route has been read.">myHaveNextRoute</a> = <span class="keyword">true</span>;
<a name="l00295"></a>00295             }
<a name="l00296"></a>00296             <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a4d00ce5e052f48d7102306dc81c91471">addRouteDef</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a>);
<a name="l00297"></a>00297             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a2b260f0c206c2fa3509302148a4d4c0d" title="The currently parsed route.">myCurrentRoute</a> = 0;
<a name="l00298"></a>00298             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a96f26256efab26cfa3a94673f8ea1f7e" title="The currently parsed route alternatives.">myCurrentAlternatives</a> = 0;
<a name="l00299"></a>00299             <span class="keywordflow">break</span>;
<a name="l00300"></a>00300         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba561009c4827464ff6456315c887c66ab">SUMO_TAG_VEHICLE</a>:
<a name="l00301"></a>00301             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a5c331f3e867a0fed713c4e92d915214f">closeVehicle</a>();
<a name="l00302"></a>00302             <span class="keyword">delete</span> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>;
<a name="l00303"></a>00303             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a> = 0;
<a name="l00304"></a>00304             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6abcfb9b41b3ddfcf6c24370f0b7dac3" title="Information whether a further route has been read.">myHaveNextRoute</a> = <span class="keyword">true</span>;
<a name="l00305"></a>00305             <span class="keywordflow">break</span>;
<a name="l00306"></a>00306         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba0ab3b8ce7b344252965da7b878dbdb57">SUMO_TAG_VTYPE__DEPRECATED</a>:
<a name="l00307"></a>00307         <span class="keywordflow">case</span> <a class="code" href="../../d6/d7a/_s_u_m_o_x_m_l_definitions_8h.html#a439d0801a24ff890eae919988363403ba2de4ad0336bf6092af44720b53c7b396">SUMO_TAG_VTYPE</a>: {
<a name="l00308"></a>00308             <a class="code" href="../../d1/d44/class_s_u_m_o_vehicle_parser_helper.html#a02c726a841906e44ea804b0219df7de0" title="Closes parsing of the vehicle type.">SUMOVehicleParserHelper::closeVTypeParsing</a>(*<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a14606b5ca7293ba29b26735f163e458b" title="The currently parsed vehicle type.">myCurrentVType</a>);
<a name="l00309"></a>00309             <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a9ed3ead922089bb70b06baf44f8a5cf2">addVehicleType</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a14606b5ca7293ba29b26735f163e458b" title="The currently parsed vehicle type.">myCurrentVType</a>);
<a name="l00310"></a>00310             <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a14606b5ca7293ba29b26735f163e458b" title="The currently parsed vehicle type.">myCurrentVType</a> = 0;
<a name="l00311"></a>00311         }
<a name="l00312"></a>00312         <span class="keywordflow">default</span>:
<a name="l00313"></a>00313             <span class="keywordflow">break</span>;
<a name="l00314"></a>00314     }
<a name="l00315"></a>00315     <span class="keywordflow">if</span> (!<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a>) {
<a name="l00316"></a>00316         <span class="keywordflow">throw</span> <a class="code" href="../../da/d18/class_process_error.html">ProcessError</a>();
<a name="l00317"></a>00317     }
<a name="l00318"></a>00318 }
<a name="l00319"></a>00319 
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 <span class="keywordtype">bool</span>
<a name="l00322"></a><a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a5c331f3e867a0fed713c4e92d915214f">00322</a> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a5c331f3e867a0fed713c4e92d915214f">RORDLoader_SUMOBase::closeVehicle</a>() {
<a name="l00323"></a>00323     <span class="comment">// get the vehicle id</span>
<a name="l00324"></a>00324     <span class="keywordflow">if</span> (<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#aded3ab5fa08e689297b7db36b24c3cf8" title="The vehicle&amp;#39;s departure time.">depart</a> &lt; <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#acafd11274a09d0c2b64908c25017327c" title="The time for which the first route shall be loaded.">myBegin</a> || <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#aded3ab5fa08e689297b7db36b24c3cf8" title="The vehicle&amp;#39;s departure time.">depart</a> &gt;= <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a16c413e3381dbece223e3d215d4c4d6a" title="The time for which the first route shall be loaded.">myEnd</a>) {
<a name="l00325"></a>00325         <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00326"></a>00326         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00327"></a>00327     }
<a name="l00328"></a>00328     <span class="comment">// get vehicle type</span>
<a name="l00329"></a>00329     <a class="code" href="../../de/d76/class_s_u_m_o_v_type_parameter.html" title="Structure representing possible vehicle parameter.">SUMOVTypeParameter</a>* type = <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a0a97f0aee048825407f3834429e3973f" title="Retrieves the named vehicle type.">getVehicleTypeSecure</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#a22192d6d6ac06da946f509c82f55ab74" title="The vehicle&amp;#39;s type id.">vtypeid</a>);
<a name="l00330"></a>00330     <span class="comment">// get the route</span>
<a name="l00331"></a>00331     <a class="code" href="../../d4/d8d/class_r_o_route_def.html" title="Base class for a vehicle&amp;#39;s route definition.">RORouteDef</a>* route = <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a7e818b8dd2c6945b540edee2f40316cb" title="Returns the named route definition.">getRouteDef</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab30fb1b8d90dc4cbc146c61d9e5162ab" title="The vehicle&amp;#39;s route id.">routeid</a>);
<a name="l00332"></a>00332     <span class="keywordflow">if</span> (route == 0) {
<a name="l00333"></a>00333         route = <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a7e818b8dd2c6945b540edee2f40316cb" title="Returns the named route definition.">getRouteDef</a>(<span class="stringliteral">&quot;!&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab39b1071f7e8b20fc560b30685069601" title="The vehicle&amp;#39;s id.">id</a>);
<a name="l00334"></a>00334     }
<a name="l00335"></a>00335     <span class="keywordflow">if</span> (route == 0) {
<a name="l00336"></a>00336         <a class="code" href="../../d4/df7/_msg_handler_8h.html#a55c513aa2d151eee464020081d6688c2">WRITE_ERROR</a>(<span class="stringliteral">&quot;The route of the vehicle &#39;&quot;</span> + <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab39b1071f7e8b20fc560b30685069601" title="The vehicle&amp;#39;s id.">id</a> + <span class="stringliteral">&quot;&#39; is not known.&quot;</span>);
<a name="l00337"></a>00337         <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ac053f115511f18dad9f87fbc80543560" title="Information whether the currently parsed item is valid.">myCurrentIsOk</a> = <span class="keyword">false</span>;
<a name="l00338"></a>00338         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00339"></a>00339     }
<a name="l00340"></a>00340     <span class="comment">// build the vehicle</span>
<a name="l00341"></a>00341     <span class="keywordflow">if</span> (!<a class="code" href="../../d7/df6/class_msg_handler.html#a11143c53ff1ffb98175c168451309fa3" title="Returns the instance to add errors to.">MsgHandler::getErrorInstance</a>()-&gt;wasInformed()) {
<a name="l00342"></a>00342         <a class="code" href="../../d5/d1b/class_r_o_vehicle.html" title="A vehicle as used by router.">ROVehicle</a>* veh = <span class="keyword">new</span> <a class="code" href="../../d5/d1b/class_r_o_vehicle.html" title="A vehicle as used by router.">ROVehicle</a>(*<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>, route, type);
<a name="l00343"></a>00343         <a class="code" href="../../d3/db9/class_r_o_abstract_route_def_loader.html#a41417581e586ab30e9e431c2f454de38" title="The network to add routes to.">myNet</a>.<a class="code" href="../../de/def/class_r_o_net.html#a676fc87e97ae8e6654786edc8576b930">addVehicle</a>(<a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ab09da38487cb6395fda084b4ab2f098a" title="The parsed vehicle parameter.">myVehicleParameter</a>-&gt;<a class="code" href="../../d8/d51/class_s_u_m_o_vehicle_parameter.html#ab39b1071f7e8b20fc560b30685069601" title="The vehicle&amp;#39;s id.">id</a>, veh);
<a name="l00344"></a>00344         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00347"></a>00347 }
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="keywordtype">void</span>
<a name="l00351"></a><a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ae1f3053ed1395e7c3aa70f1c9e75fa37">00351</a> <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#ae1f3053ed1395e7c3aa70f1c9e75fa37" title="Returns Initialises the reading of a further route.">RORDLoader_SUMOBase::beginNextRoute</a>() {
<a name="l00352"></a>00352     <a class="code" href="../../df/d2f/class_r_o_r_d_loader___s_u_m_o_base.html#a6abcfb9b41b3ddfcf6c24370f0b7dac3" title="Information whether a further route has been read.">myHaveNextRoute</a> = <span class="keyword">false</span>;
<a name="l00353"></a>00353 }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 <span class="comment">/****************************************************************************/</span>
<a name="l00358"></a>00358 
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Jul 17 12:16:12 2012 for SUMO - Simulation of Urban MObility by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
